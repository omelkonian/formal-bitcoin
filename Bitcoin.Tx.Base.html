<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Bitcoin.Tx.Base</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Transactions.</a>
<a id="91" class="Comment">------------------------------------------------------------------------</a>
<a id="164" class="Keyword">module</a> <a id="171" href="Bitcoin.Tx.Base.html" class="Module">Bitcoin.Tx.Base</a> <a id="187" class="Keyword">where</a>

<a id="194" class="Keyword">open</a> <a id="199" class="Keyword">import</a> <a id="206" href="Prelude.Init.html" class="Module">Prelude.Init</a>
<a id="219" class="Keyword">open</a> <a id="224" class="Keyword">import</a> <a id="231" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="245" class="Keyword">open</a> <a id="250" class="Keyword">import</a> <a id="257" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>

<a id="272" class="Keyword">open</a> <a id="277" class="Keyword">import</a> <a id="284" href="Bitcoin.BasicTypes.html" class="Module">Bitcoin.BasicTypes</a>
<a id="303" class="Keyword">open</a> <a id="308" class="Keyword">import</a> <a id="315" href="Bitcoin.Script.Base.html" class="Module">Bitcoin.Script.Base</a>

<a id="336" class="Keyword">record</a> <a id="TxInput"></a><a id="343" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a> <a id="351" class="Symbol">:</a> <a id="353" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="357" class="Keyword">where</a>
  <a id="365" class="Keyword">constructor</a> <a id="_at_"></a><a id="377" href="Bitcoin.Tx.Base.html#377" class="InductiveConstructor Operator">_at_</a>
  <a id="384" class="Keyword">field</a>
    <a id="TxInput.txId"></a><a id="394" href="Bitcoin.Tx.Base.html#394" class="Field">txId</a>  <a id="400" class="Symbol">:</a> <a id="402" href="Bitcoin.BasicTypes.html#266" class="Function">HashId</a>  <a id="410" class="Comment">-- referenced previous transaction</a>
    <a id="TxInput.index"></a><a id="449" href="Bitcoin.Tx.Base.html#449" class="Field">index</a> <a id="455" class="Symbol">:</a> <a id="457" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>       <a id="465" class="Comment">-- index in the referenced transaction&#39;s outputs</a>
<a id="514" class="Keyword">open</a> <a id="519" href="Bitcoin.Tx.Base.html#343" class="Module">TxInput</a> <a id="527" class="Keyword">public</a>
<a id="534" class="Keyword">unquoteDecl</a> <a id="DecEqᵢ"></a><a id="546" href="Bitcoin.Tx.Base.html#546" class="Function">DecEqᵢ</a> <a id="553" class="Symbol">=</a> <a id="555" href="Prelude.Generics.html#7733" class="Function">DERIVE</a> <a id="562" href="Prelude.DecEq.Core.html#97" class="Record">DecEq</a> <a id="568" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="570" class="Keyword">quote</a> <a id="576" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a> <a id="584" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="586" href="Bitcoin.Tx.Base.html#546" class="Function">DecEqᵢ</a> <a id="593" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="596" class="Keyword">record</a> <a id="TxOutput"></a><a id="603" href="Bitcoin.Tx.Base.html#603" class="Record">TxOutput</a> <a id="612" class="Symbol">(</a><a id="613" href="Bitcoin.Tx.Base.html#613" class="Bound">ctx</a> <a id="617" class="Symbol">:</a> <a id="619" href="Bitcoin.Script.Base.html#347" class="Datatype">ScriptContext</a><a id="632" class="Symbol">)</a> <a id="634" class="Symbol">:</a> <a id="636" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="640" class="Keyword">where</a>
  <a id="648" class="Keyword">field</a>
    <a id="TxOutput.value"></a><a id="658" href="Bitcoin.Tx.Base.html#658" class="Field">value</a>     <a id="668" class="Symbol">:</a> <a id="670" href="Bitcoin.BasicTypes.html#222" class="Function">Value</a>
    <a id="TxOutput.validator"></a><a id="680" href="Bitcoin.Tx.Base.html#680" class="Field">validator</a> <a id="690" class="Symbol">:</a> <a id="692" href="Bitcoin.Script.Base.html#2124" class="Datatype">BitcoinScript</a> <a id="706" href="Bitcoin.Tx.Base.html#613" class="Bound">ctx</a>
<a id="710" class="Keyword">open</a> <a id="715" href="Bitcoin.Tx.Base.html#603" class="Module">TxOutput</a> <a id="724" class="Keyword">public</a>
<a id="731" class="Keyword">unquoteDecl</a> <a id="DecEqₒ"></a><a id="743" href="Bitcoin.Tx.Base.html#743" class="Function">DecEqₒ</a> <a id="750" class="Symbol">=</a> <a id="752" href="Prelude.Generics.html#7733" class="Function">DERIVE</a> <a id="759" href="Prelude.DecEq.Core.html#97" class="Record">DecEq</a> <a id="765" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="767" class="Keyword">quote</a> <a id="773" href="Bitcoin.Tx.Base.html#603" class="Record">TxOutput</a> <a id="782" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="784" href="Bitcoin.Tx.Base.html#743" class="Function">DecEqₒ</a> <a id="791" href="Data.List.Base.html#5025" class="Function Operator">]</a>
<a id="∃TxOutput"></a><a id="793" href="Bitcoin.Tx.Base.html#793" class="Function">∃TxOutput</a> <a id="803" class="Symbol">=</a> <a id="805" href="Data.Product.html#1806" class="Function">∃[</a> <a id="808" href="Bitcoin.Tx.Base.html#808" class="Bound">ctx</a> <a id="812" href="Data.Product.html#1806" class="Function">]</a> <a id="814" href="Bitcoin.Tx.Base.html#603" class="Record">TxOutput</a> <a id="823" href="Bitcoin.Tx.Base.html#808" class="Bound">ctx</a>

<a id="Witness"></a><a id="828" href="Bitcoin.Tx.Base.html#828" class="Function">Witness</a> <a id="836" class="Symbol">:</a> <a id="838" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="840" class="Symbol">→</a> <a id="842" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="846" href="Bitcoin.Tx.Base.html#828" class="Function">Witness</a> <a id="854" href="Bitcoin.Tx.Base.html#854" class="Bound">n</a> <a id="856" class="Symbol">=</a> <a id="858" href="Data.Vec.Base.html#998" class="Datatype">Vec</a> <a id="862" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a> <a id="864" href="Bitcoin.Tx.Base.html#854" class="Bound">n</a>

<a id="∃Witness"></a><a id="867" href="Bitcoin.Tx.Base.html#867" class="Function">∃Witness</a> <a id="876" class="Symbol">=</a> <a id="878" href="Data.Product.html#1806" class="Function">∃[</a> <a id="881" href="Bitcoin.Tx.Base.html#881" class="Bound">n</a> <a id="883" href="Data.Product.html#1806" class="Function">]</a> <a id="885" href="Bitcoin.Tx.Base.html#828" class="Function">Witness</a> <a id="893" href="Bitcoin.Tx.Base.html#881" class="Bound">n</a>

<a id="896" class="Keyword">record</a> <a id="Tx"></a><a id="903" href="Bitcoin.Tx.Base.html#903" class="Record">Tx</a> <a id="906" class="Symbol">(</a><a id="907" href="Bitcoin.Tx.Base.html#907" class="Bound">i</a> <a id="909" href="Bitcoin.Tx.Base.html#909" class="Bound">o</a> <a id="911" class="Symbol">:</a> <a id="913" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="914" class="Symbol">)</a> <a id="916" class="Symbol">:</a> <a id="918" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="922" class="Keyword">where</a>
  <a id="930" class="Keyword">field</a>
    <a id="Tx.inputs"></a><a id="940" href="Bitcoin.Tx.Base.html#940" class="Field">inputs</a>  <a id="948" class="Symbol">:</a> <a id="950" href="Data.Vec.Base.html#998" class="Datatype">Vec</a> <a id="954" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a>  <a id="963" href="Bitcoin.Tx.Base.html#907" class="Bound">i</a>   <a id="967" class="Comment">-- inputs</a>
    <a id="Tx.wit"></a><a id="981" href="Bitcoin.Tx.Base.html#981" class="Field">wit</a>     <a id="989" class="Symbol">:</a> <a id="991" href="Data.Vec.Base.html#998" class="Datatype">Vec</a> <a id="995" href="Bitcoin.Tx.Base.html#867" class="Function">∃Witness</a> <a id="1004" href="Bitcoin.Tx.Base.html#907" class="Bound">i</a>   <a id="1008" class="Comment">-- segragated witnesses</a>
    <a id="Tx.relLock"></a><a id="1036" href="Bitcoin.Tx.Base.html#1036" class="Field">relLock</a> <a id="1044" class="Symbol">:</a> <a id="1046" href="Data.Vec.Base.html#998" class="Datatype">Vec</a> <a id="1050" href="Bitcoin.BasicTypes.html#245" class="Function">Time</a>     <a id="1059" href="Bitcoin.Tx.Base.html#907" class="Bound">i</a>   <a id="1063" class="Comment">-- relative timelocks</a>

    <a id="Tx.outputs"></a><a id="1090" href="Bitcoin.Tx.Base.html#1090" class="Field">outputs</a> <a id="1098" class="Symbol">:</a> <a id="1100" href="Data.Vec.Base.html#998" class="Datatype">Vec</a> <a id="1104" href="Bitcoin.Tx.Base.html#793" class="Function">∃TxOutput</a> <a id="1114" href="Bitcoin.Tx.Base.html#909" class="Bound">o</a>  <a id="1117" class="Comment">-- outputs</a>
    <a id="Tx.absLock"></a><a id="1132" href="Bitcoin.Tx.Base.html#1132" class="Field">absLock</a> <a id="1140" class="Symbol">:</a> <a id="1142" href="Bitcoin.BasicTypes.html#245" class="Function">Time</a>             <a id="1159" class="Comment">-- absolute timelock</a>
<a id="1180" class="Keyword">open</a> <a id="1185" href="Bitcoin.Tx.Base.html#903" class="Module">Tx</a> <a id="1188" class="Keyword">public</a>

<a id="1196" class="Keyword">unquoteDecl</a> <a id="DecEqₜₓ"></a><a id="1208" href="Bitcoin.Tx.Base.html#1208" class="Function">DecEqₜₓ</a> <a id="1216" class="Symbol">=</a> <a id="1218" href="Prelude.Generics.html#7733" class="Function">DERIVE</a> <a id="1225" href="Prelude.DecEq.Core.html#97" class="Record">DecEq</a> <a id="1231" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="1233" class="Keyword">quote</a> <a id="1239" href="Bitcoin.Tx.Base.html#903" class="Record">Tx</a> <a id="1242" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1244" href="Bitcoin.Tx.Base.html#1208" class="Function">DecEqₜₓ</a> <a id="1252" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="∃Tx"></a><a id="1255" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a> <a id="1259" class="Symbol">=</a> <a id="1261" href="Data.Product.html#1806" class="Function">∃[</a> <a id="1264" href="Bitcoin.Tx.Base.html#1264" class="Bound">i</a> <a id="1266" href="Data.Product.html#1806" class="Function">]</a> <a id="1268" href="Data.Product.html#1806" class="Function">∃[</a> <a id="1271" href="Bitcoin.Tx.Base.html#1271" class="Bound">o</a> <a id="1273" href="Data.Product.html#1806" class="Function">]</a> <a id="1275" href="Bitcoin.Tx.Base.html#903" class="Record">Tx</a> <a id="1278" href="Bitcoin.Tx.Base.html#1264" class="Bound">i</a> <a id="1280" href="Bitcoin.Tx.Base.html#1271" class="Bound">o</a>

<a id="∃i"></a><a id="1283" href="Bitcoin.Tx.Base.html#1283" class="Function">∃i</a> <a id="∃o"></a><a id="1286" href="Bitcoin.Tx.Base.html#1286" class="Function">∃o</a> <a id="1289" class="Symbol">:</a> <a id="1291" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a> <a id="1295" class="Symbol">→</a> <a id="1297" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="1299" href="Bitcoin.Tx.Base.html#1283" class="Function">∃i</a> <a id="1302" class="Symbol">=</a> <a id="1304" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a>
<a id="1310" href="Bitcoin.Tx.Base.html#1286" class="Function">∃o</a> <a id="1313" class="Symbol">=</a> <a id="1315" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="1321" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="1323" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a>

<a id="∃inputs"></a><a id="1330" href="Bitcoin.Tx.Base.html#1330" class="Function">∃inputs</a> <a id="1338" class="Symbol">:</a> <a id="1340" class="Symbol">(</a><a id="1341" href="Bitcoin.Tx.Base.html#1341" class="Bound">tx</a> <a id="1344" class="Symbol">:</a> <a id="1346" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a><a id="1349" class="Symbol">)</a> <a id="1351" class="Symbol">→</a> <a id="1353" href="Data.Vec.Base.html#998" class="Datatype">Vec</a> <a id="1357" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a> <a id="1365" class="Symbol">(</a><a id="1366" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="1372" href="Bitcoin.Tx.Base.html#1341" class="Bound">tx</a><a id="1374" class="Symbol">)</a>
<a id="1376" href="Bitcoin.Tx.Base.html#1330" class="Function">∃inputs</a> <a id="1384" class="Symbol">(_</a> <a id="1387" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1389" class="Symbol">_</a> <a id="1391" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1393" href="Bitcoin.Tx.Base.html#1393" class="Bound">tx</a><a id="1395" class="Symbol">)</a> <a id="1397" class="Symbol">=</a> <a id="1399" href="Bitcoin.Tx.Base.html#940" class="Field">inputs</a> <a id="1406" href="Bitcoin.Tx.Base.html#1393" class="Bound">tx</a>

<a id="∃outputs"></a><a id="1410" href="Bitcoin.Tx.Base.html#1410" class="Function">∃outputs</a> <a id="1419" class="Symbol">:</a> <a id="1421" class="Symbol">(</a><a id="1422" href="Bitcoin.Tx.Base.html#1422" class="Bound">tx</a> <a id="1425" class="Symbol">:</a> <a id="1427" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a><a id="1430" class="Symbol">)</a> <a id="1432" class="Symbol">→</a> <a id="1434" href="Data.Vec.Base.html#998" class="Datatype">Vec</a> <a id="1438" href="Bitcoin.Tx.Base.html#793" class="Function">∃TxOutput</a> <a id="1448" class="Symbol">(</a><a id="1449" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="1455" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1457" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="1463" href="Bitcoin.Tx.Base.html#1422" class="Bound">tx</a><a id="1465" class="Symbol">)</a>
<a id="1467" href="Bitcoin.Tx.Base.html#1410" class="Function">∃outputs</a> <a id="1476" class="Symbol">(_</a> <a id="1479" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1481" class="Symbol">_</a> <a id="1483" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1485" href="Bitcoin.Tx.Base.html#1485" class="Bound">tx</a><a id="1487" class="Symbol">)</a> <a id="1489" class="Symbol">=</a> <a id="1491" href="Bitcoin.Tx.Base.html#1090" class="Field">outputs</a> <a id="1499" href="Bitcoin.Tx.Base.html#1485" class="Bound">tx</a>

<a id="Tx⁺"></a><a id="1503" href="Bitcoin.Tx.Base.html#1503" class="Function">Tx⁺</a> <a id="⁺Tx"></a><a id="1507" href="Bitcoin.Tx.Base.html#1507" class="Function">⁺Tx</a> <a id="⁺Tx⁺"></a><a id="1511" href="Bitcoin.Tx.Base.html#1511" class="Function">⁺Tx⁺</a> <a id="1516" class="Symbol">:</a> <a id="1518" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="1520" class="Symbol">→</a> <a id="1522" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="1524" class="Symbol">→</a> <a id="1526" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="1530" href="Bitcoin.Tx.Base.html#1503" class="Function">Tx⁺</a> <a id="1534" href="Bitcoin.Tx.Base.html#1534" class="Bound">i</a> <a id="1536" href="Bitcoin.Tx.Base.html#1536" class="Bound">o</a> <a id="1538" class="Symbol">=</a> <a id="1540" href="Bitcoin.Tx.Base.html#903" class="Record">Tx</a> <a id="1543" href="Bitcoin.Tx.Base.html#1534" class="Bound">i</a> <a id="1545" class="Symbol">(</a><a id="1546" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1550" href="Bitcoin.Tx.Base.html#1536" class="Bound">o</a><a id="1551" class="Symbol">)</a>
<a id="1553" href="Bitcoin.Tx.Base.html#1507" class="Function">⁺Tx</a> <a id="1557" href="Bitcoin.Tx.Base.html#1557" class="Bound">i</a> <a id="1559" href="Bitcoin.Tx.Base.html#1559" class="Bound">o</a> <a id="1561" class="Symbol">=</a> <a id="1563" href="Bitcoin.Tx.Base.html#903" class="Record">Tx</a> <a id="1566" class="Symbol">(</a><a id="1567" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1571" href="Bitcoin.Tx.Base.html#1557" class="Bound">i</a><a id="1572" class="Symbol">)</a> <a id="1574" href="Bitcoin.Tx.Base.html#1559" class="Bound">o</a>
<a id="1576" href="Bitcoin.Tx.Base.html#1511" class="Function">⁺Tx⁺</a> <a id="1581" href="Bitcoin.Tx.Base.html#1581" class="Bound">i</a> <a id="1583" href="Bitcoin.Tx.Base.html#1583" class="Bound">o</a> <a id="1585" class="Symbol">=</a> <a id="1587" href="Bitcoin.Tx.Base.html#903" class="Record">Tx</a> <a id="1590" class="Symbol">(</a><a id="1591" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1595" href="Bitcoin.Tx.Base.html#1581" class="Bound">i</a><a id="1596" class="Symbol">)</a> <a id="1598" class="Symbol">(</a><a id="1599" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1603" href="Bitcoin.Tx.Base.html#1583" class="Bound">o</a><a id="1604" class="Symbol">)</a>

<a id="∃Tx⁺"></a><a id="1607" href="Bitcoin.Tx.Base.html#1607" class="Function">∃Tx⁺</a> <a id="1612" class="Symbol">=</a> <a id="1614" href="Data.Product.html#1806" class="Function">∃[</a> <a id="1617" href="Bitcoin.Tx.Base.html#1617" class="Bound">i</a> <a id="1619" href="Data.Product.html#1806" class="Function">]</a> <a id="1621" href="Data.Product.html#1806" class="Function">∃[</a> <a id="1624" href="Bitcoin.Tx.Base.html#1624" class="Bound">o</a> <a id="1626" href="Data.Product.html#1806" class="Function">]</a> <a id="1628" href="Bitcoin.Tx.Base.html#1503" class="Function">Tx⁺</a> <a id="1632" href="Bitcoin.Tx.Base.html#1617" class="Bound">i</a> <a id="1634" href="Bitcoin.Tx.Base.html#1624" class="Bound">o</a>
<a id="∃⁺Tx"></a><a id="1636" href="Bitcoin.Tx.Base.html#1636" class="Function">∃⁺Tx</a> <a id="1641" class="Symbol">=</a> <a id="1643" href="Data.Product.html#1806" class="Function">∃[</a> <a id="1646" href="Bitcoin.Tx.Base.html#1646" class="Bound">i</a> <a id="1648" href="Data.Product.html#1806" class="Function">]</a> <a id="1650" href="Data.Product.html#1806" class="Function">∃[</a> <a id="1653" href="Bitcoin.Tx.Base.html#1653" class="Bound">o</a> <a id="1655" href="Data.Product.html#1806" class="Function">]</a> <a id="1657" href="Bitcoin.Tx.Base.html#1507" class="Function">⁺Tx</a> <a id="1661" href="Bitcoin.Tx.Base.html#1646" class="Bound">i</a> <a id="1663" href="Bitcoin.Tx.Base.html#1653" class="Bound">o</a>
<a id="∃⁺Tx⁺"></a><a id="1665" href="Bitcoin.Tx.Base.html#1665" class="Function">∃⁺Tx⁺</a> <a id="1671" class="Symbol">=</a> <a id="1673" href="Data.Product.html#1806" class="Function">∃[</a> <a id="1676" href="Bitcoin.Tx.Base.html#1676" class="Bound">i</a> <a id="1678" href="Data.Product.html#1806" class="Function">]</a> <a id="1680" href="Data.Product.html#1806" class="Function">∃[</a> <a id="1683" href="Bitcoin.Tx.Base.html#1683" class="Bound">o</a> <a id="1685" href="Data.Product.html#1806" class="Function">]</a> <a id="1687" href="Bitcoin.Tx.Base.html#1511" class="Function">⁺Tx⁺</a> <a id="1692" href="Bitcoin.Tx.Base.html#1676" class="Bound">i</a> <a id="1694" href="Bitcoin.Tx.Base.html#1683" class="Bound">o</a>

<a id="1697" class="Comment">-- alternative representation of a transaction input, which is unhashed and well-bounded</a>
<a id="1786" class="Keyword">record</a> <a id="TxInput′"></a><a id="1793" href="Bitcoin.Tx.Base.html#1793" class="Record">TxInput′</a> <a id="1802" class="Symbol">:</a> <a id="1804" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1808" class="Keyword">where</a>
  <a id="1816" class="Keyword">constructor</a> <a id="_at_"></a><a id="1828" href="Bitcoin.Tx.Base.html#1828" class="InductiveConstructor Operator">_at_</a>
  <a id="1835" class="Keyword">field</a>
    <a id="TxInput′.tx′"></a><a id="1845" href="Bitcoin.Tx.Base.html#1845" class="Field">tx′</a> <a id="1849" class="Symbol">:</a> <a id="1851" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a>
    <a id="TxInput′.index′"></a><a id="1859" href="Bitcoin.Tx.Base.html#1859" class="Field">index′</a> <a id="1866" class="Symbol">:</a> <a id="1868" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="1872" class="Symbol">(</a><a id="1873" href="Bitcoin.Tx.Base.html#1286" class="Function">∃o</a> <a id="1876" href="Bitcoin.Tx.Base.html#1845" class="Field">tx′</a><a id="1879" class="Symbol">)</a>
<a id="1881" class="Keyword">open</a> <a id="1886" href="Bitcoin.Tx.Base.html#1793" class="Module">TxInput′</a> <a id="1895" class="Keyword">public</a>

<a id="1903" class="Keyword">variable</a>
  <a id="1914" href="Bitcoin.Tx.Base.html#1914" class="Generalizable">i</a> <a id="1916" href="Bitcoin.Tx.Base.html#1916" class="Generalizable">i′</a> <a id="1919" href="Bitcoin.Tx.Base.html#1919" class="Generalizable">o</a> <a id="1921" href="Bitcoin.Tx.Base.html#1921" class="Generalizable">o′</a> <a id="1924" class="Symbol">:</a> <a id="1926" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
  <a id="1930" class="Comment">-- T T′ : ∃Tx</a>

<a id="_‼ⁱ_"></a><a id="1945" href="Bitcoin.Tx.Base.html#1945" class="Function Operator">_‼ⁱ_</a> <a id="1950" class="Symbol">:</a> <a id="1952" href="Bitcoin.Tx.Base.html#903" class="Record">Tx</a> <a id="1955" href="Bitcoin.Tx.Base.html#1914" class="Generalizable">i</a> <a id="1957" href="Bitcoin.Tx.Base.html#1919" class="Generalizable">o</a> <a id="1959" class="Symbol">→</a> <a id="1961" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="1965" href="Bitcoin.Tx.Base.html#1914" class="Generalizable">i</a> <a id="1967" class="Symbol">→</a> <a id="1969" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a>
<a id="1977" href="Bitcoin.Tx.Base.html#1977" class="Bound">tx</a> <a id="1980" href="Bitcoin.Tx.Base.html#1945" class="Function Operator">‼ⁱ</a> <a id="1983" href="Bitcoin.Tx.Base.html#1983" class="Bound">i</a> <a id="1985" class="Symbol">=</a> <a id="1987" href="Data.Vec.Base.html#1605" class="Function">V.lookup</a> <a id="1996" class="Symbol">(</a><a id="1997" href="Bitcoin.Tx.Base.html#940" class="Field">inputs</a> <a id="2004" href="Bitcoin.Tx.Base.html#1977" class="Bound">tx</a><a id="2006" class="Symbol">)</a> <a id="2008" href="Bitcoin.Tx.Base.html#1983" class="Bound">i</a>

<a id="_‼ʷ_"></a><a id="2011" href="Bitcoin.Tx.Base.html#2011" class="Function Operator">_‼ʷ_</a> <a id="2016" class="Symbol">:</a> <a id="2018" href="Bitcoin.Tx.Base.html#903" class="Record">Tx</a> <a id="2021" href="Bitcoin.Tx.Base.html#1914" class="Generalizable">i</a> <a id="2023" href="Bitcoin.Tx.Base.html#1919" class="Generalizable">o</a> <a id="2025" class="Symbol">→</a> <a id="2027" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="2031" href="Bitcoin.Tx.Base.html#1914" class="Generalizable">i</a> <a id="2033" class="Symbol">→</a> <a id="2035" href="Bitcoin.Tx.Base.html#867" class="Function">∃Witness</a>
<a id="2044" href="Bitcoin.Tx.Base.html#2044" class="Bound">tx</a> <a id="2047" href="Bitcoin.Tx.Base.html#2011" class="Function Operator">‼ʷ</a> <a id="2050" href="Bitcoin.Tx.Base.html#2050" class="Bound">i</a> <a id="2052" class="Symbol">=</a> <a id="2054" href="Data.Vec.Base.html#1605" class="Function">V.lookup</a> <a id="2063" class="Symbol">(</a><a id="2064" href="Bitcoin.Tx.Base.html#981" class="Field">wit</a> <a id="2068" href="Bitcoin.Tx.Base.html#2044" class="Bound">tx</a><a id="2070" class="Symbol">)</a> <a id="2072" href="Bitcoin.Tx.Base.html#2050" class="Bound">i</a>

<a id="_‼ʳ_"></a><a id="2075" href="Bitcoin.Tx.Base.html#2075" class="Function Operator">_‼ʳ_</a> <a id="2080" class="Symbol">:</a> <a id="2082" href="Bitcoin.Tx.Base.html#903" class="Record">Tx</a> <a id="2085" href="Bitcoin.Tx.Base.html#1914" class="Generalizable">i</a> <a id="2087" href="Bitcoin.Tx.Base.html#1919" class="Generalizable">o</a> <a id="2089" class="Symbol">→</a> <a id="2091" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="2095" href="Bitcoin.Tx.Base.html#1914" class="Generalizable">i</a> <a id="2097" class="Symbol">→</a> <a id="2099" href="Bitcoin.BasicTypes.html#245" class="Function">Time</a>
<a id="2104" href="Bitcoin.Tx.Base.html#2104" class="Bound">tx</a> <a id="2107" href="Bitcoin.Tx.Base.html#2075" class="Function Operator">‼ʳ</a> <a id="2110" href="Bitcoin.Tx.Base.html#2110" class="Bound">i</a> <a id="2112" class="Symbol">=</a> <a id="2114" href="Data.Vec.Base.html#1605" class="Function">V.lookup</a> <a id="2123" class="Symbol">(</a><a id="2124" href="Bitcoin.Tx.Base.html#1036" class="Field">relLock</a> <a id="2132" href="Bitcoin.Tx.Base.html#2104" class="Bound">tx</a><a id="2134" class="Symbol">)</a> <a id="2136" href="Bitcoin.Tx.Base.html#2110" class="Bound">i</a>

<a id="_‼ᵒ_"></a><a id="2139" href="Bitcoin.Tx.Base.html#2139" class="Function Operator">_‼ᵒ_</a> <a id="2144" class="Symbol">:</a> <a id="2146" href="Bitcoin.Tx.Base.html#903" class="Record">Tx</a> <a id="2149" href="Bitcoin.Tx.Base.html#1914" class="Generalizable">i</a> <a id="2151" href="Bitcoin.Tx.Base.html#1919" class="Generalizable">o</a> <a id="2153" class="Symbol">→</a> <a id="2155" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="2159" href="Bitcoin.Tx.Base.html#1919" class="Generalizable">o</a> <a id="2161" class="Symbol">→</a> <a id="2163" href="Bitcoin.Tx.Base.html#793" class="Function">∃TxOutput</a>
<a id="2173" href="Bitcoin.Tx.Base.html#2173" class="Bound">tx</a> <a id="2176" href="Bitcoin.Tx.Base.html#2139" class="Function Operator">‼ᵒ</a> <a id="2179" href="Bitcoin.Tx.Base.html#2179" class="Bound">i</a> <a id="2181" class="Symbol">=</a> <a id="2183" href="Data.Vec.Base.html#1605" class="Function">V.lookup</a> <a id="2192" class="Symbol">(</a><a id="2193" href="Bitcoin.Tx.Base.html#1090" class="Field">outputs</a> <a id="2201" href="Bitcoin.Tx.Base.html#2173" class="Bound">tx</a><a id="2203" class="Symbol">)</a> <a id="2205" href="Bitcoin.Tx.Base.html#2179" class="Bound">i</a>

<a id="2208" class="Comment">-- Coinbase transactions start at time t=0.</a>
<a id="2252" class="Comment">-- Coinbase : Tx 0 o → Set</a>
<a id="2279" class="Comment">-- Coinbase tx = absLock tx ≡ 0</a>

<a id="2312" class="Comment">-- Timed transactions.</a>
<a id="2335" class="Keyword">record</a> <a id="TimedTx"></a><a id="2342" href="Bitcoin.Tx.Base.html#2342" class="Record">TimedTx</a> <a id="2350" class="Symbol">:</a> <a id="2352" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="2356" class="Keyword">where</a>
  <a id="2364" class="Keyword">constructor</a> <a id="_at_"></a><a id="2376" href="Bitcoin.Tx.Base.html#2376" class="InductiveConstructor Operator">_at_</a>
  <a id="2383" class="Keyword">field</a>
    <a id="TimedTx.transaction"></a><a id="2393" href="Bitcoin.Tx.Base.html#2393" class="Field">transaction</a> <a id="2405" class="Symbol">:</a> <a id="2407" href="Bitcoin.Tx.Base.html#1255" class="Function">∃Tx</a>
    <a id="TimedTx.time"></a><a id="2415" href="Bitcoin.Tx.Base.html#2415" class="Field">time</a>        <a id="2427" class="Symbol">:</a> <a id="2429" href="Bitcoin.BasicTypes.html#245" class="Function">Time</a>
<a id="2434" class="Keyword">open</a> <a id="2439" href="Bitcoin.Tx.Base.html#2342" class="Module">TimedTx</a> <a id="2447" class="Keyword">public</a>

<a id="2455" class="Keyword">unquoteDecl</a> <a id="DecEqₜₜₓ"></a><a id="2467" href="Bitcoin.Tx.Base.html#2467" class="Function">DecEqₜₜₓ</a> <a id="2476" class="Symbol">=</a> <a id="2478" href="Prelude.Generics.html#7733" class="Function">DERIVE</a> <a id="2485" href="Prelude.DecEq.Core.html#97" class="Record">DecEq</a> <a id="2491" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="2493" class="Keyword">quote</a> <a id="2499" href="Bitcoin.Tx.Base.html#2342" class="Record">TimedTx</a> <a id="2507" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2509" href="Bitcoin.Tx.Base.html#2467" class="Function">DecEqₜₜₓ</a> <a id="2518" href="Data.List.Base.html#5025" class="Function Operator">]</a>
</pre></body></html>