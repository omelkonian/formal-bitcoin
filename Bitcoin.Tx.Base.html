<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Bitcoin.Tx.Base</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/formal-bitcoin/tree/master/Bitcoin/Tx/Base.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Transactions.</a>
<a id="91" class="Comment">------------------------------------------------------------------------</a>
<a id="164" class="Keyword">module</a> <a id="171" href="Bitcoin.Tx.Base.html" class="Module">Bitcoin.Tx.Base</a> <a id="187" class="Keyword">where</a>

<a id="194" class="Keyword">open</a> <a id="199" class="Keyword">import</a> <a id="206" href="Prelude.Init.html" class="Module">Prelude.Init</a><a id="218" class="Symbol">;</a> <a id="220" class="Keyword">open</a> <a id="225" href="Prelude.Init.html#504" class="Module">SetAsType</a>
<a id="235" class="Keyword">open</a> <a id="240" class="Keyword">import</a> <a id="247" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="261" class="Keyword">open</a> <a id="266" class="Keyword">import</a> <a id="273" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>

<a id="288" class="Keyword">open</a> <a id="293" class="Keyword">import</a> <a id="300" href="Bitcoin.BasicTypes.html" class="Module">Bitcoin.BasicTypes</a>
<a id="319" class="Keyword">open</a> <a id="324" class="Keyword">import</a> <a id="331" href="Bitcoin.Script.Base.html" class="Module">Bitcoin.Script.Base</a>

<a id="352" class="Keyword">record</a> <a id="TxInput"></a><a id="359" href="Bitcoin.Tx.Base.html#359" class="Record">TxInput</a> <a id="367" class="Symbol">:</a> <a id="369" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="374" class="Keyword">where</a>
  <a id="382" class="Keyword">constructor</a> <a id="_at_"></a><a id="394" href="Bitcoin.Tx.Base.html#394" class="InductiveConstructor Operator">_at_</a>
  <a id="401" class="Keyword">field</a> <a id="TxInput.txId"></a><a id="407" href="Bitcoin.Tx.Base.html#407" class="Field">txId</a>  <a id="413" class="Symbol">:</a> <a id="415" href="Bitcoin.BasicTypes.html#244" class="Function">HashId</a>  <a id="423" class="Comment">-- referenced previous transaction</a>
        <a id="TxInput.index"></a><a id="466" href="Bitcoin.Tx.Base.html#466" class="Field">index</a> <a id="472" class="Symbol">:</a> <a id="474" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>       <a id="482" class="Comment">-- index in the referenced transaction&#39;s outputs</a>
<a id="531" class="Keyword">open</a> <a id="536" href="Bitcoin.Tx.Base.html#359" class="Module">TxInput</a> <a id="544" class="Keyword">public</a>
<a id="551" class="Keyword">unquoteDecl</a> <a id="DecEqᵢ"></a><a id="563" href="Bitcoin.Tx.Base.html#563" class="Function">DecEqᵢ</a> <a id="570" class="Symbol">=</a> <a id="572" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="579" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="585" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="587" class="Keyword">quote</a> <a id="593" href="Bitcoin.Tx.Base.html#359" class="Record">TxInput</a> <a id="601" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="603" href="Bitcoin.Tx.Base.html#563" class="Function">DecEqᵢ</a> <a id="610" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="613" class="Keyword">infix</a> <a id="619" class="Number">5</a> <a id="621" href="Bitcoin.Tx.Base.html#698" class="InductiveConstructor Operator">_locked-by_</a>
<a id="633" class="Keyword">record</a> <a id="TxOutput"></a><a id="640" href="Bitcoin.Tx.Base.html#640" class="Record">TxOutput</a> <a id="649" class="Symbol">(</a><a id="650" href="Bitcoin.Tx.Base.html#650" class="Bound">ctx</a> <a id="654" class="Symbol">:</a> <a id="656" href="Bitcoin.Script.Base.html#358" class="Function">ScriptContext</a><a id="669" class="Symbol">)</a> <a id="671" class="Symbol">:</a> <a id="673" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="678" class="Keyword">where</a>
  <a id="686" class="Keyword">constructor</a> <a id="_locked-by_"></a><a id="698" href="Bitcoin.Tx.Base.html#698" class="InductiveConstructor Operator">_locked-by_</a>
  <a id="712" class="Keyword">field</a> <a id="TxOutput.value"></a><a id="718" href="Bitcoin.Tx.Base.html#718" class="Field">value</a>     <a id="728" class="Symbol">:</a> <a id="730" href="Bitcoin.BasicTypes.html#222" class="Function">Value</a>
        <a id="TxOutput.validator"></a><a id="744" href="Bitcoin.Tx.Base.html#744" class="Field">validator</a> <a id="754" class="Symbol">:</a> <a id="756" href="Bitcoin.Script.Base.html#1789" class="Datatype">BitcoinScript</a> <a id="770" href="Bitcoin.Tx.Base.html#650" class="Bound">ctx</a>
<a id="774" class="Keyword">open</a> <a id="779" href="Bitcoin.Tx.Base.html#640" class="Module">TxOutput</a> <a id="788" class="Keyword">public</a>
<a id="795" class="Keyword">unquoteDecl</a> <a id="DecEqₒ"></a><a id="807" href="Bitcoin.Tx.Base.html#807" class="Function">DecEqₒ</a> <a id="814" class="Symbol">=</a> <a id="816" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="823" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="829" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="831" class="Keyword">quote</a> <a id="837" href="Bitcoin.Tx.Base.html#640" class="Record">TxOutput</a> <a id="846" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="848" href="Bitcoin.Tx.Base.html#807" class="Function">DecEqₒ</a> <a id="855" href="Data.List.Base.html#5034" class="Function Operator">]</a>
<a id="∃TxOutput"></a><a id="857" href="Bitcoin.Tx.Base.html#857" class="Function">∃TxOutput</a> <a id="867" class="Symbol">=</a> <a id="869" href="Data.Product.html#1815" class="Function">∃[</a> <a id="872" href="Bitcoin.Tx.Base.html#872" class="Bound">ctx</a> <a id="876" href="Data.Product.html#1815" class="Function">]</a> <a id="878" href="Bitcoin.Tx.Base.html#640" class="Record">TxOutput</a> <a id="887" href="Bitcoin.Tx.Base.html#872" class="Bound">ctx</a>
<a id="_∙value"></a><a id="891" href="Bitcoin.Tx.Base.html#891" class="Function Operator">_∙value</a> <a id="899" class="Symbol">:</a> <a id="901" href="Bitcoin.Tx.Base.html#857" class="Function">∃TxOutput</a> <a id="911" class="Symbol">→</a> <a id="913" href="Bitcoin.BasicTypes.html#222" class="Function">Value</a>
<a id="919" href="Bitcoin.Tx.Base.html#891" class="Function Operator">_∙value</a> <a id="927" class="Symbol">=</a> <a id="929" href="Bitcoin.Tx.Base.html#718" class="Field">value</a> <a id="935" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="937" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a>
<a id="_∙validator"></a><a id="943" href="Bitcoin.Tx.Base.html#943" class="Function Operator">_∙validator</a> <a id="955" class="Symbol">:</a> <a id="957" class="Symbol">(</a><a id="958" href="Bitcoin.Tx.Base.html#958" class="Bound">o</a> <a id="960" class="Symbol">:</a> <a id="962" href="Bitcoin.Tx.Base.html#857" class="Function">∃TxOutput</a><a id="971" class="Symbol">)</a> <a id="973" class="Symbol">→</a> <a id="975" href="Bitcoin.Script.Base.html#1789" class="Datatype">BitcoinScript</a> <a id="989" class="Symbol">(</a><a id="990" href="Bitcoin.Tx.Base.html#958" class="Bound">o</a> <a id="992" class="Symbol">.</a><a id="993" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a><a id="998" class="Symbol">)</a>
<a id="1000" href="Bitcoin.Tx.Base.html#943" class="Function Operator">_∙validator</a> <a id="1012" class="Symbol">=</a> <a id="1014" href="Bitcoin.Tx.Base.html#744" class="Field">validator</a> <a id="1024" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1026" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a>

<a id="Witness"></a><a id="1033" href="Bitcoin.Tx.Base.html#1033" class="Function">Witness</a> <a id="1041" class="Symbol">:</a> <a id="1043" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1045" class="Symbol">→</a> <a id="1047" href="Agda.Primitive.html#320" class="Primitive">Type</a>
<a id="1052" href="Bitcoin.Tx.Base.html#1033" class="Function">Witness</a> <a id="1060" href="Bitcoin.Tx.Base.html#1060" class="Bound">n</a> <a id="1062" class="Symbol">=</a> <a id="1064" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="1068" href="Bitcoin.BasicTypes.html#244" class="Function">HashId</a> <a id="1075" href="Bitcoin.Tx.Base.html#1060" class="Bound">n</a>

<a id="∃Witness"></a><a id="1078" href="Bitcoin.Tx.Base.html#1078" class="Function">∃Witness</a> <a id="1087" class="Symbol">=</a> <a id="1089" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1092" href="Bitcoin.Tx.Base.html#1092" class="Bound">n</a> <a id="1094" href="Data.Product.html#1815" class="Function">]</a> <a id="1096" href="Bitcoin.Tx.Base.html#1033" class="Function">Witness</a> <a id="1104" href="Bitcoin.Tx.Base.html#1092" class="Bound">n</a>

<a id="1107" class="Keyword">record</a> <a id="Tx"></a><a id="1114" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="1117" class="Symbol">(</a><a id="1118" href="Bitcoin.Tx.Base.html#1118" class="Bound">i</a> <a id="1120" href="Bitcoin.Tx.Base.html#1120" class="Bound">o</a> <a id="1122" class="Symbol">:</a> <a id="1124" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="1125" class="Symbol">)</a> <a id="1127" class="Symbol">:</a> <a id="1129" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="1134" class="Keyword">where</a>
  <a id="1142" class="Keyword">field</a>
    <a id="Tx.inputs"></a><a id="1152" href="Bitcoin.Tx.Base.html#1152" class="Field">inputs</a>  <a id="1160" class="Symbol">:</a> <a id="1162" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="1166" href="Bitcoin.Tx.Base.html#359" class="Record">TxInput</a>  <a id="1175" href="Bitcoin.Tx.Base.html#1118" class="Bound">i</a>   <a id="1179" class="Comment">-- inputs</a>
    <a id="Tx.wit"></a><a id="1193" href="Bitcoin.Tx.Base.html#1193" class="Field">wit</a>     <a id="1201" class="Symbol">:</a> <a id="1203" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="1207" href="Bitcoin.Tx.Base.html#1078" class="Function">∃Witness</a> <a id="1216" href="Bitcoin.Tx.Base.html#1118" class="Bound">i</a>   <a id="1220" class="Comment">-- segragated witnesses</a>
    <a id="Tx.relLock"></a><a id="1248" href="Bitcoin.Tx.Base.html#1248" class="Field">relLock</a> <a id="1256" class="Symbol">:</a> <a id="1258" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="1262" href="Bitcoin.BasicTypes.html#233" class="Function">Time</a>     <a id="1271" href="Bitcoin.Tx.Base.html#1118" class="Bound">i</a>   <a id="1275" class="Comment">-- relative timelocks</a>

    <a id="Tx.outputs"></a><a id="1302" href="Bitcoin.Tx.Base.html#1302" class="Field">outputs</a> <a id="1310" class="Symbol">:</a> <a id="1312" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="1316" href="Bitcoin.Tx.Base.html#857" class="Function">∃TxOutput</a> <a id="1326" href="Bitcoin.Tx.Base.html#1120" class="Bound">o</a>  <a id="1329" class="Comment">-- outputs</a>
    <a id="Tx.absLock"></a><a id="1344" href="Bitcoin.Tx.Base.html#1344" class="Field">absLock</a> <a id="1352" class="Symbol">:</a> <a id="1354" href="Bitcoin.BasicTypes.html#233" class="Function">Time</a>             <a id="1371" class="Comment">-- absolute timelock</a>
<a id="1392" class="Keyword">open</a> <a id="1397" href="Bitcoin.Tx.Base.html#1114" class="Module">Tx</a> <a id="1400" class="Keyword">public</a>

<a id="1408" class="Keyword">unquoteDecl</a> <a id="DecEqₜₓ"></a><a id="1420" href="Bitcoin.Tx.Base.html#1420" class="Function">DecEqₜₓ</a> <a id="1428" class="Symbol">=</a> <a id="1430" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="1437" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="1443" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="1445" class="Keyword">quote</a> <a id="1451" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="1454" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1456" href="Bitcoin.Tx.Base.html#1420" class="Function">DecEqₜₓ</a> <a id="1464" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="∃Tx"></a><a id="1467" href="Bitcoin.Tx.Base.html#1467" class="Function">∃Tx</a> <a id="1471" class="Symbol">=</a> <a id="1473" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1476" href="Bitcoin.Tx.Base.html#1476" class="Bound">i</a> <a id="1478" href="Data.Product.html#1815" class="Function">]</a> <a id="1480" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1483" href="Bitcoin.Tx.Base.html#1483" class="Bound">o</a> <a id="1485" href="Data.Product.html#1815" class="Function">]</a> <a id="1487" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="1490" href="Bitcoin.Tx.Base.html#1476" class="Bound">i</a> <a id="1492" href="Bitcoin.Tx.Base.html#1483" class="Bound">o</a>

<a id="∃i"></a><a id="1495" href="Bitcoin.Tx.Base.html#1495" class="Function">∃i</a> <a id="∃o"></a><a id="1498" href="Bitcoin.Tx.Base.html#1498" class="Function">∃o</a> <a id="1501" class="Symbol">:</a> <a id="1503" href="Bitcoin.Tx.Base.html#1467" class="Function">∃Tx</a> <a id="1507" class="Symbol">→</a> <a id="1509" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="1511" href="Bitcoin.Tx.Base.html#1495" class="Function">∃i</a> <a id="1514" class="Symbol">=</a> <a id="1516" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a>
<a id="1522" href="Bitcoin.Tx.Base.html#1498" class="Function">∃o</a> <a id="1525" class="Symbol">=</a> <a id="1527" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="1533" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1535" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a>

<a id="∃inputs"></a><a id="1542" href="Bitcoin.Tx.Base.html#1542" class="Function">∃inputs</a> <a id="1550" class="Symbol">:</a> <a id="1552" class="Symbol">(</a><a id="1553" href="Bitcoin.Tx.Base.html#1553" class="Bound">tx</a> <a id="1556" class="Symbol">:</a> <a id="1558" href="Bitcoin.Tx.Base.html#1467" class="Function">∃Tx</a><a id="1561" class="Symbol">)</a> <a id="1563" class="Symbol">→</a> <a id="1565" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="1569" href="Bitcoin.Tx.Base.html#359" class="Record">TxInput</a> <a id="1577" class="Symbol">(</a><a id="1578" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="1584" href="Bitcoin.Tx.Base.html#1553" class="Bound">tx</a><a id="1586" class="Symbol">)</a>
<a id="1588" href="Bitcoin.Tx.Base.html#1542" class="Function">∃inputs</a> <a id="1596" class="Symbol">(_</a> <a id="1599" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1601" class="Symbol">_</a> <a id="1603" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1605" href="Bitcoin.Tx.Base.html#1605" class="Bound">tx</a><a id="1607" class="Symbol">)</a> <a id="1609" class="Symbol">=</a> <a id="1611" href="Bitcoin.Tx.Base.html#1605" class="Bound">tx</a> <a id="1614" class="Symbol">.</a><a id="1615" href="Bitcoin.Tx.Base.html#1152" class="Field">inputs</a>

<a id="∃outputs"></a><a id="1623" href="Bitcoin.Tx.Base.html#1623" class="Function">∃outputs</a> <a id="1632" class="Symbol">:</a> <a id="1634" class="Symbol">(</a><a id="1635" href="Bitcoin.Tx.Base.html#1635" class="Bound">tx</a> <a id="1638" class="Symbol">:</a> <a id="1640" href="Bitcoin.Tx.Base.html#1467" class="Function">∃Tx</a><a id="1643" class="Symbol">)</a> <a id="1645" class="Symbol">→</a> <a id="1647" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="1651" href="Bitcoin.Tx.Base.html#857" class="Function">∃TxOutput</a> <a id="1661" class="Symbol">(</a><a id="1662" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="1668" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="1670" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="1676" href="Bitcoin.Tx.Base.html#1635" class="Bound">tx</a><a id="1678" class="Symbol">)</a>
<a id="1680" href="Bitcoin.Tx.Base.html#1623" class="Function">∃outputs</a> <a id="1689" class="Symbol">(_</a> <a id="1692" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1694" class="Symbol">_</a> <a id="1696" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1698" href="Bitcoin.Tx.Base.html#1698" class="Bound">tx</a><a id="1700" class="Symbol">)</a> <a id="1702" class="Symbol">=</a> <a id="1704" href="Bitcoin.Tx.Base.html#1698" class="Bound">tx</a> <a id="1707" class="Symbol">.</a><a id="1708" href="Bitcoin.Tx.Base.html#1302" class="Field">outputs</a>

<a id="Tx⁺"></a><a id="1717" href="Bitcoin.Tx.Base.html#1717" class="Function">Tx⁺</a> <a id="⁺Tx"></a><a id="1721" href="Bitcoin.Tx.Base.html#1721" class="Function">⁺Tx</a> <a id="⁺Tx⁺"></a><a id="1725" href="Bitcoin.Tx.Base.html#1725" class="Function">⁺Tx⁺</a> <a id="1730" class="Symbol">:</a> <a id="1732" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1734" class="Symbol">→</a> <a id="1736" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1738" class="Symbol">→</a> <a id="1740" href="Agda.Primitive.html#320" class="Primitive">Type</a>
<a id="1745" href="Bitcoin.Tx.Base.html#1717" class="Function">Tx⁺</a> <a id="1749" href="Bitcoin.Tx.Base.html#1749" class="Bound">i</a> <a id="1751" href="Bitcoin.Tx.Base.html#1751" class="Bound">o</a> <a id="1753" class="Symbol">=</a> <a id="1755" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="1758" href="Bitcoin.Tx.Base.html#1749" class="Bound">i</a> <a id="1760" class="Symbol">(</a><a id="1761" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="1765" href="Bitcoin.Tx.Base.html#1751" class="Bound">o</a><a id="1766" class="Symbol">)</a>
<a id="1768" href="Bitcoin.Tx.Base.html#1721" class="Function">⁺Tx</a> <a id="1772" href="Bitcoin.Tx.Base.html#1772" class="Bound">i</a> <a id="1774" href="Bitcoin.Tx.Base.html#1774" class="Bound">o</a> <a id="1776" class="Symbol">=</a> <a id="1778" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="1781" class="Symbol">(</a><a id="1782" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="1786" href="Bitcoin.Tx.Base.html#1772" class="Bound">i</a><a id="1787" class="Symbol">)</a> <a id="1789" href="Bitcoin.Tx.Base.html#1774" class="Bound">o</a>
<a id="1791" href="Bitcoin.Tx.Base.html#1725" class="Function">⁺Tx⁺</a> <a id="1796" href="Bitcoin.Tx.Base.html#1796" class="Bound">i</a> <a id="1798" href="Bitcoin.Tx.Base.html#1798" class="Bound">o</a> <a id="1800" class="Symbol">=</a> <a id="1802" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="1805" class="Symbol">(</a><a id="1806" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="1810" href="Bitcoin.Tx.Base.html#1796" class="Bound">i</a><a id="1811" class="Symbol">)</a> <a id="1813" class="Symbol">(</a><a id="1814" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="1818" href="Bitcoin.Tx.Base.html#1798" class="Bound">o</a><a id="1819" class="Symbol">)</a>

<a id="∃Tx⁺"></a><a id="1822" href="Bitcoin.Tx.Base.html#1822" class="Function">∃Tx⁺</a> <a id="1827" class="Symbol">=</a> <a id="1829" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1832" href="Bitcoin.Tx.Base.html#1832" class="Bound">i</a> <a id="1834" href="Data.Product.html#1815" class="Function">]</a> <a id="1836" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1839" href="Bitcoin.Tx.Base.html#1839" class="Bound">o</a> <a id="1841" href="Data.Product.html#1815" class="Function">]</a> <a id="1843" href="Bitcoin.Tx.Base.html#1717" class="Function">Tx⁺</a> <a id="1847" href="Bitcoin.Tx.Base.html#1832" class="Bound">i</a> <a id="1849" href="Bitcoin.Tx.Base.html#1839" class="Bound">o</a>
<a id="∃⁺Tx"></a><a id="1851" href="Bitcoin.Tx.Base.html#1851" class="Function">∃⁺Tx</a> <a id="1856" class="Symbol">=</a> <a id="1858" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1861" href="Bitcoin.Tx.Base.html#1861" class="Bound">i</a> <a id="1863" href="Data.Product.html#1815" class="Function">]</a> <a id="1865" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1868" href="Bitcoin.Tx.Base.html#1868" class="Bound">o</a> <a id="1870" href="Data.Product.html#1815" class="Function">]</a> <a id="1872" href="Bitcoin.Tx.Base.html#1721" class="Function">⁺Tx</a> <a id="1876" href="Bitcoin.Tx.Base.html#1861" class="Bound">i</a> <a id="1878" href="Bitcoin.Tx.Base.html#1868" class="Bound">o</a>
<a id="∃⁺Tx⁺"></a><a id="1880" href="Bitcoin.Tx.Base.html#1880" class="Function">∃⁺Tx⁺</a> <a id="1886" class="Symbol">=</a> <a id="1888" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1891" href="Bitcoin.Tx.Base.html#1891" class="Bound">i</a> <a id="1893" href="Data.Product.html#1815" class="Function">]</a> <a id="1895" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1898" href="Bitcoin.Tx.Base.html#1898" class="Bound">o</a> <a id="1900" href="Data.Product.html#1815" class="Function">]</a> <a id="1902" href="Bitcoin.Tx.Base.html#1725" class="Function">⁺Tx⁺</a> <a id="1907" href="Bitcoin.Tx.Base.html#1891" class="Bound">i</a> <a id="1909" href="Bitcoin.Tx.Base.html#1898" class="Bound">o</a>

<a id="1912" class="Comment">-- alternative representation of a transaction input, which is unhashed and well-bounded</a>
<a id="2001" class="Keyword">record</a> <a id="TxInput′"></a><a id="2008" href="Bitcoin.Tx.Base.html#2008" class="Record">TxInput′</a> <a id="2017" class="Symbol">:</a> <a id="2019" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="2024" class="Keyword">where</a>
  <a id="2032" class="Keyword">constructor</a> <a id="_at_"></a><a id="2044" href="Bitcoin.Tx.Base.html#2044" class="InductiveConstructor Operator">_at_</a>
  <a id="2051" class="Keyword">field</a> <a id="TxInput′.tx′"></a><a id="2057" href="Bitcoin.Tx.Base.html#2057" class="Field">tx′</a>    <a id="2064" class="Symbol">:</a> <a id="2066" href="Bitcoin.Tx.Base.html#1467" class="Function">∃Tx</a>
        <a id="TxInput′.index′"></a><a id="2078" href="Bitcoin.Tx.Base.html#2078" class="Field">index′</a> <a id="2085" class="Symbol">:</a> <a id="2087" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="2091" class="Symbol">(</a><a id="2092" href="Bitcoin.Tx.Base.html#1498" class="Function">∃o</a> <a id="2095" href="Bitcoin.Tx.Base.html#2057" class="Field">tx′</a><a id="2098" class="Symbol">)</a>
<a id="2100" class="Keyword">open</a> <a id="2105" href="Bitcoin.Tx.Base.html#2008" class="Module">TxInput′</a> <a id="2114" class="Keyword">public</a>
<a id="2121" class="Keyword">unquoteDecl</a> <a id="DecEqₜₓᵢ"></a><a id="2133" href="Bitcoin.Tx.Base.html#2133" class="Function">DecEqₜₓᵢ</a> <a id="2142" class="Symbol">=</a> <a id="2144" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="2151" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="2157" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="2159" class="Keyword">quote</a> <a id="2165" href="Bitcoin.Tx.Base.html#2008" class="Record">TxInput′</a> <a id="2174" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2176" href="Bitcoin.Tx.Base.html#2133" class="Function">DecEqₜₓᵢ</a> <a id="2185" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="2188" class="Keyword">variable</a>
  <a id="2199" href="Bitcoin.Tx.Base.html#2199" class="Generalizable">i</a> <a id="2201" href="Bitcoin.Tx.Base.html#2201" class="Generalizable">i′</a> <a id="2204" href="Bitcoin.Tx.Base.html#2204" class="Generalizable">o</a> <a id="2206" href="Bitcoin.Tx.Base.html#2206" class="Generalizable">o′</a> <a id="2209" class="Symbol">:</a> <a id="2211" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="2215" class="Comment">-- T T′ : ∃Tx</a>

<a id="_‼ⁱ_"></a><a id="2230" href="Bitcoin.Tx.Base.html#2230" class="Function Operator">_‼ⁱ_</a> <a id="2235" class="Symbol">:</a> <a id="2237" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="2240" href="Bitcoin.Tx.Base.html#2199" class="Generalizable">i</a> <a id="2242" href="Bitcoin.Tx.Base.html#2204" class="Generalizable">o</a> <a id="2244" class="Symbol">→</a> <a id="2246" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="2250" href="Bitcoin.Tx.Base.html#2199" class="Generalizable">i</a> <a id="2252" class="Symbol">→</a> <a id="2254" href="Bitcoin.Tx.Base.html#359" class="Record">TxInput</a>
<a id="2262" href="Bitcoin.Tx.Base.html#2262" class="Bound">tx</a> <a id="2265" href="Bitcoin.Tx.Base.html#2230" class="Function Operator">‼ⁱ</a> <a id="2268" href="Bitcoin.Tx.Base.html#2268" class="Bound">i</a> <a id="2270" class="Symbol">=</a> <a id="2272" href="Data.Vec.Base.html#1614" class="Function">V.lookup</a> <a id="2281" class="Symbol">(</a><a id="2282" href="Bitcoin.Tx.Base.html#2262" class="Bound">tx</a> <a id="2285" class="Symbol">.</a><a id="2286" href="Bitcoin.Tx.Base.html#1152" class="Field">inputs</a><a id="2292" class="Symbol">)</a> <a id="2294" href="Bitcoin.Tx.Base.html#2268" class="Bound">i</a>

<a id="_‼ʷ_"></a><a id="2297" href="Bitcoin.Tx.Base.html#2297" class="Function Operator">_‼ʷ_</a> <a id="2302" class="Symbol">:</a> <a id="2304" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="2307" href="Bitcoin.Tx.Base.html#2199" class="Generalizable">i</a> <a id="2309" href="Bitcoin.Tx.Base.html#2204" class="Generalizable">o</a> <a id="2311" class="Symbol">→</a> <a id="2313" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="2317" href="Bitcoin.Tx.Base.html#2199" class="Generalizable">i</a> <a id="2319" class="Symbol">→</a> <a id="2321" href="Bitcoin.Tx.Base.html#1078" class="Function">∃Witness</a>
<a id="2330" href="Bitcoin.Tx.Base.html#2330" class="Bound">tx</a> <a id="2333" href="Bitcoin.Tx.Base.html#2297" class="Function Operator">‼ʷ</a> <a id="2336" href="Bitcoin.Tx.Base.html#2336" class="Bound">i</a> <a id="2338" class="Symbol">=</a> <a id="2340" href="Data.Vec.Base.html#1614" class="Function">V.lookup</a> <a id="2349" class="Symbol">(</a><a id="2350" href="Bitcoin.Tx.Base.html#2330" class="Bound">tx</a> <a id="2353" class="Symbol">.</a><a id="2354" href="Bitcoin.Tx.Base.html#1193" class="Field">wit</a><a id="2357" class="Symbol">)</a> <a id="2359" href="Bitcoin.Tx.Base.html#2336" class="Bound">i</a>

<a id="_‼ʳ_"></a><a id="2362" href="Bitcoin.Tx.Base.html#2362" class="Function Operator">_‼ʳ_</a> <a id="2367" class="Symbol">:</a> <a id="2369" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="2372" href="Bitcoin.Tx.Base.html#2199" class="Generalizable">i</a> <a id="2374" href="Bitcoin.Tx.Base.html#2204" class="Generalizable">o</a> <a id="2376" class="Symbol">→</a> <a id="2378" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="2382" href="Bitcoin.Tx.Base.html#2199" class="Generalizable">i</a> <a id="2384" class="Symbol">→</a> <a id="2386" href="Bitcoin.BasicTypes.html#233" class="Function">Time</a>
<a id="2391" href="Bitcoin.Tx.Base.html#2391" class="Bound">tx</a> <a id="2394" href="Bitcoin.Tx.Base.html#2362" class="Function Operator">‼ʳ</a> <a id="2397" href="Bitcoin.Tx.Base.html#2397" class="Bound">i</a> <a id="2399" class="Symbol">=</a> <a id="2401" href="Data.Vec.Base.html#1614" class="Function">V.lookup</a> <a id="2410" class="Symbol">(</a><a id="2411" href="Bitcoin.Tx.Base.html#2391" class="Bound">tx</a> <a id="2414" class="Symbol">.</a><a id="2415" href="Bitcoin.Tx.Base.html#1248" class="Field">relLock</a><a id="2422" class="Symbol">)</a> <a id="2424" href="Bitcoin.Tx.Base.html#2397" class="Bound">i</a>

<a id="_‼ᵒ_"></a><a id="2427" href="Bitcoin.Tx.Base.html#2427" class="Function Operator">_‼ᵒ_</a> <a id="2432" class="Symbol">:</a> <a id="2434" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="2437" href="Bitcoin.Tx.Base.html#2199" class="Generalizable">i</a> <a id="2439" href="Bitcoin.Tx.Base.html#2204" class="Generalizable">o</a> <a id="2441" class="Symbol">→</a> <a id="2443" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="2447" href="Bitcoin.Tx.Base.html#2204" class="Generalizable">o</a> <a id="2449" class="Symbol">→</a> <a id="2451" href="Bitcoin.Tx.Base.html#857" class="Function">∃TxOutput</a>
<a id="2461" href="Bitcoin.Tx.Base.html#2461" class="Bound">tx</a> <a id="2464" href="Bitcoin.Tx.Base.html#2427" class="Function Operator">‼ᵒ</a> <a id="2467" href="Bitcoin.Tx.Base.html#2467" class="Bound">i</a> <a id="2469" class="Symbol">=</a> <a id="2471" href="Data.Vec.Base.html#1614" class="Function">V.lookup</a> <a id="2480" class="Symbol">(</a><a id="2481" href="Bitcoin.Tx.Base.html#2461" class="Bound">tx</a> <a id="2484" class="Symbol">.</a><a id="2485" href="Bitcoin.Tx.Base.html#1302" class="Field">outputs</a><a id="2492" class="Symbol">)</a> <a id="2494" href="Bitcoin.Tx.Base.html#2467" class="Bound">i</a>

<a id="2497" class="Comment">-- Coinbase transactions start at time t=0.</a>
<a id="2541" class="Comment">-- Coinbase : Tx 0 o → Type</a>
<a id="2569" class="Comment">-- Coinbase tx = absLock tx ≡ 0</a>

<a id="2602" class="Comment">-- Timed transactions.</a>
<a id="2625" class="Keyword">record</a> <a id="TimedTx"></a><a id="2632" href="Bitcoin.Tx.Base.html#2632" class="Record">TimedTx</a> <a id="2640" class="Symbol">:</a> <a id="2642" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="2647" class="Keyword">where</a>
  <a id="2655" class="Keyword">constructor</a> <a id="_at_"></a><a id="2667" href="Bitcoin.Tx.Base.html#2667" class="InductiveConstructor Operator">_at_</a>
  <a id="2674" class="Keyword">field</a> <a id="TimedTx.transaction"></a><a id="2680" href="Bitcoin.Tx.Base.html#2680" class="Field">transaction</a> <a id="2692" class="Symbol">:</a> <a id="2694" href="Bitcoin.Tx.Base.html#1467" class="Function">∃Tx</a>
        <a id="TimedTx.time"></a><a id="2706" href="Bitcoin.Tx.Base.html#2706" class="Field">time</a>        <a id="2718" class="Symbol">:</a> <a id="2720" href="Bitcoin.BasicTypes.html#233" class="Function">Time</a>
<a id="2725" class="Keyword">open</a> <a id="2730" href="Bitcoin.Tx.Base.html#2632" class="Module">TimedTx</a> <a id="2738" class="Keyword">public</a>

<a id="2746" class="Keyword">unquoteDecl</a> <a id="DecEqₜₜₓ"></a><a id="2758" href="Bitcoin.Tx.Base.html#2758" class="Function">DecEqₜₜₓ</a> <a id="2767" class="Symbol">=</a> <a id="2769" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="2776" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="2782" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="2784" class="Keyword">quote</a> <a id="2790" href="Bitcoin.Tx.Base.html#2632" class="Record">TimedTx</a> <a id="2798" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2800" href="Bitcoin.Tx.Base.html#2758" class="Function">DecEqₜₜₓ</a> <a id="2809" href="Data.List.Base.html#5034" class="Function Operator">]</a>
</pre></body></html>