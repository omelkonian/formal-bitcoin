<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Bitcoin.Tx.Base</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/formal-bitcoin/tree/master/Bitcoin/Tx/Base.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Transactions.</a>
<a id="91" class="Comment">------------------------------------------------------------------------</a>
<a id="164" class="Keyword">module</a> <a id="171" href="Bitcoin.Tx.Base.html" class="Module">Bitcoin.Tx.Base</a> <a id="187" class="Keyword">where</a>

<a id="194" class="Keyword">open</a> <a id="199" class="Keyword">import</a> <a id="206" href="Prelude.Init.html" class="Module">Prelude.Init</a>
<a id="219" class="Keyword">open</a> <a id="224" class="Keyword">import</a> <a id="231" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="245" class="Keyword">open</a> <a id="250" class="Keyword">import</a> <a id="257" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>

<a id="272" class="Keyword">open</a> <a id="277" class="Keyword">import</a> <a id="284" href="Bitcoin.BasicTypes.html" class="Module">Bitcoin.BasicTypes</a>
<a id="303" class="Keyword">open</a> <a id="308" class="Keyword">import</a> <a id="315" href="Bitcoin.Script.Base.html" class="Module">Bitcoin.Script.Base</a>

<a id="336" class="Keyword">record</a> <a id="TxInput"></a><a id="343" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a> <a id="351" class="Symbol">:</a> <a id="353" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="357" class="Keyword">where</a>
  <a id="365" class="Keyword">constructor</a> <a id="_at_"></a><a id="377" href="Bitcoin.Tx.Base.html#377" class="InductiveConstructor Operator">_at_</a>
  <a id="384" class="Keyword">field</a>
    <a id="TxInput.txId"></a><a id="394" href="Bitcoin.Tx.Base.html#394" class="Field">txId</a>  <a id="400" class="Symbol">:</a> <a id="402" href="Bitcoin.BasicTypes.html#244" class="Function">HashId</a>  <a id="410" class="Comment">-- referenced previous transaction</a>
    <a id="TxInput.index"></a><a id="449" href="Bitcoin.Tx.Base.html#449" class="Field">index</a> <a id="455" class="Symbol">:</a> <a id="457" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>       <a id="465" class="Comment">-- index in the referenced transaction&#39;s outputs</a>
<a id="514" class="Keyword">open</a> <a id="519" href="Bitcoin.Tx.Base.html#343" class="Module">TxInput</a> <a id="527" class="Keyword">public</a>
<a id="534" class="Keyword">unquoteDecl</a> <a id="DecEqᵢ"></a><a id="546" href="Bitcoin.Tx.Base.html#546" class="Function">DecEqᵢ</a> <a id="553" class="Symbol">=</a> <a id="555" href="Prelude.Generics.html#9852" class="Function">DERIVE</a> <a id="562" href="Prelude.DecEq.Core.html#114" class="Record">DecEq</a> <a id="568" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="570" class="Keyword">quote</a> <a id="576" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a> <a id="584" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="586" href="Bitcoin.Tx.Base.html#546" class="Function">DecEqᵢ</a> <a id="593" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="596" class="Keyword">record</a> <a id="TxOutput"></a><a id="603" href="Bitcoin.Tx.Base.html#603" class="Record">TxOutput</a> <a id="612" class="Symbol">(</a><a id="613" href="Bitcoin.Tx.Base.html#613" class="Bound">ctx</a> <a id="617" class="Symbol">:</a> <a id="619" href="Bitcoin.Script.Base.html#347" class="Datatype">ScriptContext</a><a id="632" class="Symbol">)</a> <a id="634" class="Symbol">:</a> <a id="636" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="640" class="Keyword">where</a>
  <a id="648" class="Keyword">field</a>
    <a id="TxOutput.value"></a><a id="658" href="Bitcoin.Tx.Base.html#658" class="Field">value</a>     <a id="668" class="Symbol">:</a> <a id="670" href="Bitcoin.BasicTypes.html#222" class="Function">Value</a>
    <a id="TxOutput.validator"></a><a id="680" href="Bitcoin.Tx.Base.html#680" class="Field">validator</a> <a id="690" class="Symbol">:</a> <a id="692" href="Bitcoin.Script.Base.html#2124" class="Datatype">BitcoinScript</a> <a id="706" href="Bitcoin.Tx.Base.html#613" class="Bound">ctx</a>
<a id="710" class="Keyword">open</a> <a id="715" href="Bitcoin.Tx.Base.html#603" class="Module">TxOutput</a> <a id="724" class="Keyword">public</a>
<a id="731" class="Keyword">unquoteDecl</a> <a id="DecEqₒ"></a><a id="743" href="Bitcoin.Tx.Base.html#743" class="Function">DecEqₒ</a> <a id="750" class="Symbol">=</a> <a id="752" href="Prelude.Generics.html#9852" class="Function">DERIVE</a> <a id="759" href="Prelude.DecEq.Core.html#114" class="Record">DecEq</a> <a id="765" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="767" class="Keyword">quote</a> <a id="773" href="Bitcoin.Tx.Base.html#603" class="Record">TxOutput</a> <a id="782" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="784" href="Bitcoin.Tx.Base.html#743" class="Function">DecEqₒ</a> <a id="791" href="Data.List.Base.html#5025" class="Function Operator">]</a>
<a id="∃TxOutput"></a><a id="793" href="Bitcoin.Tx.Base.html#793" class="Function">∃TxOutput</a> <a id="803" class="Symbol">=</a> <a id="805" href="Data.Product.html#1806" class="Function">∃[</a> <a id="808" href="Bitcoin.Tx.Base.html#808" class="Bound">ctx</a> <a id="812" href="Data.Product.html#1806" class="Function">]</a> <a id="814" href="Bitcoin.Tx.Base.html#603" class="Record">TxOutput</a> <a id="823" href="Bitcoin.Tx.Base.html#808" class="Bound">ctx</a>

<a id="Witness"></a><a id="828" href="Bitcoin.Tx.Base.html#828" class="Function">Witness</a> <a id="836" class="Symbol">:</a> <a id="838" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="840" class="Symbol">→</a> <a id="842" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="846" href="Bitcoin.Tx.Base.html#828" class="Function">Witness</a> <a id="854" href="Bitcoin.Tx.Base.html#854" class="Bound">n</a> <a id="856" class="Symbol">=</a> <a id="858" href="Data.Vec.Base.html#998" class="Datatype">Vec</a> <a id="862" href="Bitcoin.BasicTypes.html#244" class="Function">HashId</a> <a id="869" href="Bitcoin.Tx.Base.html#854" class="Bound">n</a>

<a id="∃Witness"></a><a id="872" href="Bitcoin.Tx.Base.html#872" class="Function">∃Witness</a> <a id="881" class="Symbol">=</a> <a id="883" href="Data.Product.html#1806" class="Function">∃[</a> <a id="886" href="Bitcoin.Tx.Base.html#886" class="Bound">n</a> <a id="888" href="Data.Product.html#1806" class="Function">]</a> <a id="890" href="Bitcoin.Tx.Base.html#828" class="Function">Witness</a> <a id="898" href="Bitcoin.Tx.Base.html#886" class="Bound">n</a>

<a id="901" class="Keyword">record</a> <a id="Tx"></a><a id="908" href="Bitcoin.Tx.Base.html#908" class="Record">Tx</a> <a id="911" class="Symbol">(</a><a id="912" href="Bitcoin.Tx.Base.html#912" class="Bound">i</a> <a id="914" href="Bitcoin.Tx.Base.html#914" class="Bound">o</a> <a id="916" class="Symbol">:</a> <a id="918" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="919" class="Symbol">)</a> <a id="921" class="Symbol">:</a> <a id="923" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="927" class="Keyword">where</a>
  <a id="935" class="Keyword">field</a>
    <a id="Tx.inputs"></a><a id="945" href="Bitcoin.Tx.Base.html#945" class="Field">inputs</a>  <a id="953" class="Symbol">:</a> <a id="955" href="Data.Vec.Base.html#998" class="Datatype">Vec</a> <a id="959" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a>  <a id="968" href="Bitcoin.Tx.Base.html#912" class="Bound">i</a>   <a id="972" class="Comment">-- inputs</a>
    <a id="Tx.wit"></a><a id="986" href="Bitcoin.Tx.Base.html#986" class="Field">wit</a>     <a id="994" class="Symbol">:</a> <a id="996" href="Data.Vec.Base.html#998" class="Datatype">Vec</a> <a id="1000" href="Bitcoin.Tx.Base.html#872" class="Function">∃Witness</a> <a id="1009" href="Bitcoin.Tx.Base.html#912" class="Bound">i</a>   <a id="1013" class="Comment">-- segragated witnesses</a>
    <a id="Tx.relLock"></a><a id="1041" href="Bitcoin.Tx.Base.html#1041" class="Field">relLock</a> <a id="1049" class="Symbol">:</a> <a id="1051" href="Data.Vec.Base.html#998" class="Datatype">Vec</a> <a id="1055" href="Bitcoin.BasicTypes.html#233" class="Function">Time</a>     <a id="1064" href="Bitcoin.Tx.Base.html#912" class="Bound">i</a>   <a id="1068" class="Comment">-- relative timelocks</a>

    <a id="Tx.outputs"></a><a id="1095" href="Bitcoin.Tx.Base.html#1095" class="Field">outputs</a> <a id="1103" class="Symbol">:</a> <a id="1105" href="Data.Vec.Base.html#998" class="Datatype">Vec</a> <a id="1109" href="Bitcoin.Tx.Base.html#793" class="Function">∃TxOutput</a> <a id="1119" href="Bitcoin.Tx.Base.html#914" class="Bound">o</a>  <a id="1122" class="Comment">-- outputs</a>
    <a id="Tx.absLock"></a><a id="1137" href="Bitcoin.Tx.Base.html#1137" class="Field">absLock</a> <a id="1145" class="Symbol">:</a> <a id="1147" href="Bitcoin.BasicTypes.html#233" class="Function">Time</a>             <a id="1164" class="Comment">-- absolute timelock</a>
<a id="1185" class="Keyword">open</a> <a id="1190" href="Bitcoin.Tx.Base.html#908" class="Module">Tx</a> <a id="1193" class="Keyword">public</a>

<a id="1201" class="Keyword">unquoteDecl</a> <a id="DecEqₜₓ"></a><a id="1213" href="Bitcoin.Tx.Base.html#1213" class="Function">DecEqₜₓ</a> <a id="1221" class="Symbol">=</a> <a id="1223" href="Prelude.Generics.html#9852" class="Function">DERIVE</a> <a id="1230" href="Prelude.DecEq.Core.html#114" class="Record">DecEq</a> <a id="1236" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="1238" class="Keyword">quote</a> <a id="1244" href="Bitcoin.Tx.Base.html#908" class="Record">Tx</a> <a id="1247" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1249" href="Bitcoin.Tx.Base.html#1213" class="Function">DecEqₜₓ</a> <a id="1257" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="∃Tx"></a><a id="1260" href="Bitcoin.Tx.Base.html#1260" class="Function">∃Tx</a> <a id="1264" class="Symbol">=</a> <a id="1266" href="Data.Product.html#1806" class="Function">∃[</a> <a id="1269" href="Bitcoin.Tx.Base.html#1269" class="Bound">i</a> <a id="1271" href="Data.Product.html#1806" class="Function">]</a> <a id="1273" href="Data.Product.html#1806" class="Function">∃[</a> <a id="1276" href="Bitcoin.Tx.Base.html#1276" class="Bound">o</a> <a id="1278" href="Data.Product.html#1806" class="Function">]</a> <a id="1280" href="Bitcoin.Tx.Base.html#908" class="Record">Tx</a> <a id="1283" href="Bitcoin.Tx.Base.html#1269" class="Bound">i</a> <a id="1285" href="Bitcoin.Tx.Base.html#1276" class="Bound">o</a>

<a id="∃i"></a><a id="1288" href="Bitcoin.Tx.Base.html#1288" class="Function">∃i</a> <a id="∃o"></a><a id="1291" href="Bitcoin.Tx.Base.html#1291" class="Function">∃o</a> <a id="1294" class="Symbol">:</a> <a id="1296" href="Bitcoin.Tx.Base.html#1260" class="Function">∃Tx</a> <a id="1300" class="Symbol">→</a> <a id="1302" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="1304" href="Bitcoin.Tx.Base.html#1288" class="Function">∃i</a> <a id="1307" class="Symbol">=</a> <a id="1309" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a>
<a id="1315" href="Bitcoin.Tx.Base.html#1291" class="Function">∃o</a> <a id="1318" class="Symbol">=</a> <a id="1320" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="1326" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="1328" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a>

<a id="∃inputs"></a><a id="1335" href="Bitcoin.Tx.Base.html#1335" class="Function">∃inputs</a> <a id="1343" class="Symbol">:</a> <a id="1345" class="Symbol">(</a><a id="1346" href="Bitcoin.Tx.Base.html#1346" class="Bound">tx</a> <a id="1349" class="Symbol">:</a> <a id="1351" href="Bitcoin.Tx.Base.html#1260" class="Function">∃Tx</a><a id="1354" class="Symbol">)</a> <a id="1356" class="Symbol">→</a> <a id="1358" href="Data.Vec.Base.html#998" class="Datatype">Vec</a> <a id="1362" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a> <a id="1370" class="Symbol">(</a><a id="1371" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="1377" href="Bitcoin.Tx.Base.html#1346" class="Bound">tx</a><a id="1379" class="Symbol">)</a>
<a id="1381" href="Bitcoin.Tx.Base.html#1335" class="Function">∃inputs</a> <a id="1389" class="Symbol">(_</a> <a id="1392" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1394" class="Symbol">_</a> <a id="1396" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1398" href="Bitcoin.Tx.Base.html#1398" class="Bound">tx</a><a id="1400" class="Symbol">)</a> <a id="1402" class="Symbol">=</a> <a id="1404" href="Bitcoin.Tx.Base.html#945" class="Field">inputs</a> <a id="1411" href="Bitcoin.Tx.Base.html#1398" class="Bound">tx</a>

<a id="∃outputs"></a><a id="1415" href="Bitcoin.Tx.Base.html#1415" class="Function">∃outputs</a> <a id="1424" class="Symbol">:</a> <a id="1426" class="Symbol">(</a><a id="1427" href="Bitcoin.Tx.Base.html#1427" class="Bound">tx</a> <a id="1430" class="Symbol">:</a> <a id="1432" href="Bitcoin.Tx.Base.html#1260" class="Function">∃Tx</a><a id="1435" class="Symbol">)</a> <a id="1437" class="Symbol">→</a> <a id="1439" href="Data.Vec.Base.html#998" class="Datatype">Vec</a> <a id="1443" href="Bitcoin.Tx.Base.html#793" class="Function">∃TxOutput</a> <a id="1453" class="Symbol">(</a><a id="1454" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="1460" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1462" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="1468" href="Bitcoin.Tx.Base.html#1427" class="Bound">tx</a><a id="1470" class="Symbol">)</a>
<a id="1472" href="Bitcoin.Tx.Base.html#1415" class="Function">∃outputs</a> <a id="1481" class="Symbol">(_</a> <a id="1484" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1486" class="Symbol">_</a> <a id="1488" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1490" href="Bitcoin.Tx.Base.html#1490" class="Bound">tx</a><a id="1492" class="Symbol">)</a> <a id="1494" class="Symbol">=</a> <a id="1496" href="Bitcoin.Tx.Base.html#1095" class="Field">outputs</a> <a id="1504" href="Bitcoin.Tx.Base.html#1490" class="Bound">tx</a>

<a id="Tx⁺"></a><a id="1508" href="Bitcoin.Tx.Base.html#1508" class="Function">Tx⁺</a> <a id="⁺Tx"></a><a id="1512" href="Bitcoin.Tx.Base.html#1512" class="Function">⁺Tx</a> <a id="⁺Tx⁺"></a><a id="1516" href="Bitcoin.Tx.Base.html#1516" class="Function">⁺Tx⁺</a> <a id="1521" class="Symbol">:</a> <a id="1523" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="1525" class="Symbol">→</a> <a id="1527" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="1529" class="Symbol">→</a> <a id="1531" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="1535" href="Bitcoin.Tx.Base.html#1508" class="Function">Tx⁺</a> <a id="1539" href="Bitcoin.Tx.Base.html#1539" class="Bound">i</a> <a id="1541" href="Bitcoin.Tx.Base.html#1541" class="Bound">o</a> <a id="1543" class="Symbol">=</a> <a id="1545" href="Bitcoin.Tx.Base.html#908" class="Record">Tx</a> <a id="1548" href="Bitcoin.Tx.Base.html#1539" class="Bound">i</a> <a id="1550" class="Symbol">(</a><a id="1551" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1555" href="Bitcoin.Tx.Base.html#1541" class="Bound">o</a><a id="1556" class="Symbol">)</a>
<a id="1558" href="Bitcoin.Tx.Base.html#1512" class="Function">⁺Tx</a> <a id="1562" href="Bitcoin.Tx.Base.html#1562" class="Bound">i</a> <a id="1564" href="Bitcoin.Tx.Base.html#1564" class="Bound">o</a> <a id="1566" class="Symbol">=</a> <a id="1568" href="Bitcoin.Tx.Base.html#908" class="Record">Tx</a> <a id="1571" class="Symbol">(</a><a id="1572" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1576" href="Bitcoin.Tx.Base.html#1562" class="Bound">i</a><a id="1577" class="Symbol">)</a> <a id="1579" href="Bitcoin.Tx.Base.html#1564" class="Bound">o</a>
<a id="1581" href="Bitcoin.Tx.Base.html#1516" class="Function">⁺Tx⁺</a> <a id="1586" href="Bitcoin.Tx.Base.html#1586" class="Bound">i</a> <a id="1588" href="Bitcoin.Tx.Base.html#1588" class="Bound">o</a> <a id="1590" class="Symbol">=</a> <a id="1592" href="Bitcoin.Tx.Base.html#908" class="Record">Tx</a> <a id="1595" class="Symbol">(</a><a id="1596" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1600" href="Bitcoin.Tx.Base.html#1586" class="Bound">i</a><a id="1601" class="Symbol">)</a> <a id="1603" class="Symbol">(</a><a id="1604" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1608" href="Bitcoin.Tx.Base.html#1588" class="Bound">o</a><a id="1609" class="Symbol">)</a>

<a id="∃Tx⁺"></a><a id="1612" href="Bitcoin.Tx.Base.html#1612" class="Function">∃Tx⁺</a> <a id="1617" class="Symbol">=</a> <a id="1619" href="Data.Product.html#1806" class="Function">∃[</a> <a id="1622" href="Bitcoin.Tx.Base.html#1622" class="Bound">i</a> <a id="1624" href="Data.Product.html#1806" class="Function">]</a> <a id="1626" href="Data.Product.html#1806" class="Function">∃[</a> <a id="1629" href="Bitcoin.Tx.Base.html#1629" class="Bound">o</a> <a id="1631" href="Data.Product.html#1806" class="Function">]</a> <a id="1633" href="Bitcoin.Tx.Base.html#1508" class="Function">Tx⁺</a> <a id="1637" href="Bitcoin.Tx.Base.html#1622" class="Bound">i</a> <a id="1639" href="Bitcoin.Tx.Base.html#1629" class="Bound">o</a>
<a id="∃⁺Tx"></a><a id="1641" href="Bitcoin.Tx.Base.html#1641" class="Function">∃⁺Tx</a> <a id="1646" class="Symbol">=</a> <a id="1648" href="Data.Product.html#1806" class="Function">∃[</a> <a id="1651" href="Bitcoin.Tx.Base.html#1651" class="Bound">i</a> <a id="1653" href="Data.Product.html#1806" class="Function">]</a> <a id="1655" href="Data.Product.html#1806" class="Function">∃[</a> <a id="1658" href="Bitcoin.Tx.Base.html#1658" class="Bound">o</a> <a id="1660" href="Data.Product.html#1806" class="Function">]</a> <a id="1662" href="Bitcoin.Tx.Base.html#1512" class="Function">⁺Tx</a> <a id="1666" href="Bitcoin.Tx.Base.html#1651" class="Bound">i</a> <a id="1668" href="Bitcoin.Tx.Base.html#1658" class="Bound">o</a>
<a id="∃⁺Tx⁺"></a><a id="1670" href="Bitcoin.Tx.Base.html#1670" class="Function">∃⁺Tx⁺</a> <a id="1676" class="Symbol">=</a> <a id="1678" href="Data.Product.html#1806" class="Function">∃[</a> <a id="1681" href="Bitcoin.Tx.Base.html#1681" class="Bound">i</a> <a id="1683" href="Data.Product.html#1806" class="Function">]</a> <a id="1685" href="Data.Product.html#1806" class="Function">∃[</a> <a id="1688" href="Bitcoin.Tx.Base.html#1688" class="Bound">o</a> <a id="1690" href="Data.Product.html#1806" class="Function">]</a> <a id="1692" href="Bitcoin.Tx.Base.html#1516" class="Function">⁺Tx⁺</a> <a id="1697" href="Bitcoin.Tx.Base.html#1681" class="Bound">i</a> <a id="1699" href="Bitcoin.Tx.Base.html#1688" class="Bound">o</a>

<a id="1702" class="Comment">-- alternative representation of a transaction input, which is unhashed and well-bounded</a>
<a id="1791" class="Keyword">record</a> <a id="TxInput′"></a><a id="1798" href="Bitcoin.Tx.Base.html#1798" class="Record">TxInput′</a> <a id="1807" class="Symbol">:</a> <a id="1809" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1813" class="Keyword">where</a>
  <a id="1821" class="Keyword">constructor</a> <a id="_at_"></a><a id="1833" href="Bitcoin.Tx.Base.html#1833" class="InductiveConstructor Operator">_at_</a>
  <a id="1840" class="Keyword">field</a>
    <a id="TxInput′.tx′"></a><a id="1850" href="Bitcoin.Tx.Base.html#1850" class="Field">tx′</a> <a id="1854" class="Symbol">:</a> <a id="1856" href="Bitcoin.Tx.Base.html#1260" class="Function">∃Tx</a>
    <a id="TxInput′.index′"></a><a id="1864" href="Bitcoin.Tx.Base.html#1864" class="Field">index′</a> <a id="1871" class="Symbol">:</a> <a id="1873" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="1877" class="Symbol">(</a><a id="1878" href="Bitcoin.Tx.Base.html#1291" class="Function">∃o</a> <a id="1881" href="Bitcoin.Tx.Base.html#1850" class="Field">tx′</a><a id="1884" class="Symbol">)</a>
<a id="1886" class="Keyword">open</a> <a id="1891" href="Bitcoin.Tx.Base.html#1798" class="Module">TxInput′</a> <a id="1900" class="Keyword">public</a>
<a id="1907" class="Keyword">unquoteDecl</a> <a id="DecEqₜₓᵢ"></a><a id="1919" href="Bitcoin.Tx.Base.html#1919" class="Function">DecEqₜₓᵢ</a> <a id="1928" class="Symbol">=</a> <a id="1930" href="Prelude.Generics.html#9852" class="Function">DERIVE</a> <a id="1937" href="Prelude.DecEq.Core.html#114" class="Record">DecEq</a> <a id="1943" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="1945" class="Keyword">quote</a> <a id="1951" href="Bitcoin.Tx.Base.html#1798" class="Record">TxInput′</a> <a id="1960" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1962" href="Bitcoin.Tx.Base.html#1919" class="Function">DecEqₜₓᵢ</a> <a id="1971" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="1974" class="Keyword">variable</a>
  <a id="1985" href="Bitcoin.Tx.Base.html#1985" class="Generalizable">i</a> <a id="1987" href="Bitcoin.Tx.Base.html#1987" class="Generalizable">i′</a> <a id="1990" href="Bitcoin.Tx.Base.html#1990" class="Generalizable">o</a> <a id="1992" href="Bitcoin.Tx.Base.html#1992" class="Generalizable">o′</a> <a id="1995" class="Symbol">:</a> <a id="1997" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
  <a id="2001" class="Comment">-- T T′ : ∃Tx</a>

<a id="_‼ⁱ_"></a><a id="2016" href="Bitcoin.Tx.Base.html#2016" class="Function Operator">_‼ⁱ_</a> <a id="2021" class="Symbol">:</a> <a id="2023" href="Bitcoin.Tx.Base.html#908" class="Record">Tx</a> <a id="2026" href="Bitcoin.Tx.Base.html#1985" class="Generalizable">i</a> <a id="2028" href="Bitcoin.Tx.Base.html#1990" class="Generalizable">o</a> <a id="2030" class="Symbol">→</a> <a id="2032" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="2036" href="Bitcoin.Tx.Base.html#1985" class="Generalizable">i</a> <a id="2038" class="Symbol">→</a> <a id="2040" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a>
<a id="2048" href="Bitcoin.Tx.Base.html#2048" class="Bound">tx</a> <a id="2051" href="Bitcoin.Tx.Base.html#2016" class="Function Operator">‼ⁱ</a> <a id="2054" href="Bitcoin.Tx.Base.html#2054" class="Bound">i</a> <a id="2056" class="Symbol">=</a> <a id="2058" href="Data.Vec.Base.html#1605" class="Function">V.lookup</a> <a id="2067" class="Symbol">(</a><a id="2068" href="Bitcoin.Tx.Base.html#945" class="Field">inputs</a> <a id="2075" href="Bitcoin.Tx.Base.html#2048" class="Bound">tx</a><a id="2077" class="Symbol">)</a> <a id="2079" href="Bitcoin.Tx.Base.html#2054" class="Bound">i</a>

<a id="_‼ʷ_"></a><a id="2082" href="Bitcoin.Tx.Base.html#2082" class="Function Operator">_‼ʷ_</a> <a id="2087" class="Symbol">:</a> <a id="2089" href="Bitcoin.Tx.Base.html#908" class="Record">Tx</a> <a id="2092" href="Bitcoin.Tx.Base.html#1985" class="Generalizable">i</a> <a id="2094" href="Bitcoin.Tx.Base.html#1990" class="Generalizable">o</a> <a id="2096" class="Symbol">→</a> <a id="2098" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="2102" href="Bitcoin.Tx.Base.html#1985" class="Generalizable">i</a> <a id="2104" class="Symbol">→</a> <a id="2106" href="Bitcoin.Tx.Base.html#872" class="Function">∃Witness</a>
<a id="2115" href="Bitcoin.Tx.Base.html#2115" class="Bound">tx</a> <a id="2118" href="Bitcoin.Tx.Base.html#2082" class="Function Operator">‼ʷ</a> <a id="2121" href="Bitcoin.Tx.Base.html#2121" class="Bound">i</a> <a id="2123" class="Symbol">=</a> <a id="2125" href="Data.Vec.Base.html#1605" class="Function">V.lookup</a> <a id="2134" class="Symbol">(</a><a id="2135" href="Bitcoin.Tx.Base.html#986" class="Field">wit</a> <a id="2139" href="Bitcoin.Tx.Base.html#2115" class="Bound">tx</a><a id="2141" class="Symbol">)</a> <a id="2143" href="Bitcoin.Tx.Base.html#2121" class="Bound">i</a>

<a id="_‼ʳ_"></a><a id="2146" href="Bitcoin.Tx.Base.html#2146" class="Function Operator">_‼ʳ_</a> <a id="2151" class="Symbol">:</a> <a id="2153" href="Bitcoin.Tx.Base.html#908" class="Record">Tx</a> <a id="2156" href="Bitcoin.Tx.Base.html#1985" class="Generalizable">i</a> <a id="2158" href="Bitcoin.Tx.Base.html#1990" class="Generalizable">o</a> <a id="2160" class="Symbol">→</a> <a id="2162" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="2166" href="Bitcoin.Tx.Base.html#1985" class="Generalizable">i</a> <a id="2168" class="Symbol">→</a> <a id="2170" href="Bitcoin.BasicTypes.html#233" class="Function">Time</a>
<a id="2175" href="Bitcoin.Tx.Base.html#2175" class="Bound">tx</a> <a id="2178" href="Bitcoin.Tx.Base.html#2146" class="Function Operator">‼ʳ</a> <a id="2181" href="Bitcoin.Tx.Base.html#2181" class="Bound">i</a> <a id="2183" class="Symbol">=</a> <a id="2185" href="Data.Vec.Base.html#1605" class="Function">V.lookup</a> <a id="2194" class="Symbol">(</a><a id="2195" href="Bitcoin.Tx.Base.html#1041" class="Field">relLock</a> <a id="2203" href="Bitcoin.Tx.Base.html#2175" class="Bound">tx</a><a id="2205" class="Symbol">)</a> <a id="2207" href="Bitcoin.Tx.Base.html#2181" class="Bound">i</a>

<a id="_‼ᵒ_"></a><a id="2210" href="Bitcoin.Tx.Base.html#2210" class="Function Operator">_‼ᵒ_</a> <a id="2215" class="Symbol">:</a> <a id="2217" href="Bitcoin.Tx.Base.html#908" class="Record">Tx</a> <a id="2220" href="Bitcoin.Tx.Base.html#1985" class="Generalizable">i</a> <a id="2222" href="Bitcoin.Tx.Base.html#1990" class="Generalizable">o</a> <a id="2224" class="Symbol">→</a> <a id="2226" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="2230" href="Bitcoin.Tx.Base.html#1990" class="Generalizable">o</a> <a id="2232" class="Symbol">→</a> <a id="2234" href="Bitcoin.Tx.Base.html#793" class="Function">∃TxOutput</a>
<a id="2244" href="Bitcoin.Tx.Base.html#2244" class="Bound">tx</a> <a id="2247" href="Bitcoin.Tx.Base.html#2210" class="Function Operator">‼ᵒ</a> <a id="2250" href="Bitcoin.Tx.Base.html#2250" class="Bound">i</a> <a id="2252" class="Symbol">=</a> <a id="2254" href="Data.Vec.Base.html#1605" class="Function">V.lookup</a> <a id="2263" class="Symbol">(</a><a id="2264" href="Bitcoin.Tx.Base.html#1095" class="Field">outputs</a> <a id="2272" href="Bitcoin.Tx.Base.html#2244" class="Bound">tx</a><a id="2274" class="Symbol">)</a> <a id="2276" href="Bitcoin.Tx.Base.html#2250" class="Bound">i</a>

<a id="2279" class="Comment">-- Coinbase transactions start at time t=0.</a>
<a id="2323" class="Comment">-- Coinbase : Tx 0 o → Set</a>
<a id="2350" class="Comment">-- Coinbase tx = absLock tx ≡ 0</a>

<a id="2383" class="Comment">-- Timed transactions.</a>
<a id="2406" class="Keyword">record</a> <a id="TimedTx"></a><a id="2413" href="Bitcoin.Tx.Base.html#2413" class="Record">TimedTx</a> <a id="2421" class="Symbol">:</a> <a id="2423" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="2427" class="Keyword">where</a>
  <a id="2435" class="Keyword">constructor</a> <a id="_at_"></a><a id="2447" href="Bitcoin.Tx.Base.html#2447" class="InductiveConstructor Operator">_at_</a>
  <a id="2454" class="Keyword">field</a>
    <a id="TimedTx.transaction"></a><a id="2464" href="Bitcoin.Tx.Base.html#2464" class="Field">transaction</a> <a id="2476" class="Symbol">:</a> <a id="2478" href="Bitcoin.Tx.Base.html#1260" class="Function">∃Tx</a>
    <a id="TimedTx.time"></a><a id="2486" href="Bitcoin.Tx.Base.html#2486" class="Field">time</a>        <a id="2498" class="Symbol">:</a> <a id="2500" href="Bitcoin.BasicTypes.html#233" class="Function">Time</a>
<a id="2505" class="Keyword">open</a> <a id="2510" href="Bitcoin.Tx.Base.html#2413" class="Module">TimedTx</a> <a id="2518" class="Keyword">public</a>

<a id="2526" class="Keyword">unquoteDecl</a> <a id="DecEqₜₜₓ"></a><a id="2538" href="Bitcoin.Tx.Base.html#2538" class="Function">DecEqₜₜₓ</a> <a id="2547" class="Symbol">=</a> <a id="2549" href="Prelude.Generics.html#9852" class="Function">DERIVE</a> <a id="2556" href="Prelude.DecEq.Core.html#114" class="Record">DecEq</a> <a id="2562" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="2564" class="Keyword">quote</a> <a id="2570" href="Bitcoin.Tx.Base.html#2413" class="Record">TimedTx</a> <a id="2578" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2580" href="Bitcoin.Tx.Base.html#2538" class="Function">DecEqₜₜₓ</a> <a id="2589" href="Data.List.Base.html#5025" class="Function Operator">]</a>
</pre></body></html>