<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Bitcoin.Tx.Base</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/formal-bitcoin/tree/master///Bitcoin/Tx/Base.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Transactions.</a>
<a id="91" class="Comment">------------------------------------------------------------------------</a>
<a id="164" class="Keyword">module</a> <a id="171" href="Bitcoin.Tx.Base.html" class="Module">Bitcoin.Tx.Base</a> <a id="187" class="Keyword">where</a>

<a id="194" class="Keyword">open</a> <a id="199" class="Keyword">import</a> <a id="206" href="Prelude.Init.html" class="Module">Prelude.Init</a><a id="218" class="Symbol">;</a> <a id="220" class="Keyword">open</a> <a id="225" href="Prelude.Init.html#504" class="Module">SetAsType</a>
<a id="235" class="Keyword">open</a> <a id="240" class="Keyword">import</a> <a id="247" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="261" class="Keyword">open</a> <a id="266" class="Keyword">import</a> <a id="273" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>

<a id="288" class="Keyword">open</a> <a id="293" class="Keyword">import</a> <a id="300" href="Bitcoin.BasicTypes.html" class="Module">Bitcoin.BasicTypes</a>
<a id="319" class="Keyword">open</a> <a id="324" class="Keyword">import</a> <a id="331" href="Bitcoin.Script.Base.html" class="Module">Bitcoin.Script.Base</a>

<a id="352" class="Keyword">record</a> <a id="TxInput"></a><a id="359" href="Bitcoin.Tx.Base.html#359" class="Record">TxInput</a> <a id="367" class="Symbol">:</a> <a id="369" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="374" class="Keyword">where</a>
  <a id="382" class="Keyword">constructor</a> <a id="_at_"></a><a id="394" href="Bitcoin.Tx.Base.html#394" class="InductiveConstructor Operator">_at_</a>
  <a id="401" class="Keyword">field</a> <a id="TxInput.txId"></a><a id="407" href="Bitcoin.Tx.Base.html#407" class="Field">txId</a>  <a id="413" class="Symbol">:</a> <a id="415" href="Bitcoin.BasicTypes.html#351" class="Function">HashId</a>  <a id="423" class="Comment">-- referenced previous transaction</a>
        <a id="TxInput.index"></a><a id="466" href="Bitcoin.Tx.Base.html#466" class="Field">index</a> <a id="472" class="Symbol">:</a> <a id="474" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>       <a id="482" class="Comment">-- index in the referenced transaction&#39;s outputs</a>
<a id="531" class="Keyword">open</a> <a id="536" href="Bitcoin.Tx.Base.html#359" class="Module">TxInput</a> <a id="544" class="Keyword">public</a>
<a id="551" class="Keyword">unquoteDecl</a> <a id="DecEqᵢ"></a><a id="563" href="Bitcoin.Tx.Base.html#563" class="Function">DecEqᵢ</a> <a id="570" class="Symbol">=</a> <a id="572" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="579" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="585" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="587" class="Keyword">quote</a> <a id="593" href="Bitcoin.Tx.Base.html#359" class="Record">TxInput</a> <a id="601" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="603" href="Bitcoin.Tx.Base.html#563" class="Function">DecEqᵢ</a> <a id="610" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a>

<a id="613" class="Keyword">infix</a> <a id="619" class="Number">5</a> <a id="621" href="Bitcoin.Tx.Base.html#698" class="InductiveConstructor Operator">_locked-by_</a>
<a id="633" class="Keyword">record</a> <a id="TxOutput"></a><a id="640" href="Bitcoin.Tx.Base.html#640" class="Record">TxOutput</a> <a id="649" class="Symbol">(</a><a id="650" href="Bitcoin.Tx.Base.html#650" class="Bound">ctx</a> <a id="654" class="Symbol">:</a> <a id="656" href="Bitcoin.Script.Base.html#382" class="Function">ScriptContext</a><a id="669" class="Symbol">)</a> <a id="671" class="Symbol">:</a> <a id="673" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="678" class="Keyword">where</a>
  <a id="686" class="Keyword">constructor</a> <a id="_locked-by_"></a><a id="698" href="Bitcoin.Tx.Base.html#698" class="InductiveConstructor Operator">_locked-by_</a>
  <a id="712" class="Keyword">field</a> <a id="TxOutput.value"></a><a id="718" href="Bitcoin.Tx.Base.html#718" class="Field">value</a>     <a id="728" class="Symbol">:</a> <a id="730" href="Bitcoin.BasicTypes.html#260" class="Function">Value</a>
        <a id="TxOutput.validator"></a><a id="744" href="Bitcoin.Tx.Base.html#744" class="Field">validator</a> <a id="754" class="Symbol">:</a> <a id="756" href="Bitcoin.Script.Base.html#1878" class="Datatype">BitcoinScript</a> <a id="770" href="Bitcoin.Tx.Base.html#650" class="Bound">ctx</a>
<a id="774" class="Keyword">open</a> <a id="779" href="Bitcoin.Tx.Base.html#640" class="Module">TxOutput</a> <a id="788" class="Keyword">public</a>
<a id="795" class="Keyword">unquoteDecl</a> <a id="DecEqₒ"></a><a id="807" href="Bitcoin.Tx.Base.html#807" class="Function">DecEqₒ</a> <a id="814" class="Symbol">=</a> <a id="816" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="823" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="829" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="831" class="Keyword">quote</a> <a id="837" href="Bitcoin.Tx.Base.html#640" class="Record">TxOutput</a> <a id="846" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="848" href="Bitcoin.Tx.Base.html#807" class="Function">DecEqₒ</a> <a id="855" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a>
<a id="∃TxOutput"></a><a id="857" href="Bitcoin.Tx.Base.html#857" class="Function">∃TxOutput</a> <a id="867" class="Symbol">=</a> <a id="869" href="Data.Product.html#1815" class="Function">∃[</a> <a id="872" href="Bitcoin.Tx.Base.html#872" class="Bound">ctx</a> <a id="876" href="Data.Product.html#1815" class="Function">]</a> <a id="878" href="Bitcoin.Tx.Base.html#640" class="Record">TxOutput</a> <a id="887" href="Bitcoin.Tx.Base.html#872" class="Bound">ctx</a>

<a id="Witness"></a><a id="892" href="Bitcoin.Tx.Base.html#892" class="Function">Witness</a> <a id="900" class="Symbol">:</a> <a id="902" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="904" class="Symbol">→</a> <a id="906" href="Agda.Primitive.html#320" class="Primitive">Type</a>
<a id="911" href="Bitcoin.Tx.Base.html#892" class="Function">Witness</a> <a id="919" href="Bitcoin.Tx.Base.html#919" class="Bound">n</a> <a id="921" class="Symbol">=</a> <a id="923" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="927" href="Bitcoin.BasicTypes.html#351" class="Function">HashId</a> <a id="934" href="Bitcoin.Tx.Base.html#919" class="Bound">n</a>

<a id="∃Witness"></a><a id="937" href="Bitcoin.Tx.Base.html#937" class="Function">∃Witness</a> <a id="946" class="Symbol">=</a> <a id="948" href="Data.Product.html#1815" class="Function">∃[</a> <a id="951" href="Bitcoin.Tx.Base.html#951" class="Bound">n</a> <a id="953" href="Data.Product.html#1815" class="Function">]</a> <a id="955" href="Bitcoin.Tx.Base.html#892" class="Function">Witness</a> <a id="963" href="Bitcoin.Tx.Base.html#951" class="Bound">n</a>

<a id="966" class="Keyword">record</a> <a id="Tx"></a><a id="973" href="Bitcoin.Tx.Base.html#973" class="Record">Tx</a> <a id="976" class="Symbol">(</a><a id="977" href="Bitcoin.Tx.Base.html#977" class="Bound">i</a> <a id="979" href="Bitcoin.Tx.Base.html#979" class="Bound">o</a> <a id="981" class="Symbol">:</a> <a id="983" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="984" class="Symbol">)</a> <a id="986" class="Symbol">:</a> <a id="988" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="993" class="Keyword">where</a>
  <a id="1001" class="Keyword">field</a>
    <a id="Tx.inputs"></a><a id="1011" href="Bitcoin.Tx.Base.html#1011" class="Field">inputs</a>  <a id="1019" class="Symbol">:</a> <a id="1021" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="1025" href="Bitcoin.Tx.Base.html#359" class="Record">TxInput</a>  <a id="1034" href="Bitcoin.Tx.Base.html#977" class="Bound">i</a>   <a id="1038" class="Comment">-- inputs</a>
    <a id="Tx.wit"></a><a id="1052" href="Bitcoin.Tx.Base.html#1052" class="Field">wit</a>     <a id="1060" class="Symbol">:</a> <a id="1062" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="1066" href="Bitcoin.Tx.Base.html#937" class="Function">∃Witness</a> <a id="1075" href="Bitcoin.Tx.Base.html#977" class="Bound">i</a>   <a id="1079" class="Comment">-- segragated witnesses</a>
    <a id="Tx.relLock"></a><a id="1107" href="Bitcoin.Tx.Base.html#1107" class="Field">relLock</a> <a id="1115" class="Symbol">:</a> <a id="1117" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="1121" href="Bitcoin.BasicTypes.html#293" class="Function">Time</a>     <a id="1130" href="Bitcoin.Tx.Base.html#977" class="Bound">i</a>   <a id="1134" class="Comment">-- relative timelocks</a>

    <a id="Tx.outputs"></a><a id="1161" href="Bitcoin.Tx.Base.html#1161" class="Field">outputs</a> <a id="1169" class="Symbol">:</a> <a id="1171" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="1175" href="Bitcoin.Tx.Base.html#857" class="Function">∃TxOutput</a> <a id="1185" href="Bitcoin.Tx.Base.html#979" class="Bound">o</a>  <a id="1188" class="Comment">-- outputs</a>
    <a id="Tx.absLock"></a><a id="1203" href="Bitcoin.Tx.Base.html#1203" class="Field">absLock</a> <a id="1211" class="Symbol">:</a> <a id="1213" href="Bitcoin.BasicTypes.html#293" class="Function">Time</a>             <a id="1230" class="Comment">-- absolute timelock</a>
<a id="1251" class="Keyword">open</a> <a id="1256" href="Bitcoin.Tx.Base.html#973" class="Module">Tx</a> <a id="1259" class="Keyword">public</a>

<a id="1267" class="Keyword">unquoteDecl</a> <a id="DecEqₜₓ"></a><a id="1279" href="Bitcoin.Tx.Base.html#1279" class="Function">DecEqₜₓ</a> <a id="1287" class="Symbol">=</a> <a id="1289" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="1296" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="1302" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="1304" class="Keyword">quote</a> <a id="1310" href="Bitcoin.Tx.Base.html#973" class="Record">Tx</a> <a id="1313" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1315" href="Bitcoin.Tx.Base.html#1279" class="Function">DecEqₜₓ</a> <a id="1323" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a>

<a id="∃Tx"></a><a id="1326" href="Bitcoin.Tx.Base.html#1326" class="Function">∃Tx</a> <a id="1330" class="Symbol">=</a> <a id="1332" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1335" href="Bitcoin.Tx.Base.html#1335" class="Bound">i</a> <a id="1337" href="Data.Product.html#1815" class="Function">]</a> <a id="1339" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1342" href="Bitcoin.Tx.Base.html#1342" class="Bound">o</a> <a id="1344" href="Data.Product.html#1815" class="Function">]</a> <a id="1346" href="Bitcoin.Tx.Base.html#973" class="Record">Tx</a> <a id="1349" href="Bitcoin.Tx.Base.html#1335" class="Bound">i</a> <a id="1351" href="Bitcoin.Tx.Base.html#1342" class="Bound">o</a>

<a id="∃i"></a><a id="1354" href="Bitcoin.Tx.Base.html#1354" class="Function">∃i</a> <a id="∃o"></a><a id="1357" href="Bitcoin.Tx.Base.html#1357" class="Function">∃o</a> <a id="1360" class="Symbol">:</a> <a id="1362" href="Bitcoin.Tx.Base.html#1326" class="Function">∃Tx</a> <a id="1366" class="Symbol">→</a> <a id="1368" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="1370" href="Bitcoin.Tx.Base.html#1354" class="Function">∃i</a> <a id="1373" class="Symbol">=</a> <a id="1375" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a>
<a id="1381" href="Bitcoin.Tx.Base.html#1357" class="Function">∃o</a> <a id="1384" class="Symbol">=</a> <a id="1386" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="1392" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1394" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a>

<a id="∃inputs"></a><a id="1401" href="Bitcoin.Tx.Base.html#1401" class="Function">∃inputs</a> <a id="1409" class="Symbol">:</a> <a id="1411" class="Symbol">(</a><a id="1412" href="Bitcoin.Tx.Base.html#1412" class="Bound">tx</a> <a id="1415" class="Symbol">:</a> <a id="1417" href="Bitcoin.Tx.Base.html#1326" class="Function">∃Tx</a><a id="1420" class="Symbol">)</a> <a id="1422" class="Symbol">→</a> <a id="1424" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="1428" href="Bitcoin.Tx.Base.html#359" class="Record">TxInput</a> <a id="1436" class="Symbol">(</a><a id="1437" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="1443" href="Bitcoin.Tx.Base.html#1412" class="Bound">tx</a><a id="1445" class="Symbol">)</a>
<a id="1447" href="Bitcoin.Tx.Base.html#1401" class="Function">∃inputs</a> <a id="1455" class="Symbol">(_</a> <a id="1458" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1460" class="Symbol">_</a> <a id="1462" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1464" href="Bitcoin.Tx.Base.html#1464" class="Bound">tx</a><a id="1466" class="Symbol">)</a> <a id="1468" class="Symbol">=</a> <a id="1470" href="Bitcoin.Tx.Base.html#1464" class="Bound">tx</a> <a id="1473" class="Symbol">.</a><a id="1474" href="Bitcoin.Tx.Base.html#1011" class="Field">inputs</a>

<a id="∃outputs"></a><a id="1482" href="Bitcoin.Tx.Base.html#1482" class="Function">∃outputs</a> <a id="1491" class="Symbol">:</a> <a id="1493" class="Symbol">(</a><a id="1494" href="Bitcoin.Tx.Base.html#1494" class="Bound">tx</a> <a id="1497" class="Symbol">:</a> <a id="1499" href="Bitcoin.Tx.Base.html#1326" class="Function">∃Tx</a><a id="1502" class="Symbol">)</a> <a id="1504" class="Symbol">→</a> <a id="1506" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="1510" href="Bitcoin.Tx.Base.html#857" class="Function">∃TxOutput</a> <a id="1520" class="Symbol">(</a><a id="1521" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="1527" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="1529" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="1535" href="Bitcoin.Tx.Base.html#1494" class="Bound">tx</a><a id="1537" class="Symbol">)</a>
<a id="1539" href="Bitcoin.Tx.Base.html#1482" class="Function">∃outputs</a> <a id="1548" class="Symbol">(_</a> <a id="1551" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1553" class="Symbol">_</a> <a id="1555" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1557" href="Bitcoin.Tx.Base.html#1557" class="Bound">tx</a><a id="1559" class="Symbol">)</a> <a id="1561" class="Symbol">=</a> <a id="1563" href="Bitcoin.Tx.Base.html#1557" class="Bound">tx</a> <a id="1566" class="Symbol">.</a><a id="1567" href="Bitcoin.Tx.Base.html#1161" class="Field">outputs</a>

<a id="Tx⁺"></a><a id="1576" href="Bitcoin.Tx.Base.html#1576" class="Function">Tx⁺</a> <a id="⁺Tx"></a><a id="1580" href="Bitcoin.Tx.Base.html#1580" class="Function">⁺Tx</a> <a id="⁺Tx⁺"></a><a id="1584" href="Bitcoin.Tx.Base.html#1584" class="Function">⁺Tx⁺</a> <a id="1589" class="Symbol">:</a> <a id="1591" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1593" class="Symbol">→</a> <a id="1595" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1597" class="Symbol">→</a> <a id="1599" href="Agda.Primitive.html#320" class="Primitive">Type</a>
<a id="1604" href="Bitcoin.Tx.Base.html#1576" class="Function">Tx⁺</a> <a id="1608" href="Bitcoin.Tx.Base.html#1608" class="Bound">i</a> <a id="1610" href="Bitcoin.Tx.Base.html#1610" class="Bound">o</a> <a id="1612" class="Symbol">=</a> <a id="1614" href="Bitcoin.Tx.Base.html#973" class="Record">Tx</a> <a id="1617" href="Bitcoin.Tx.Base.html#1608" class="Bound">i</a> <a id="1619" class="Symbol">(</a><a id="1620" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="1624" href="Bitcoin.Tx.Base.html#1610" class="Bound">o</a><a id="1625" class="Symbol">)</a>
<a id="1627" href="Bitcoin.Tx.Base.html#1580" class="Function">⁺Tx</a> <a id="1631" href="Bitcoin.Tx.Base.html#1631" class="Bound">i</a> <a id="1633" href="Bitcoin.Tx.Base.html#1633" class="Bound">o</a> <a id="1635" class="Symbol">=</a> <a id="1637" href="Bitcoin.Tx.Base.html#973" class="Record">Tx</a> <a id="1640" class="Symbol">(</a><a id="1641" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="1645" href="Bitcoin.Tx.Base.html#1631" class="Bound">i</a><a id="1646" class="Symbol">)</a> <a id="1648" href="Bitcoin.Tx.Base.html#1633" class="Bound">o</a>
<a id="1650" href="Bitcoin.Tx.Base.html#1584" class="Function">⁺Tx⁺</a> <a id="1655" href="Bitcoin.Tx.Base.html#1655" class="Bound">i</a> <a id="1657" href="Bitcoin.Tx.Base.html#1657" class="Bound">o</a> <a id="1659" class="Symbol">=</a> <a id="1661" href="Bitcoin.Tx.Base.html#973" class="Record">Tx</a> <a id="1664" class="Symbol">(</a><a id="1665" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="1669" href="Bitcoin.Tx.Base.html#1655" class="Bound">i</a><a id="1670" class="Symbol">)</a> <a id="1672" class="Symbol">(</a><a id="1673" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="1677" href="Bitcoin.Tx.Base.html#1657" class="Bound">o</a><a id="1678" class="Symbol">)</a>

<a id="∃Tx⁺"></a><a id="1681" href="Bitcoin.Tx.Base.html#1681" class="Function">∃Tx⁺</a> <a id="1686" class="Symbol">=</a> <a id="1688" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1691" href="Bitcoin.Tx.Base.html#1691" class="Bound">i</a> <a id="1693" href="Data.Product.html#1815" class="Function">]</a> <a id="1695" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1698" href="Bitcoin.Tx.Base.html#1698" class="Bound">o</a> <a id="1700" href="Data.Product.html#1815" class="Function">]</a> <a id="1702" href="Bitcoin.Tx.Base.html#1576" class="Function">Tx⁺</a> <a id="1706" href="Bitcoin.Tx.Base.html#1691" class="Bound">i</a> <a id="1708" href="Bitcoin.Tx.Base.html#1698" class="Bound">o</a>
<a id="∃⁺Tx"></a><a id="1710" href="Bitcoin.Tx.Base.html#1710" class="Function">∃⁺Tx</a> <a id="1715" class="Symbol">=</a> <a id="1717" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1720" href="Bitcoin.Tx.Base.html#1720" class="Bound">i</a> <a id="1722" href="Data.Product.html#1815" class="Function">]</a> <a id="1724" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1727" href="Bitcoin.Tx.Base.html#1727" class="Bound">o</a> <a id="1729" href="Data.Product.html#1815" class="Function">]</a> <a id="1731" href="Bitcoin.Tx.Base.html#1580" class="Function">⁺Tx</a> <a id="1735" href="Bitcoin.Tx.Base.html#1720" class="Bound">i</a> <a id="1737" href="Bitcoin.Tx.Base.html#1727" class="Bound">o</a>
<a id="∃⁺Tx⁺"></a><a id="1739" href="Bitcoin.Tx.Base.html#1739" class="Function">∃⁺Tx⁺</a> <a id="1745" class="Symbol">=</a> <a id="1747" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1750" href="Bitcoin.Tx.Base.html#1750" class="Bound">i</a> <a id="1752" href="Data.Product.html#1815" class="Function">]</a> <a id="1754" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1757" href="Bitcoin.Tx.Base.html#1757" class="Bound">o</a> <a id="1759" href="Data.Product.html#1815" class="Function">]</a> <a id="1761" href="Bitcoin.Tx.Base.html#1584" class="Function">⁺Tx⁺</a> <a id="1766" href="Bitcoin.Tx.Base.html#1750" class="Bound">i</a> <a id="1768" href="Bitcoin.Tx.Base.html#1757" class="Bound">o</a>

<a id="1771" class="Comment">-- alternative representation of a transaction input, which is unhashed and well-bounded</a>
<a id="1860" class="Keyword">record</a> <a id="TxInput′"></a><a id="1867" href="Bitcoin.Tx.Base.html#1867" class="Record">TxInput′</a> <a id="1876" class="Symbol">:</a> <a id="1878" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="1883" class="Keyword">where</a>
  <a id="1891" class="Keyword">constructor</a> <a id="_at_"></a><a id="1903" href="Bitcoin.Tx.Base.html#1903" class="InductiveConstructor Operator">_at_</a>
  <a id="1910" class="Keyword">field</a> <a id="TxInput′.tx′"></a><a id="1916" href="Bitcoin.Tx.Base.html#1916" class="Field">tx′</a>    <a id="1923" class="Symbol">:</a> <a id="1925" href="Bitcoin.Tx.Base.html#1326" class="Function">∃Tx</a>
        <a id="TxInput′.index′"></a><a id="1937" href="Bitcoin.Tx.Base.html#1937" class="Field">index′</a> <a id="1944" class="Symbol">:</a> <a id="1946" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="1950" class="Symbol">(</a><a id="1951" href="Bitcoin.Tx.Base.html#1357" class="Function">∃o</a> <a id="1954" href="Bitcoin.Tx.Base.html#1916" class="Field">tx′</a><a id="1957" class="Symbol">)</a>
<a id="1959" class="Keyword">open</a> <a id="1964" href="Bitcoin.Tx.Base.html#1867" class="Module">TxInput′</a> <a id="1973" class="Keyword">public</a>
<a id="1980" class="Keyword">unquoteDecl</a> <a id="DecEqₜₓᵢ"></a><a id="1992" href="Bitcoin.Tx.Base.html#1992" class="Function">DecEqₜₓᵢ</a> <a id="2001" class="Symbol">=</a> <a id="2003" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="2010" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="2016" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="2018" class="Keyword">quote</a> <a id="2024" href="Bitcoin.Tx.Base.html#1867" class="Record">TxInput′</a> <a id="2033" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2035" href="Bitcoin.Tx.Base.html#1992" class="Function">DecEqₜₓᵢ</a> <a id="2044" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a>

<a id="2047" class="Keyword">variable</a>
  <a id="2058" href="Bitcoin.Tx.Base.html#2058" class="Generalizable">i</a> <a id="2060" href="Bitcoin.Tx.Base.html#2060" class="Generalizable">i′</a> <a id="2063" href="Bitcoin.Tx.Base.html#2063" class="Generalizable">o</a> <a id="2065" href="Bitcoin.Tx.Base.html#2065" class="Generalizable">o′</a> <a id="2068" class="Symbol">:</a> <a id="2070" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="2074" class="Comment">-- T T′ : ∃Tx</a>

<a id="_‼ⁱ_"></a><a id="2089" href="Bitcoin.Tx.Base.html#2089" class="Function Operator">_‼ⁱ_</a> <a id="2094" class="Symbol">:</a> <a id="2096" href="Bitcoin.Tx.Base.html#973" class="Record">Tx</a> <a id="2099" href="Bitcoin.Tx.Base.html#2058" class="Generalizable">i</a> <a id="2101" href="Bitcoin.Tx.Base.html#2063" class="Generalizable">o</a> <a id="2103" class="Symbol">→</a> <a id="2105" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="2109" href="Bitcoin.Tx.Base.html#2058" class="Generalizable">i</a> <a id="2111" class="Symbol">→</a> <a id="2113" href="Bitcoin.Tx.Base.html#359" class="Record">TxInput</a>
<a id="2121" href="Bitcoin.Tx.Base.html#2089" class="Function Operator">_‼ⁱ_</a> <a id="2126" class="Symbol">=</a> <a id="2128" href="Data.Vec.Base.html#1614" class="Function">V.lookup</a> <a id="2137" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="2139" href="Bitcoin.Tx.Base.html#1011" class="Field">inputs</a>

<a id="_‼ʷ_"></a><a id="2147" href="Bitcoin.Tx.Base.html#2147" class="Function Operator">_‼ʷ_</a> <a id="2152" class="Symbol">:</a> <a id="2154" href="Bitcoin.Tx.Base.html#973" class="Record">Tx</a> <a id="2157" href="Bitcoin.Tx.Base.html#2058" class="Generalizable">i</a> <a id="2159" href="Bitcoin.Tx.Base.html#2063" class="Generalizable">o</a> <a id="2161" class="Symbol">→</a> <a id="2163" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="2167" href="Bitcoin.Tx.Base.html#2058" class="Generalizable">i</a> <a id="2169" class="Symbol">→</a> <a id="2171" href="Bitcoin.Tx.Base.html#937" class="Function">∃Witness</a>
<a id="2180" href="Bitcoin.Tx.Base.html#2147" class="Function Operator">_‼ʷ_</a> <a id="2185" class="Symbol">=</a> <a id="2187" href="Data.Vec.Base.html#1614" class="Function">V.lookup</a> <a id="2196" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="2198" href="Bitcoin.Tx.Base.html#1052" class="Field">wit</a>

<a id="_‼ʳ_"></a><a id="2203" href="Bitcoin.Tx.Base.html#2203" class="Function Operator">_‼ʳ_</a> <a id="2208" class="Symbol">:</a> <a id="2210" href="Bitcoin.Tx.Base.html#973" class="Record">Tx</a> <a id="2213" href="Bitcoin.Tx.Base.html#2058" class="Generalizable">i</a> <a id="2215" href="Bitcoin.Tx.Base.html#2063" class="Generalizable">o</a> <a id="2217" class="Symbol">→</a> <a id="2219" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="2223" href="Bitcoin.Tx.Base.html#2058" class="Generalizable">i</a> <a id="2225" class="Symbol">→</a> <a id="2227" href="Bitcoin.BasicTypes.html#293" class="Function">Time</a>
<a id="2232" href="Bitcoin.Tx.Base.html#2203" class="Function Operator">_‼ʳ_</a> <a id="2237" class="Symbol">=</a> <a id="2239" href="Data.Vec.Base.html#1614" class="Function">V.lookup</a> <a id="2248" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="2250" href="Bitcoin.Tx.Base.html#1107" class="Field">relLock</a>

<a id="_‼ᵒ_"></a><a id="2259" href="Bitcoin.Tx.Base.html#2259" class="Function Operator">_‼ᵒ_</a> <a id="2264" class="Symbol">:</a> <a id="2266" href="Bitcoin.Tx.Base.html#973" class="Record">Tx</a> <a id="2269" href="Bitcoin.Tx.Base.html#2058" class="Generalizable">i</a> <a id="2271" href="Bitcoin.Tx.Base.html#2063" class="Generalizable">o</a> <a id="2273" class="Symbol">→</a> <a id="2275" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="2279" href="Bitcoin.Tx.Base.html#2063" class="Generalizable">o</a> <a id="2281" class="Symbol">→</a> <a id="2283" href="Bitcoin.Tx.Base.html#857" class="Function">∃TxOutput</a>
<a id="2293" href="Bitcoin.Tx.Base.html#2259" class="Function Operator">_‼ᵒ_</a> <a id="2298" class="Symbol">=</a> <a id="2300" href="Data.Vec.Base.html#1614" class="Function">V.lookup</a> <a id="2309" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="2311" href="Bitcoin.Tx.Base.html#1161" class="Field">outputs</a>

<a id="2320" class="Comment">-- Coinbase transactions start at time t=0.</a>
<a id="2364" class="Comment">-- Coinbase : Tx 0 o → Type</a>
<a id="2392" class="Comment">-- Coinbase tx = absLock tx ≡ 0</a>

<a id="2425" class="Comment">-- Timed transactions.</a>
<a id="2448" class="Keyword">record</a> <a id="TimedTx"></a><a id="2455" href="Bitcoin.Tx.Base.html#2455" class="Record">TimedTx</a> <a id="2463" class="Symbol">:</a> <a id="2465" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="2470" class="Keyword">where</a>
  <a id="2478" class="Keyword">constructor</a> <a id="_at_"></a><a id="2490" href="Bitcoin.Tx.Base.html#2490" class="InductiveConstructor Operator">_at_</a>
  <a id="2497" class="Keyword">field</a> <a id="TimedTx.transaction"></a><a id="2503" href="Bitcoin.Tx.Base.html#2503" class="Field">transaction</a> <a id="2515" class="Symbol">:</a> <a id="2517" href="Bitcoin.Tx.Base.html#1326" class="Function">∃Tx</a>
        <a id="TimedTx.time"></a><a id="2529" href="Bitcoin.Tx.Base.html#2529" class="Field">time</a>        <a id="2541" class="Symbol">:</a> <a id="2543" href="Bitcoin.BasicTypes.html#293" class="Function">Time</a>
<a id="2548" class="Keyword">open</a> <a id="2553" href="Bitcoin.Tx.Base.html#2455" class="Module">TimedTx</a> <a id="2561" class="Keyword">public</a>

<a id="2569" class="Keyword">unquoteDecl</a> <a id="DecEqₜₜₓ"></a><a id="2581" href="Bitcoin.Tx.Base.html#2581" class="Function">DecEqₜₜₓ</a> <a id="2590" class="Symbol">=</a> <a id="2592" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="2599" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="2605" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="2607" class="Keyword">quote</a> <a id="2613" href="Bitcoin.Tx.Base.html#2455" class="Record">TimedTx</a> <a id="2621" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2623" href="Bitcoin.Tx.Base.html#2581" class="Function">DecEqₜₜₓ</a> <a id="2632" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a>

<a id="2635" class="Comment">-- Accessors.</a>
<a id="2649" class="Keyword">open</a> <a id="2654" class="Keyword">import</a> <a id="2661" href="Prelude.Accessors.html" class="Module">Prelude.Accessors</a>

<a id="2680" class="Comment">-- Value accessor.</a>

<a id="2700" class="Keyword">unquoteDecl</a> <a id="_∙Value"></a><a id="2712" href="Bitcoin.Tx.Base.html#2712" class="Function Operator">_∙Value</a> <a id="_∙value"></a><a id="2720" href="Bitcoin.Tx.Base.html#2720" class="Function Operator">_∙value</a> <a id="∙value=_"></a><a id="2728" href="Bitcoin.Tx.Base.html#2728" class="Function Operator">∙value=_</a> <a id="2737" class="Symbol">=</a>
  <a id="2741" href="Prelude.Accessors.html#790" class="Function">genAccessor</a> <a id="2753" href="Bitcoin.Tx.Base.html#2712" class="Function Operator">_∙Value</a> <a id="2761" href="Bitcoin.Tx.Base.html#2720" class="Function Operator">_∙value</a> <a id="2769" href="Bitcoin.Tx.Base.html#2728" class="Function Operator">∙value=_</a> <a id="2778" class="Symbol">(</a><a id="2779" class="Keyword">quote</a> <a id="2785" href="Bitcoin.BasicTypes.html#260" class="Function">Value</a><a id="2790" class="Symbol">)</a>
<a id="2792" class="Keyword">instance</a>
  <a id="TxOutput∙Value"></a><a id="2803" href="Bitcoin.Tx.Base.html#2803" class="Function">TxOutput∙Value</a> <a id="2818" class="Symbol">:</a> <a id="2820" href="Bitcoin.Tx.Base.html#640" class="Record">TxOutput</a> <a id="2829" href="Bitcoin.Script.Base.html#532" class="Generalizable">ctx</a> <a id="2833" href="Bitcoin.Tx.Base.html#2712" class="Function Operator">∙Value</a>
  <a id="2842" href="Bitcoin.Tx.Base.html#2803" class="Function">TxOutput∙Value</a> <a id="2857" class="Symbol">=</a> <a id="2859" href="Bitcoin.Tx.Base.html#2728" class="Function Operator">∙value=</a> <a id="2867" href="Bitcoin.Tx.Base.html#718" class="Field">value</a>

  <a id="∃TxOutput∙Value"></a><a id="2876" href="Bitcoin.Tx.Base.html#2876" class="Function">∃TxOutput∙Value</a> <a id="2892" class="Symbol">:</a> <a id="2894" href="Bitcoin.Tx.Base.html#857" class="Function">∃TxOutput</a> <a id="2904" href="Bitcoin.Tx.Base.html#2712" class="Function Operator">∙Value</a>
  <a id="2913" href="Bitcoin.Tx.Base.html#2876" class="Function">∃TxOutput∙Value</a> <a id="2929" class="Symbol">=</a> <a id="2931" href="Bitcoin.Tx.Base.html#2728" class="Function Operator">∙value=</a> <a id="2939" class="Symbol">λ</a> <a id="2941" class="Symbol">(_</a> <a id="2944" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2946" href="Bitcoin.Tx.Base.html#2946" class="Bound">txo</a><a id="2949" class="Symbol">)</a> <a id="2951" class="Symbol">→</a> <a id="2953" href="Bitcoin.Tx.Base.html#2946" class="Bound">txo</a> <a id="2957" href="Bitcoin.Tx.Base.html#2720" class="Function Operator">∙value</a>

  <a id="TxInput′∙Value"></a><a id="2967" href="Bitcoin.Tx.Base.html#2967" class="Function">TxInput′∙Value</a> <a id="2982" class="Symbol">:</a> <a id="2984" href="Bitcoin.Tx.Base.html#1867" class="Record">TxInput′</a> <a id="2993" href="Bitcoin.Tx.Base.html#2712" class="Function Operator">∙Value</a>
  <a id="3002" href="Bitcoin.Tx.Base.html#2967" class="Function">TxInput′∙Value</a> <a id="3017" class="Symbol">=</a> <a id="3019" href="Bitcoin.Tx.Base.html#2728" class="Function Operator">∙value=</a> <a id="3027" class="Symbol">λ</a> <a id="3029" class="Symbol">((_</a> <a id="3033" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3035" class="Symbol">_</a> <a id="3037" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3039" href="Bitcoin.Tx.Base.html#3039" class="Bound">T</a><a id="3040" class="Symbol">)</a> <a id="3042" href="Bitcoin.Tx.Base.html#1903" class="InductiveConstructor Operator">at</a> <a id="3045" href="Bitcoin.Tx.Base.html#3045" class="Bound">o</a><a id="3046" class="Symbol">)</a> <a id="3048" class="Symbol">→</a> <a id="3050" class="Symbol">(</a><a id="3051" href="Bitcoin.Tx.Base.html#3039" class="Bound">T</a> <a id="3053" href="Bitcoin.Tx.Base.html#2259" class="Function Operator">‼ᵒ</a> <a id="3056" href="Bitcoin.Tx.Base.html#3045" class="Bound">o</a><a id="3057" class="Symbol">)</a> <a id="3059" href="Bitcoin.Tx.Base.html#2720" class="Function Operator">∙value</a>

<a id="3067" class="Comment">-- Context accessor.</a>

<a id="3089" class="Keyword">open</a> <a id="3094" class="Keyword">import</a> <a id="3101" href="Prelude.Newtype.html" class="Module">Prelude.Newtype</a>
<a id="≫ScriptContext"></a><a id="3117" href="Bitcoin.Tx.Base.html#3117" class="Function">≫ScriptContext</a> <a id="3132" class="Symbol">=</a> <a id="3134" href="Prelude.Newtype.html#288" class="Record">newtype</a> <a id="3142" href="Bitcoin.Script.Base.html#382" class="Function">ScriptContext</a>

<a id="∙ctx=_"></a><a id="3157" href="Bitcoin.Tx.Base.html#3157" class="Function Operator">∙ctx=_</a> <a id="3164" class="Symbol">:</a> <a id="3166" class="Symbol">∀</a> <a id="3168" class="Symbol">{</a><a id="3169" href="Bitcoin.Tx.Base.html#3169" class="Bound">A</a> <a id="3171" class="Symbol">:</a> <a id="3173" href="Agda.Primitive.html#320" class="Primitive">Type</a><a id="3177" class="Symbol">}</a> <a id="3179" class="Symbol">→</a> <a id="3181" class="Symbol">(</a><a id="3182" href="Bitcoin.Tx.Base.html#3169" class="Bound">A</a> <a id="3184" class="Symbol">→</a> <a id="3186" href="Bitcoin.Script.Base.html#382" class="Function">ScriptContext</a><a id="3199" class="Symbol">)</a> <a id="3201" class="Symbol">→</a> <a id="3203" href="Prelude.Accessors.html#364" class="Function">HasField</a> <a id="3212" href="Bitcoin.Tx.Base.html#3169" class="Bound">A</a> <a id="3214" class="Symbol">_</a>
<a id="3216" href="Bitcoin.Tx.Base.html#3157" class="Function Operator">∙ctx=</a> <a id="3222" href="Bitcoin.Tx.Base.html#3222" class="Bound">f</a> <a id="3224" class="Symbol">=</a> <a id="3226" class="Symbol">λ</a> <a id="3228" class="Keyword">where</a> <a id="3234" class="Symbol">.</a><a id="3235" href="Prelude.Accessors.html#286" class="Field Operator">_∙</a> <a id="3238" href="Bitcoin.Tx.Base.html#3238" class="Bound">x</a> <a id="3240" class="Symbol">→</a> <a id="3242" href="Prelude.Newtype.html#338" class="InductiveConstructor">mk</a> <a id="3245" class="Symbol">(</a><a id="3246" href="Bitcoin.Tx.Base.html#3222" class="Bound">f</a> <a id="3248" href="Bitcoin.Tx.Base.html#3238" class="Bound">x</a><a id="3249" class="Symbol">)</a>

<a id="_∙ctx"></a><a id="3252" href="Bitcoin.Tx.Base.html#3252" class="Function Operator">_∙ctx</a> <a id="3258" class="Symbol">:</a> <a id="3260" class="Symbol">∀</a> <a id="3262" class="Symbol">{</a><a id="3263" href="Bitcoin.Tx.Base.html#3263" class="Bound">A</a> <a id="3265" class="Symbol">:</a> <a id="3267" href="Agda.Primitive.html#320" class="Primitive">Type</a><a id="3271" class="Symbol">}</a> <a id="3273" class="Symbol">→</a> <a id="3275" class="Symbol">⦃</a> <a id="3277" href="Prelude.Accessors.html#364" class="Function">HasField</a> <a id="3286" href="Bitcoin.Tx.Base.html#3263" class="Bound">A</a> <a id="3288" class="Symbol">_</a> <a id="3290" class="Symbol">⦄</a> <a id="3292" class="Symbol">→</a> <a id="3294" class="Symbol">(</a><a id="3295" href="Bitcoin.Tx.Base.html#3263" class="Bound">A</a> <a id="3297" class="Symbol">→</a> <a id="3299" href="Bitcoin.Script.Base.html#382" class="Function">ScriptContext</a><a id="3312" class="Symbol">)</a>
<a id="3314" href="Bitcoin.Tx.Base.html#3252" class="Function Operator">_∙ctx</a> <a id="3320" class="Symbol">=</a> <a id="3322" href="Prelude.Newtype.html#349" class="Field">unmk</a> <a id="3327" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3329" href="Prelude.Accessors.html#286" class="Field Operator">_∙</a>

<a id="3333" class="Keyword">instance</a>
  <a id="Script∙Ctx"></a><a id="3344" href="Bitcoin.Tx.Base.html#3344" class="Function">Script∙Ctx</a> <a id="3355" class="Symbol">:</a> <a id="3357" href="Prelude.Accessors.html#364" class="Function">HasField</a> <a id="3366" class="Symbol">(</a><a id="3367" href="Bitcoin.Script.Base.html#1878" class="Datatype">BitcoinScript</a> <a id="3381" href="Bitcoin.Script.Base.html#532" class="Generalizable">ctx</a><a id="3384" class="Symbol">)</a> <a id="3386" href="Bitcoin.Tx.Base.html#3117" class="Function">≫ScriptContext</a>
  <a id="3403" href="Bitcoin.Tx.Base.html#3344" class="Function">Script∙Ctx</a> <a id="3414" class="Symbol">{</a><a id="3415" class="Argument">ctx</a> <a id="3419" class="Symbol">=</a> <a id="3421" href="Bitcoin.Tx.Base.html#3421" class="Bound">ctx</a><a id="3424" class="Symbol">}</a> <a id="3426" class="Symbol">=</a> <a id="3428" href="Bitcoin.Tx.Base.html#3157" class="Function Operator">∙ctx=</a> <a id="3434" href="Function.Base.html#645" class="Function">const</a> <a id="3440" href="Bitcoin.Tx.Base.html#3421" class="Bound">ctx</a>

  <a id="TxOutput∙Ctx"></a><a id="3447" href="Bitcoin.Tx.Base.html#3447" class="Function">TxOutput∙Ctx</a> <a id="3460" class="Symbol">:</a> <a id="3462" href="Prelude.Accessors.html#364" class="Function">HasField</a> <a id="3471" class="Symbol">(</a><a id="3472" href="Bitcoin.Tx.Base.html#640" class="Record">TxOutput</a> <a id="3481" href="Bitcoin.Script.Base.html#532" class="Generalizable">ctx</a><a id="3484" class="Symbol">)</a> <a id="3486" href="Bitcoin.Tx.Base.html#3117" class="Function">≫ScriptContext</a>
  <a id="3503" href="Bitcoin.Tx.Base.html#3447" class="Function">TxOutput∙Ctx</a> <a id="3516" class="Symbol">{</a><a id="3517" class="Argument">ctx</a> <a id="3521" class="Symbol">=</a> <a id="3523" href="Bitcoin.Tx.Base.html#3523" class="Bound">ctx</a><a id="3526" class="Symbol">}</a> <a id="3528" class="Symbol">=</a> <a id="3530" href="Bitcoin.Tx.Base.html#3157" class="Function Operator">∙ctx=</a> <a id="3536" href="Function.Base.html#645" class="Function">const</a> <a id="3542" href="Bitcoin.Tx.Base.html#3523" class="Bound">ctx</a>

  <a id="∃TxOutput∙Ctx"></a><a id="3549" href="Bitcoin.Tx.Base.html#3549" class="Function">∃TxOutput∙Ctx</a> <a id="3563" class="Symbol">:</a> <a id="3565" href="Prelude.Accessors.html#364" class="Function">HasField</a> <a id="3574" href="Bitcoin.Tx.Base.html#857" class="Function">∃TxOutput</a> <a id="3584" href="Bitcoin.Tx.Base.html#3117" class="Function">≫ScriptContext</a>
  <a id="3601" href="Bitcoin.Tx.Base.html#3549" class="Function">∃TxOutput∙Ctx</a> <a id="3615" class="Symbol">=</a> <a id="3617" href="Bitcoin.Tx.Base.html#3157" class="Function Operator">∙ctx=</a> <a id="3623" class="Symbol">λ</a> <a id="3625" class="Symbol">(_</a> <a id="3628" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3630" href="Bitcoin.Tx.Base.html#3630" class="Bound">txo</a><a id="3633" class="Symbol">)</a> <a id="3635" class="Symbol">→</a> <a id="3637" href="Bitcoin.Tx.Base.html#3630" class="Bound">txo</a> <a id="3641" href="Bitcoin.Tx.Base.html#3252" class="Function Operator">∙ctx</a>

  <a id="TxInput′∙Ctx"></a><a id="3649" href="Bitcoin.Tx.Base.html#3649" class="Function">TxInput′∙Ctx</a> <a id="3662" class="Symbol">:</a> <a id="3664" href="Prelude.Accessors.html#364" class="Function">HasField</a> <a id="3673" href="Bitcoin.Tx.Base.html#1867" class="Record">TxInput′</a> <a id="3682" href="Bitcoin.Tx.Base.html#3117" class="Function">≫ScriptContext</a>
  <a id="3699" href="Bitcoin.Tx.Base.html#3649" class="Function">TxInput′∙Ctx</a> <a id="3712" class="Symbol">=</a> <a id="3714" href="Bitcoin.Tx.Base.html#3157" class="Function Operator">∙ctx=</a> <a id="3720" class="Symbol">λ</a> <a id="3722" class="Symbol">((_</a> <a id="3726" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3728" class="Symbol">_</a> <a id="3730" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3732" href="Bitcoin.Tx.Base.html#3732" class="Bound">T</a><a id="3733" class="Symbol">)</a> <a id="3735" href="Bitcoin.Tx.Base.html#1903" class="InductiveConstructor Operator">at</a> <a id="3738" href="Bitcoin.Tx.Base.html#3738" class="Bound">o</a><a id="3739" class="Symbol">)</a> <a id="3741" class="Symbol">→</a> <a id="3743" class="Symbol">(</a><a id="3744" href="Bitcoin.Tx.Base.html#3732" class="Bound">T</a> <a id="3746" href="Bitcoin.Tx.Base.html#2259" class="Function Operator">‼ᵒ</a> <a id="3749" href="Bitcoin.Tx.Base.html#3738" class="Bound">o</a><a id="3750" class="Symbol">)</a> <a id="3752" href="Bitcoin.Tx.Base.html#3252" class="Function Operator">∙ctx</a>

<a id="3758" class="Comment">-- Validator accessor.</a>

<a id="_∙validator"></a><a id="3782" href="Bitcoin.Tx.Base.html#3782" class="Function Operator">_∙validator</a> <a id="3794" class="Symbol">:</a> <a id="3796" class="Symbol">∀</a> <a id="3798" class="Symbol">{</a><a id="3799" href="Bitcoin.Tx.Base.html#3799" class="Bound">A</a> <a id="3801" class="Symbol">:</a> <a id="3803" href="Agda.Primitive.html#320" class="Primitive">Type</a><a id="3807" class="Symbol">}</a> <a id="3809" class="Symbol">⦃</a> <a id="3811" href="Bitcoin.Tx.Base.html#3811" class="Bound">_</a> <a id="3813" class="Symbol">:</a> <a id="3815" href="Prelude.Accessors.html#364" class="Function">HasField</a> <a id="3824" href="Bitcoin.Tx.Base.html#3799" class="Bound">A</a> <a id="3826" href="Bitcoin.Tx.Base.html#3117" class="Function">≫ScriptContext</a> <a id="3841" class="Symbol">⦄</a>
            <a id="3855" class="Symbol">→</a> <a id="3857" class="Symbol">⦃</a> <a id="3859" href="Prelude.Accessors.html#204" class="Record">HasField′</a> <a id="3869" href="Bitcoin.Tx.Base.html#3799" class="Bound">A</a> <a id="3871" class="Symbol">_</a> <a id="3873" class="Symbol">⦄</a>
            <a id="3887" class="Symbol">→</a> <a id="3889" class="Symbol">∀</a> <a id="3891" class="Symbol">(</a><a id="3892" href="Bitcoin.Tx.Base.html#3892" class="Bound">a</a> <a id="3894" class="Symbol">:</a> <a id="3896" href="Bitcoin.Tx.Base.html#3799" class="Bound">A</a><a id="3897" class="Symbol">)</a> <a id="3899" class="Symbol">→</a> <a id="3901" href="Bitcoin.Script.Base.html#1878" class="Datatype">BitcoinScript</a> <a id="3915" class="Symbol">(</a><a id="3916" href="Bitcoin.Tx.Base.html#3892" class="Bound">a</a> <a id="3918" href="Bitcoin.Tx.Base.html#3252" class="Function Operator">∙ctx</a><a id="3922" class="Symbol">)</a>
<a id="3924" href="Bitcoin.Tx.Base.html#3782" class="Function Operator">_∙validator</a> <a id="3936" class="Symbol">=</a> <a id="3938" href="Prelude.Accessors.html#286" class="Field Operator">_∙</a>

<a id="3942" class="Keyword">instance</a>
  <a id="TxOutput∙Validator"></a><a id="3953" href="Bitcoin.Tx.Base.html#3953" class="Function">TxOutput∙Validator</a> <a id="3972" class="Symbol">:</a> <a id="3974" href="Prelude.Accessors.html#364" class="Function">HasField</a> <a id="3983" class="Symbol">(</a><a id="3984" href="Bitcoin.Tx.Base.html#640" class="Record">TxOutput</a> <a id="3993" href="Bitcoin.Script.Base.html#532" class="Generalizable">ctx</a><a id="3996" class="Symbol">)</a> <a id="3998" class="Symbol">(</a><a id="3999" href="Bitcoin.Script.Base.html#1878" class="Datatype">BitcoinScript</a> <a id="4013" href="Bitcoin.Script.Base.html#532" class="Generalizable">ctx</a><a id="4016" class="Symbol">)</a>
  <a id="4020" href="Bitcoin.Tx.Base.html#3953" class="Function">TxOutput∙Validator</a> <a id="4039" class="Symbol">.</a><a id="4040" href="Prelude.Accessors.html#286" class="Field Operator">_∙</a> <a id="4043" class="Symbol">=</a> <a id="4045" href="Bitcoin.Tx.Base.html#744" class="Field">validator</a>

  <a id="∃TxOutput∙Validator"></a><a id="4058" href="Bitcoin.Tx.Base.html#4058" class="Function">∃TxOutput∙Validator</a> <a id="4078" class="Symbol">:</a> <a id="4080" href="Prelude.Accessors.html#204" class="Record">HasField′</a> <a id="4090" href="Bitcoin.Tx.Base.html#857" class="Function">∃TxOutput</a> <a id="4100" class="Symbol">(</a><a id="4101" href="Bitcoin.Script.Base.html#1878" class="Datatype">BitcoinScript</a> <a id="4115" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="4117" href="Bitcoin.Tx.Base.html#3252" class="Function Operator">_∙ctx</a><a id="4122" class="Symbol">)</a>
  <a id="4126" href="Bitcoin.Tx.Base.html#4058" class="Function">∃TxOutput∙Validator</a> <a id="4146" class="Symbol">.</a><a id="4147" href="Prelude.Accessors.html#286" class="Field Operator">_∙</a> <a id="4150" class="Symbol">(_</a> <a id="4153" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4155" href="Bitcoin.Tx.Base.html#4155" class="Bound">txo</a><a id="4158" class="Symbol">)</a> <a id="4160" class="Symbol">=</a> <a id="4162" href="Bitcoin.Tx.Base.html#4155" class="Bound">txo</a> <a id="4166" href="Bitcoin.Tx.Base.html#3782" class="Function Operator">∙validator</a>

  <a id="TxInput′∙Validator"></a><a id="4180" href="Bitcoin.Tx.Base.html#4180" class="Function">TxInput′∙Validator</a> <a id="4199" class="Symbol">:</a> <a id="4201" href="Prelude.Accessors.html#204" class="Record">HasField′</a> <a id="4211" href="Bitcoin.Tx.Base.html#1867" class="Record">TxInput′</a> <a id="4220" class="Symbol">(</a><a id="4221" href="Bitcoin.Script.Base.html#1878" class="Datatype">BitcoinScript</a> <a id="4235" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="4237" href="Bitcoin.Tx.Base.html#3252" class="Function Operator">_∙ctx</a><a id="4242" class="Symbol">)</a>
  <a id="4246" href="Bitcoin.Tx.Base.html#4180" class="Function">TxInput′∙Validator</a> <a id="4265" class="Symbol">.</a><a id="4266" href="Prelude.Accessors.html#286" class="Field Operator">_∙</a> <a id="4269" class="Symbol">((_</a> <a id="4273" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4275" class="Symbol">_</a> <a id="4277" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4279" href="Bitcoin.Tx.Base.html#4279" class="Bound">T</a><a id="4280" class="Symbol">)</a> <a id="4282" href="Bitcoin.Tx.Base.html#1903" class="InductiveConstructor Operator">at</a> <a id="4285" href="Bitcoin.Tx.Base.html#4285" class="Bound">o</a><a id="4286" class="Symbol">)</a> <a id="4288" class="Symbol">=</a> <a id="4290" class="Symbol">(</a><a id="4291" href="Bitcoin.Tx.Base.html#4279" class="Bound">T</a> <a id="4293" href="Bitcoin.Tx.Base.html#2259" class="Function Operator">‼ᵒ</a> <a id="4296" href="Bitcoin.Tx.Base.html#4285" class="Bound">o</a><a id="4297" class="Symbol">)</a> <a id="4299" href="Bitcoin.Tx.Base.html#3782" class="Function Operator">∙validator</a>
</pre></body></html>