<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Tree.AVL.Height</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Types and functions which are used to keep track of height</a>
<a id="168" class="Comment">-- invariants in AVL Trees</a>
<a id="195" class="Comment">------------------------------------------------------------------------</a>

<a id="269" class="Symbol">{-#</a> <a id="273" class="Keyword">OPTIONS</a> <a id="281" class="Pragma">--without-K</a> <a id="293" class="Pragma">--safe</a> <a id="300" class="Symbol">#-}</a>

<a id="305" class="Keyword">module</a> <a id="312" href="Data.Tree.AVL.Height.html" class="Module">Data.Tree.AVL.Height</a> <a id="333" class="Keyword">where</a>

<a id="340" class="Keyword">open</a> <a id="345" class="Keyword">import</a> <a id="352" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a>
<a id="366" class="Keyword">open</a> <a id="371" class="Keyword">import</a> <a id="378" href="Data.Fin.Base.html" class="Module">Data.Fin.Base</a> <a id="392" class="Keyword">using</a> <a id="398" class="Symbol">(</a><a id="399" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a><a id="402" class="Symbol">;</a> <a id="404" href="Data.Fin.Base.html#1148" class="InductiveConstructor">zero</a><a id="408" class="Symbol">;</a> <a id="410" href="Data.Fin.Base.html#1179" class="InductiveConstructor">suc</a><a id="413" class="Symbol">)</a>

<a id="ℕ₂"></a><a id="416" href="Data.Tree.AVL.Height.html#416" class="Function">ℕ₂</a> <a id="419" class="Symbol">=</a> <a id="421" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="425" class="Number">2</a>
<a id="427" class="Keyword">pattern</a> <a id="0#"></a><a id="435" href="Data.Tree.AVL.Height.html#435" class="InductiveConstructor">0#</a> <a id="438" class="Symbol">=</a> <a id="440" class="InductiveConstructor">zero</a>
<a id="445" class="Keyword">pattern</a> <a id="1#"></a><a id="453" href="Data.Tree.AVL.Height.html#453" class="InductiveConstructor">1#</a> <a id="456" class="Symbol">=</a> <a id="458" class="InductiveConstructor">suc</a> <a id="462" class="InductiveConstructor">zero</a>
<a id="467" class="Keyword">pattern</a> <a id="##"></a><a id="475" href="Data.Tree.AVL.Height.html#475" class="InductiveConstructor">##</a> <a id="478" class="Symbol">=</a> <a id="480" class="InductiveConstructor">suc</a> <a id="484" class="Symbol">(</a><a id="485" class="InductiveConstructor">suc</a> <a id="489" class="Symbol">())</a>

<a id="494" class="Comment">-- Addition.</a>

<a id="508" class="Keyword">infixl</a> <a id="515" class="Number">6</a> <a id="517" href="Data.Tree.AVL.Height.html#522" class="Function Operator">_⊕_</a>

<a id="_⊕_"></a><a id="522" href="Data.Tree.AVL.Height.html#522" class="Function Operator">_⊕_</a> <a id="526" class="Symbol">:</a> <a id="528" href="Data.Tree.AVL.Height.html#416" class="Function">ℕ₂</a> <a id="531" class="Symbol">→</a> <a id="533" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="535" class="Symbol">→</a> <a id="537" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="539" href="Data.Tree.AVL.Height.html#435" class="InductiveConstructor">0#</a> <a id="542" href="Data.Tree.AVL.Height.html#522" class="Function Operator">⊕</a> <a id="544" href="Data.Tree.AVL.Height.html#544" class="Bound">n</a> <a id="546" class="Symbol">=</a> <a id="548" href="Data.Tree.AVL.Height.html#544" class="Bound">n</a>
<a id="550" href="Data.Tree.AVL.Height.html#453" class="InductiveConstructor">1#</a> <a id="553" href="Data.Tree.AVL.Height.html#522" class="Function Operator">⊕</a> <a id="555" href="Data.Tree.AVL.Height.html#555" class="Bound">n</a> <a id="557" class="Symbol">=</a> <a id="559" class="Number">1</a> <a id="561" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="563" href="Data.Tree.AVL.Height.html#555" class="Bound">n</a>

<a id="566" class="Comment">-- pred[ i ⊕ n ] = pred (i ⊕ n).</a>

<a id="pred[_⊕_]"></a><a id="600" href="Data.Tree.AVL.Height.html#600" class="Function Operator">pred[_⊕_]</a> <a id="610" class="Symbol">:</a> <a id="612" href="Data.Tree.AVL.Height.html#416" class="Function">ℕ₂</a> <a id="615" class="Symbol">→</a> <a id="617" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="619" class="Symbol">→</a> <a id="621" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="623" href="Data.Tree.AVL.Height.html#600" class="Function Operator">pred[</a> <a id="629" href="Data.Tree.AVL.Height.html#629" class="Bound">i</a> <a id="631" href="Data.Tree.AVL.Height.html#600" class="Function Operator">⊕</a> <a id="633" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a>  <a id="639" href="Data.Tree.AVL.Height.html#600" class="Function Operator">]</a> <a id="641" class="Symbol">=</a> <a id="643" class="Number">0</a>
<a id="645" href="Data.Tree.AVL.Height.html#600" class="Function Operator">pred[</a> <a id="651" href="Data.Tree.AVL.Height.html#651" class="Bound">i</a> <a id="653" href="Data.Tree.AVL.Height.html#600" class="Function Operator">⊕</a> <a id="655" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="659" href="Data.Tree.AVL.Height.html#659" class="Bound">n</a> <a id="661" href="Data.Tree.AVL.Height.html#600" class="Function Operator">]</a> <a id="663" class="Symbol">=</a> <a id="665" href="Data.Tree.AVL.Height.html#651" class="Bound">i</a> <a id="667" href="Data.Tree.AVL.Height.html#522" class="Function Operator">⊕</a> <a id="669" href="Data.Tree.AVL.Height.html#659" class="Bound">n</a>

<a id="672" class="Keyword">infix</a> <a id="678" class="Number">4</a> <a id="680" href="Data.Tree.AVL.Height.html#950" class="Datatype Operator">_∼_⊔_</a>

<a id="687" class="Comment">-- If i ∼ j ⊔ m, then the difference between i and j is at most 1,</a>
<a id="754" class="Comment">-- and the maximum of i and j is m. _∼_⊔_ is used to record the</a>
<a id="818" class="Comment">-- balance factor of the AVL trees, and also to ensure that the</a>
<a id="882" class="Comment">-- absolute value of the balance factor is never more than 1.</a>

<a id="945" class="Keyword">data</a> <a id="_∼_⊔_"></a><a id="950" href="Data.Tree.AVL.Height.html#950" class="Datatype Operator">_∼_⊔_</a> <a id="956" class="Symbol">:</a> <a id="958" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="960" class="Symbol">→</a> <a id="962" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="964" class="Symbol">→</a> <a id="966" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="968" class="Symbol">→</a> <a id="970" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="974" class="Keyword">where</a>
  <a id="_∼_⊔_.∼+"></a><a id="982" href="Data.Tree.AVL.Height.html#982" class="InductiveConstructor">∼+</a> <a id="985" class="Symbol">:</a> <a id="987" class="Symbol">∀</a> <a id="989" class="Symbol">{</a><a id="990" href="Data.Tree.AVL.Height.html#990" class="Bound">n</a><a id="991" class="Symbol">}</a> <a id="993" class="Symbol">→</a>     <a id="999" href="Data.Tree.AVL.Height.html#990" class="Bound">n</a> <a id="1001" href="Data.Tree.AVL.Height.html#950" class="Datatype Operator">∼</a> <a id="1003" class="Number">1</a> <a id="1005" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="1007" href="Data.Tree.AVL.Height.html#990" class="Bound">n</a> <a id="1009" href="Data.Tree.AVL.Height.html#950" class="Datatype Operator">⊔</a> <a id="1011" class="Number">1</a> <a id="1013" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="1015" href="Data.Tree.AVL.Height.html#990" class="Bound">n</a>
  <a id="_∼_⊔_.∼0"></a><a id="1019" href="Data.Tree.AVL.Height.html#1019" class="InductiveConstructor">∼0</a> <a id="1022" class="Symbol">:</a> <a id="1024" class="Symbol">∀</a> <a id="1026" class="Symbol">{</a><a id="1027" href="Data.Tree.AVL.Height.html#1027" class="Bound">n</a><a id="1028" class="Symbol">}</a> <a id="1030" class="Symbol">→</a>     <a id="1036" href="Data.Tree.AVL.Height.html#1027" class="Bound">n</a> <a id="1038" href="Data.Tree.AVL.Height.html#950" class="Datatype Operator">∼</a> <a id="1040" href="Data.Tree.AVL.Height.html#1027" class="Bound">n</a>     <a id="1046" href="Data.Tree.AVL.Height.html#950" class="Datatype Operator">⊔</a> <a id="1048" href="Data.Tree.AVL.Height.html#1027" class="Bound">n</a>
  <a id="_∼_⊔_.∼-"></a><a id="1052" href="Data.Tree.AVL.Height.html#1052" class="InductiveConstructor">∼-</a> <a id="1055" class="Symbol">:</a> <a id="1057" class="Symbol">∀</a> <a id="1059" class="Symbol">{</a><a id="1060" href="Data.Tree.AVL.Height.html#1060" class="Bound">n</a><a id="1061" class="Symbol">}</a> <a id="1063" class="Symbol">→</a> <a id="1065" class="Number">1</a> <a id="1067" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="1069" href="Data.Tree.AVL.Height.html#1060" class="Bound">n</a> <a id="1071" href="Data.Tree.AVL.Height.html#950" class="Datatype Operator">∼</a> <a id="1073" href="Data.Tree.AVL.Height.html#1060" class="Bound">n</a>     <a id="1079" href="Data.Tree.AVL.Height.html#950" class="Datatype Operator">⊔</a> <a id="1081" class="Number">1</a> <a id="1083" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="1085" href="Data.Tree.AVL.Height.html#1060" class="Bound">n</a>

<a id="1088" class="Comment">-- Some lemmas.</a>

<a id="max∼"></a><a id="1105" href="Data.Tree.AVL.Height.html#1105" class="Function">max∼</a> <a id="1110" class="Symbol">:</a> <a id="1112" class="Symbol">∀</a> <a id="1114" class="Symbol">{</a><a id="1115" href="Data.Tree.AVL.Height.html#1115" class="Bound">i</a> <a id="1117" href="Data.Tree.AVL.Height.html#1117" class="Bound">j</a> <a id="1119" href="Data.Tree.AVL.Height.html#1119" class="Bound">m</a><a id="1120" class="Symbol">}</a> <a id="1122" class="Symbol">→</a> <a id="1124" href="Data.Tree.AVL.Height.html#1115" class="Bound">i</a> <a id="1126" href="Data.Tree.AVL.Height.html#950" class="Datatype Operator">∼</a> <a id="1128" href="Data.Tree.AVL.Height.html#1117" class="Bound">j</a> <a id="1130" href="Data.Tree.AVL.Height.html#950" class="Datatype Operator">⊔</a> <a id="1132" href="Data.Tree.AVL.Height.html#1119" class="Bound">m</a> <a id="1134" class="Symbol">→</a> <a id="1136" href="Data.Tree.AVL.Height.html#1119" class="Bound">m</a> <a id="1138" href="Data.Tree.AVL.Height.html#950" class="Datatype Operator">∼</a> <a id="1140" href="Data.Tree.AVL.Height.html#1115" class="Bound">i</a> <a id="1142" href="Data.Tree.AVL.Height.html#950" class="Datatype Operator">⊔</a> <a id="1144" href="Data.Tree.AVL.Height.html#1119" class="Bound">m</a>
<a id="1146" href="Data.Tree.AVL.Height.html#1105" class="Function">max∼</a> <a id="1151" href="Data.Tree.AVL.Height.html#982" class="InductiveConstructor">∼+</a> <a id="1154" class="Symbol">=</a> <a id="1156" href="Data.Tree.AVL.Height.html#1052" class="InductiveConstructor">∼-</a>
<a id="1159" href="Data.Tree.AVL.Height.html#1105" class="Function">max∼</a> <a id="1164" href="Data.Tree.AVL.Height.html#1019" class="InductiveConstructor">∼0</a> <a id="1167" class="Symbol">=</a> <a id="1169" href="Data.Tree.AVL.Height.html#1019" class="InductiveConstructor">∼0</a>
<a id="1172" href="Data.Tree.AVL.Height.html#1105" class="Function">max∼</a> <a id="1177" href="Data.Tree.AVL.Height.html#1052" class="InductiveConstructor">∼-</a> <a id="1180" class="Symbol">=</a> <a id="1182" href="Data.Tree.AVL.Height.html#1019" class="InductiveConstructor">∼0</a>

<a id="∼max"></a><a id="1186" href="Data.Tree.AVL.Height.html#1186" class="Function">∼max</a> <a id="1191" class="Symbol">:</a> <a id="1193" class="Symbol">∀</a> <a id="1195" class="Symbol">{</a><a id="1196" href="Data.Tree.AVL.Height.html#1196" class="Bound">i</a> <a id="1198" href="Data.Tree.AVL.Height.html#1198" class="Bound">j</a> <a id="1200" href="Data.Tree.AVL.Height.html#1200" class="Bound">m</a><a id="1201" class="Symbol">}</a> <a id="1203" class="Symbol">→</a> <a id="1205" href="Data.Tree.AVL.Height.html#1196" class="Bound">i</a> <a id="1207" href="Data.Tree.AVL.Height.html#950" class="Datatype Operator">∼</a> <a id="1209" href="Data.Tree.AVL.Height.html#1198" class="Bound">j</a> <a id="1211" href="Data.Tree.AVL.Height.html#950" class="Datatype Operator">⊔</a> <a id="1213" href="Data.Tree.AVL.Height.html#1200" class="Bound">m</a> <a id="1215" class="Symbol">→</a> <a id="1217" href="Data.Tree.AVL.Height.html#1198" class="Bound">j</a> <a id="1219" href="Data.Tree.AVL.Height.html#950" class="Datatype Operator">∼</a> <a id="1221" href="Data.Tree.AVL.Height.html#1200" class="Bound">m</a> <a id="1223" href="Data.Tree.AVL.Height.html#950" class="Datatype Operator">⊔</a> <a id="1225" href="Data.Tree.AVL.Height.html#1200" class="Bound">m</a>
<a id="1227" href="Data.Tree.AVL.Height.html#1186" class="Function">∼max</a> <a id="1232" href="Data.Tree.AVL.Height.html#982" class="InductiveConstructor">∼+</a> <a id="1235" class="Symbol">=</a> <a id="1237" href="Data.Tree.AVL.Height.html#1019" class="InductiveConstructor">∼0</a>
<a id="1240" href="Data.Tree.AVL.Height.html#1186" class="Function">∼max</a> <a id="1245" href="Data.Tree.AVL.Height.html#1019" class="InductiveConstructor">∼0</a> <a id="1248" class="Symbol">=</a> <a id="1250" href="Data.Tree.AVL.Height.html#1019" class="InductiveConstructor">∼0</a>
<a id="1253" href="Data.Tree.AVL.Height.html#1186" class="Function">∼max</a> <a id="1258" href="Data.Tree.AVL.Height.html#1052" class="InductiveConstructor">∼-</a> <a id="1261" class="Symbol">=</a> <a id="1263" href="Data.Tree.AVL.Height.html#982" class="InductiveConstructor">∼+</a>
</pre></body></html>