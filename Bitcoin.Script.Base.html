<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Bitcoin.Script.Base</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Basic Script datatype.</a>
<a id="100" class="Comment">------------------------------------------------------------------------</a>
<a id="173" class="Keyword">module</a> <a id="180" href="Bitcoin.Script.Base.html" class="Module">Bitcoin.Script.Base</a> <a id="200" class="Keyword">where</a>

<a id="207" class="Keyword">open</a> <a id="212" class="Keyword">import</a> <a id="219" href="Prelude.Init.html" class="Module">Prelude.Init</a>
<a id="232" class="Keyword">open</a> <a id="237" class="Keyword">import</a> <a id="244" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>

<a id="259" class="Keyword">open</a> <a id="264" class="Keyword">import</a> <a id="271" href="Bitcoin.BasicTypes.html" class="Module">Bitcoin.BasicTypes</a>
<a id="290" class="Keyword">open</a> <a id="295" class="Keyword">import</a> <a id="302" href="Bitcoin.Crypto.html" class="Module">Bitcoin.Crypto</a>

<a id="318" class="Keyword">data</a> <a id="ScriptContext"></a><a id="323" href="Bitcoin.Script.Base.html#323" class="Datatype">ScriptContext</a> <a id="337" class="Symbol">:</a> <a id="339" class="PrimitiveType">Set</a> <a id="343" class="Keyword">where</a>
  <a id="ScriptContext.Ctx"></a><a id="351" href="Bitcoin.Script.Base.html#351" class="InductiveConstructor">Ctx</a> <a id="355" class="Symbol">:</a> <a id="357" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="359" class="Symbol">→</a> <a id="361" href="Bitcoin.Script.Base.html#323" class="Datatype">ScriptContext</a>
<a id="375" class="Keyword">unquoteDecl</a> <a id="DecEqᶜᵗˣ"></a><a id="387" href="Bitcoin.Script.Base.html#387" class="Function">DecEqᶜᵗˣ</a> <a id="396" class="Symbol">=</a> <a id="398" href="Prelude.Generics.html#5660" class="Function">DERIVE</a> <a id="405" href="Prelude.DecEq.html#553" class="Record">DecEq</a> <a id="411" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="413" class="Keyword">quote</a> <a id="419" href="Bitcoin.Script.Base.html#323" class="Datatype">ScriptContext</a> <a id="433" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="435" href="Bitcoin.Script.Base.html#387" class="Function">DecEqᶜᵗˣ</a> <a id="444" href="Data.List.Base.html#4458" class="Function Operator">]</a>

<a id="ctxToℕ"></a><a id="447" href="Bitcoin.Script.Base.html#447" class="Function">ctxToℕ</a> <a id="454" class="Symbol">:</a> <a id="456" href="Bitcoin.Script.Base.html#323" class="Datatype">ScriptContext</a> <a id="470" class="Symbol">→</a> <a id="472" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="474" href="Bitcoin.Script.Base.html#447" class="Function">ctxToℕ</a> <a id="481" class="Symbol">(</a><a id="482" href="Bitcoin.Script.Base.html#351" class="InductiveConstructor">Ctx</a> <a id="486" href="Bitcoin.Script.Base.html#486" class="Bound">n</a><a id="487" class="Symbol">)</a> <a id="489" class="Symbol">=</a> <a id="491" href="Bitcoin.Script.Base.html#486" class="Bound">n</a>

<a id="494" class="Keyword">data</a> <a id="ScriptType"></a><a id="499" href="Bitcoin.Script.Base.html#499" class="Datatype">ScriptType</a> <a id="510" class="Symbol">:</a> <a id="512" class="PrimitiveType">Set</a> <a id="516" class="Keyword">where</a>
  <a id="ScriptType.`Bool"></a><a id="524" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a> <a id="ScriptType.`ℤ"></a><a id="530" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a> <a id="533" class="Symbol">:</a> <a id="535" href="Bitcoin.Script.Base.html#499" class="Datatype">ScriptType</a>
<a id="546" class="Keyword">unquoteDecl</a> <a id="DecEqᵗʸ"></a><a id="558" href="Bitcoin.Script.Base.html#558" class="Function">DecEqᵗʸ</a> <a id="566" class="Symbol">=</a> <a id="568" href="Prelude.Generics.html#5660" class="Function">DERIVE</a> <a id="575" href="Prelude.DecEq.html#553" class="Record">DecEq</a> <a id="581" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="583" class="Keyword">quote</a> <a id="589" href="Bitcoin.Script.Base.html#499" class="Datatype">ScriptType</a> <a id="600" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="602" href="Bitcoin.Script.Base.html#558" class="Function">DecEqᵗʸ</a> <a id="610" href="Data.List.Base.html#4458" class="Function Operator">]</a>

<a id="613" class="Keyword">variable</a>
  <a id="624" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="628" href="Bitcoin.Script.Base.html#628" class="Generalizable">ctx′</a> <a id="633" class="Symbol">:</a> <a id="635" href="Bitcoin.Script.Base.html#323" class="Datatype">ScriptContext</a>
  <a id="651" href="Bitcoin.Script.Base.html#651" class="Generalizable">ty</a> <a id="654" href="Bitcoin.Script.Base.html#654" class="Generalizable">ty′</a> <a id="658" class="Symbol">:</a> <a id="660" href="Bitcoin.Script.Base.html#499" class="Datatype">ScriptType</a>

<a id="672" class="Keyword">data</a> <a id="Script"></a><a id="677" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="684" class="Symbol">:</a> <a id="686" href="Bitcoin.Script.Base.html#323" class="Datatype">ScriptContext</a>  <a id="701" class="Comment">-- size of the environment/context</a>
            <a id="748" class="Symbol">→</a> <a id="750" href="Bitcoin.Script.Base.html#499" class="Datatype">ScriptType</a>     <a id="765" class="Comment">-- result type</a>
            <a id="792" class="Symbol">→</a> <a id="794" class="PrimitiveType">Set</a> <a id="798" class="Keyword">where</a>

  <a id="807" class="Comment">-- Variables</a>
  <a id="Script.var"></a><a id="822" href="Bitcoin.Script.Base.html#822" class="InductiveConstructor">var</a>  <a id="827" class="Symbol">:</a> <a id="829" href="Data.Fin.Base.html#1066" class="Datatype">Fin</a> <a id="833" href="Bitcoin.BasicTypes.html#302" class="Generalizable">n</a> <a id="835" class="Symbol">→</a> <a id="837" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="844" class="Symbol">(</a><a id="845" href="Bitcoin.Script.Base.html#351" class="InductiveConstructor">Ctx</a> <a id="849" href="Bitcoin.BasicTypes.html#302" class="Generalizable">n</a><a id="850" class="Symbol">)</a> <a id="852" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a>

  <a id="858" class="Comment">-- Arithmetic/boolean operations</a>
  <a id="Script.`"></a><a id="893" href="Bitcoin.Script.Base.html#893" class="InductiveConstructor">`</a>    <a id="898" class="Symbol">:</a> <a id="900" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a> <a id="902" class="Symbol">→</a> <a id="904" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="911" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="915" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a>
  <a id="Script._`+_"></a><a id="920" href="Bitcoin.Script.Base.html#920" class="InductiveConstructor Operator">_`+_</a> <a id="925" class="Symbol">:</a> <a id="927" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="934" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="938" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a> <a id="941" class="Symbol">→</a> <a id="943" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="950" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="954" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a> <a id="957" class="Symbol">→</a> <a id="959" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="966" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="970" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a>
  <a id="Script._`-_"></a><a id="975" href="Bitcoin.Script.Base.html#975" class="InductiveConstructor Operator">_`-_</a> <a id="980" class="Symbol">:</a> <a id="982" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="989" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="993" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a> <a id="996" class="Symbol">→</a> <a id="998" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1005" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1009" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a> <a id="1012" class="Symbol">→</a> <a id="1014" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1021" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1025" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a>
  <a id="Script._`=_"></a><a id="1030" href="Bitcoin.Script.Base.html#1030" class="InductiveConstructor Operator">_`=_</a> <a id="1035" class="Symbol">:</a> <a id="1037" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1044" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1048" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a> <a id="1051" class="Symbol">→</a> <a id="1053" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1060" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1064" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a> <a id="1067" class="Symbol">→</a> <a id="1069" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1076" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1080" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a>
  <a id="Script._`&lt;_"></a><a id="1088" href="Bitcoin.Script.Base.html#1088" class="InductiveConstructor Operator">_`&lt;_</a> <a id="1093" class="Symbol">:</a> <a id="1095" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1102" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1106" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a> <a id="1109" class="Symbol">→</a> <a id="1111" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1118" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1122" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a> <a id="1125" class="Symbol">→</a> <a id="1127" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1134" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1138" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a>

  <a id="1147" class="Comment">-- Conditional statement</a>
  <a id="Script.`if_then_else_"></a><a id="1174" href="Bitcoin.Script.Base.html#1174" class="InductiveConstructor Operator">`if_then_else_</a> <a id="1189" class="Symbol">:</a> <a id="1191" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1198" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1202" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a> <a id="1208" class="Symbol">→</a> <a id="1210" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1217" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1221" href="Bitcoin.Script.Base.html#651" class="Generalizable">ty</a> <a id="1224" class="Symbol">→</a> <a id="1226" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1233" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1237" href="Bitcoin.Script.Base.html#651" class="Generalizable">ty</a> <a id="1240" class="Symbol">→</a> <a id="1242" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1249" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1253" href="Bitcoin.Script.Base.html#651" class="Generalizable">ty</a>

  <a id="1259" class="Comment">-- Size</a>
  <a id="Script.∣_∣"></a><a id="1269" href="Bitcoin.Script.Base.html#1269" class="InductiveConstructor Operator">∣_∣</a> <a id="1273" class="Symbol">:</a> <a id="1275" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1282" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1286" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a> <a id="1289" class="Symbol">→</a> <a id="1291" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1298" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1302" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a>

  <a id="1308" class="Comment">-- Hashing</a>
  <a id="Script.hash"></a><a id="1321" href="Bitcoin.Script.Base.html#1321" class="InductiveConstructor">hash</a> <a id="1326" class="Symbol">:</a> <a id="1328" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1335" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1339" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a> <a id="1342" class="Symbol">→</a> <a id="1344" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1351" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1355" href="Bitcoin.Script.Base.html#530" class="InductiveConstructor">`ℤ</a>

  <a id="1361" class="Comment">-- Signature verification</a>
  <a id="Script.versig"></a><a id="1389" href="Bitcoin.Script.Base.html#1389" class="InductiveConstructor">versig</a> <a id="1396" class="Symbol">:</a> <a id="1398" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1403" href="Bitcoin.Crypto.html#345" class="Record">KeyPair</a> <a id="1411" class="Symbol">→</a> <a id="1413" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1418" class="Symbol">(</a><a id="1419" href="Data.Fin.Base.html#1066" class="Datatype">Fin</a> <a id="1423" href="Bitcoin.BasicTypes.html#302" class="Generalizable">n</a><a id="1424" class="Symbol">)</a> <a id="1426" class="Symbol">→</a> <a id="1428" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1435" class="Symbol">(</a><a id="1436" href="Bitcoin.Script.Base.html#351" class="InductiveConstructor">Ctx</a> <a id="1440" href="Bitcoin.BasicTypes.html#302" class="Generalizable">n</a><a id="1441" class="Symbol">)</a> <a id="1443" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a>

  <a id="1452" class="Comment">-- Temporal constraints</a>
  <a id="Script.absAfter_⇒_"></a><a id="1478" href="Bitcoin.Script.Base.html#1478" class="InductiveConstructor Operator">absAfter_⇒_</a> <a id="1490" class="Symbol">:</a> <a id="1492" href="Bitcoin.BasicTypes.html#245" class="Function">Time</a> <a id="1497" class="Symbol">→</a> <a id="1499" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1506" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1510" href="Bitcoin.Script.Base.html#651" class="Generalizable">ty</a> <a id="1513" class="Symbol">→</a> <a id="1515" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1522" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1526" href="Bitcoin.Script.Base.html#651" class="Generalizable">ty</a>
  <a id="Script.relAfter_⇒_"></a><a id="1531" href="Bitcoin.Script.Base.html#1531" class="InductiveConstructor Operator">relAfter_⇒_</a> <a id="1543" class="Symbol">:</a> <a id="1545" href="Bitcoin.BasicTypes.html#245" class="Function">Time</a> <a id="1550" class="Symbol">→</a> <a id="1552" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1559" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1563" href="Bitcoin.Script.Base.html#651" class="Generalizable">ty</a> <a id="1566" class="Symbol">→</a> <a id="1568" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1575" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1579" href="Bitcoin.Script.Base.html#651" class="Generalizable">ty</a>

<a id="∃Script"></a><a id="1583" href="Bitcoin.Script.Base.html#1583" class="Function">∃Script</a> <a id="1591" class="Symbol">=</a> <a id="1593" href="Data.Product.html#1788" class="Function">∃[</a> <a id="1596" href="Bitcoin.Script.Base.html#1596" class="Bound">ctx</a> <a id="1600" href="Data.Product.html#1788" class="Function">]</a> <a id="1602" href="Data.Product.html#1788" class="Function">∃[</a> <a id="1605" href="Bitcoin.Script.Base.html#1605" class="Bound">ty</a> <a id="1608" href="Data.Product.html#1788" class="Function">]</a> <a id="1610" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1617" href="Bitcoin.Script.Base.html#1596" class="Bound">ctx</a> <a id="1621" href="Bitcoin.Script.Base.html#1605" class="Bound">ty</a>

<a id="1625" class="Keyword">unquoteDecl</a> <a id="DecEqˢ"></a><a id="1637" href="Bitcoin.Script.Base.html#1637" class="Function">DecEqˢ</a> <a id="1644" class="Symbol">=</a> <a id="1646" href="Prelude.Generics.html#5660" class="Function">DERIVE</a> <a id="1653" href="Prelude.DecEq.html#553" class="Record">DecEq</a> <a id="1659" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="1661" class="Keyword">quote</a> <a id="1667" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1674" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1676" href="Bitcoin.Script.Base.html#1637" class="Function">DecEqˢ</a> <a id="1683" href="Data.List.Base.html#4458" class="Function Operator">]</a>

<a id="1686" class="Comment">-- smart constructors</a>
<a id="`false"></a><a id="1708" href="Bitcoin.Script.Base.html#1708" class="Function">`false</a> <a id="1715" class="Symbol">:</a> <a id="1717" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1724" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1728" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a>
<a id="1734" href="Bitcoin.Script.Base.html#1708" class="Function">`false</a> <a id="1741" class="Symbol">=</a> <a id="1743" href="Bitcoin.Script.Base.html#893" class="InductiveConstructor">`</a> <a id="1745" class="Symbol">(</a><a id="1746" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="1748" class="Number">1</a><a id="1749" class="Symbol">)</a> <a id="1751" href="Bitcoin.Script.Base.html#1030" class="InductiveConstructor Operator">`=</a> <a id="1754" href="Bitcoin.Script.Base.html#893" class="InductiveConstructor">`</a> <a id="1756" class="Symbol">(</a><a id="1757" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="1759" class="Number">0</a><a id="1760" class="Symbol">)</a>

<a id="`true"></a><a id="1763" href="Bitcoin.Script.Base.html#1763" class="Function">`true</a> <a id="1769" class="Symbol">:</a> <a id="1771" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1778" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1782" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a>
<a id="1788" href="Bitcoin.Script.Base.html#1763" class="Function">`true</a> <a id="1794" class="Symbol">=</a> <a id="1796" href="Bitcoin.Script.Base.html#893" class="InductiveConstructor">`</a> <a id="1798" class="Symbol">(</a><a id="1799" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="1801" class="Number">1</a><a id="1802" class="Symbol">)</a> <a id="1804" href="Bitcoin.Script.Base.html#1030" class="InductiveConstructor Operator">`=</a> <a id="1807" href="Bitcoin.Script.Base.html#893" class="InductiveConstructor">`</a> <a id="1809" class="Symbol">(</a><a id="1810" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="1812" class="Number">1</a><a id="1813" class="Symbol">)</a>

<a id="_`∧_"></a><a id="1816" href="Bitcoin.Script.Base.html#1816" class="Function Operator">_`∧_</a> <a id="1821" class="Symbol">:</a> <a id="1823" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1830" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1834" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a> <a id="1840" class="Symbol">→</a> <a id="1842" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1849" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1853" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a> <a id="1859" class="Symbol">→</a> <a id="1861" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1868" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1872" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a>
<a id="1878" href="Bitcoin.Script.Base.html#1878" class="Bound">e</a> <a id="1880" href="Bitcoin.Script.Base.html#1816" class="Function Operator">`∧</a> <a id="1883" href="Bitcoin.Script.Base.html#1883" class="Bound">e′</a> <a id="1886" class="Symbol">=</a> <a id="1888" href="Bitcoin.Script.Base.html#1174" class="InductiveConstructor Operator">`if</a> <a id="1892" href="Bitcoin.Script.Base.html#1878" class="Bound">e</a> <a id="1894" href="Bitcoin.Script.Base.html#1174" class="InductiveConstructor Operator">then</a> <a id="1899" href="Bitcoin.Script.Base.html#1883" class="Bound">e′</a> <a id="1902" href="Bitcoin.Script.Base.html#1174" class="InductiveConstructor Operator">else</a> <a id="1907" href="Bitcoin.Script.Base.html#1708" class="Function">`false</a>

<a id="_`∨_"></a><a id="1915" href="Bitcoin.Script.Base.html#1915" class="Function Operator">_`∨_</a> <a id="1920" class="Symbol">:</a> <a id="1922" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1929" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1933" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a> <a id="1939" class="Symbol">→</a> <a id="1941" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1948" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1952" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a> <a id="1958" class="Symbol">→</a> <a id="1960" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="1967" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="1971" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a>
<a id="1977" href="Bitcoin.Script.Base.html#1977" class="Bound">e</a> <a id="1979" href="Bitcoin.Script.Base.html#1915" class="Function Operator">`∨</a> <a id="1982" href="Bitcoin.Script.Base.html#1982" class="Bound">e′</a> <a id="1985" class="Symbol">=</a> <a id="1987" href="Bitcoin.Script.Base.html#1174" class="InductiveConstructor Operator">`if</a> <a id="1991" href="Bitcoin.Script.Base.html#1977" class="Bound">e</a> <a id="1993" href="Bitcoin.Script.Base.html#1174" class="InductiveConstructor Operator">then</a> <a id="1998" href="Bitcoin.Script.Base.html#1763" class="Function">`true</a> <a id="2004" href="Bitcoin.Script.Base.html#1174" class="InductiveConstructor Operator">else</a> <a id="2009" href="Bitcoin.Script.Base.html#1982" class="Bound">e′</a>

<a id="`not"></a><a id="2013" href="Bitcoin.Script.Base.html#2013" class="Function">`not</a> <a id="2018" class="Symbol">:</a> <a id="2020" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="2027" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="2031" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a> <a id="2037" class="Symbol">→</a> <a id="2039" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="2046" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="2050" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a>
<a id="2056" href="Bitcoin.Script.Base.html#2013" class="Function">`not</a> <a id="2061" href="Bitcoin.Script.Base.html#2061" class="Bound">e</a> <a id="2063" class="Symbol">=</a> <a id="2065" href="Bitcoin.Script.Base.html#1174" class="InductiveConstructor Operator">`if</a> <a id="2069" href="Bitcoin.Script.Base.html#2061" class="Bound">e</a> <a id="2071" href="Bitcoin.Script.Base.html#1174" class="InductiveConstructor Operator">then</a> <a id="2076" href="Bitcoin.Script.Base.html#1708" class="Function">`false</a> <a id="2083" href="Bitcoin.Script.Base.html#1174" class="InductiveConstructor Operator">else</a> <a id="2088" href="Bitcoin.Script.Base.html#1763" class="Function">`true</a>

<a id="2095" class="Keyword">data</a> <a id="BitcoinScript"></a><a id="2100" href="Bitcoin.Script.Base.html#2100" class="Datatype">BitcoinScript</a> <a id="2114" class="Symbol">(</a><a id="2115" href="Bitcoin.Script.Base.html#2115" class="Bound">ctx</a> <a id="2119" class="Symbol">:</a> <a id="2121" href="Bitcoin.Script.Base.html#323" class="Datatype">ScriptContext</a><a id="2134" class="Symbol">)</a> <a id="2136" class="Symbol">:</a> <a id="2138" class="PrimitiveType">Set</a> <a id="2142" class="Keyword">where</a>
  <a id="BitcoinScript.ƛ_"></a><a id="2150" href="Bitcoin.Script.Base.html#2150" class="InductiveConstructor Operator">ƛ_</a> <a id="2153" class="Symbol">:</a> <a id="2155" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="2162" href="Bitcoin.Script.Base.html#2115" class="Bound">ctx</a> <a id="2166" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a> <a id="2172" class="Symbol">→</a> <a id="2174" href="Bitcoin.Script.Base.html#2100" class="Datatype">BitcoinScript</a> <a id="2188" href="Bitcoin.Script.Base.html#2115" class="Bound">ctx</a>

<a id="2193" class="Keyword">unquoteDecl</a> <a id="DecEqᵇˢ"></a><a id="2205" href="Bitcoin.Script.Base.html#2205" class="Function">DecEqᵇˢ</a> <a id="2213" class="Symbol">=</a> <a id="2215" href="Prelude.Generics.html#5660" class="Function">DERIVE</a> <a id="2222" href="Prelude.DecEq.html#553" class="Record">DecEq</a> <a id="2228" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="2230" class="Keyword">quote</a> <a id="2236" href="Bitcoin.Script.Base.html#2100" class="Datatype">BitcoinScript</a> <a id="2250" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2252" href="Bitcoin.Script.Base.html#2205" class="Function">DecEqᵇˢ</a> <a id="2260" href="Data.List.Base.html#4458" class="Function Operator">]</a>

<a id="∃BitcoinScript"></a><a id="2263" href="Bitcoin.Script.Base.html#2263" class="Function">∃BitcoinScript</a> <a id="2278" class="Symbol">=</a> <a id="2280" href="Data.Product.html#1788" class="Function">∃[</a> <a id="2283" href="Bitcoin.Script.Base.html#2283" class="Bound">ctx</a> <a id="2287" href="Data.Product.html#1788" class="Function">]</a> <a id="2289" href="Bitcoin.Script.Base.html#2100" class="Datatype">BitcoinScript</a> <a id="2303" href="Bitcoin.Script.Base.html#2283" class="Bound">ctx</a>

<a id="2308" class="Comment">-- operators&#39; precedence</a>
<a id="2333" class="Keyword">infix</a>  <a id="2340" class="Number">5</a> <a id="2342" href="Bitcoin.Script.Base.html#920" class="InductiveConstructor Operator">_`+_</a>
<a id="2347" class="Keyword">infix</a>  <a id="2354" class="Number">5</a> <a id="2356" href="Bitcoin.Script.Base.html#975" class="InductiveConstructor Operator">_`-_</a>
<a id="2361" class="Keyword">infix</a>  <a id="2368" class="Number">4</a> <a id="2370" href="Bitcoin.Script.Base.html#1030" class="InductiveConstructor Operator">_`=_</a>
<a id="2375" class="Keyword">infix</a>  <a id="2382" class="Number">4</a> <a id="2384" href="Bitcoin.Script.Base.html#1088" class="InductiveConstructor Operator">_`&lt;_</a>
<a id="2389" class="Keyword">infixr</a> <a id="2396" class="Number">3</a> <a id="2398" href="Bitcoin.Script.Base.html#1915" class="Function Operator">_`∨_</a>
<a id="2403" class="Keyword">infixr</a> <a id="2410" class="Number">3</a> <a id="2412" href="Bitcoin.Script.Base.html#1816" class="Function Operator">_`∧_</a>
<a id="2417" class="Keyword">infix</a>  <a id="2424" class="Number">2</a> <a id="2426" href="Bitcoin.Script.Base.html#1174" class="InductiveConstructor Operator">`if_then_else_</a>
<a id="2441" class="Keyword">infix</a>  <a id="2448" class="Number">2</a> <a id="2450" href="Bitcoin.Script.Base.html#1478" class="InductiveConstructor Operator">absAfter_⇒_</a>
<a id="2462" class="Keyword">infix</a>  <a id="2469" class="Number">2</a> <a id="2471" href="Bitcoin.Script.Base.html#1531" class="InductiveConstructor Operator">relAfter_⇒_</a>
<a id="2483" class="Keyword">infix</a>  <a id="2490" class="Number">1</a> <a id="2492" href="Bitcoin.Script.Base.html#2150" class="InductiveConstructor Operator">ƛ_</a>

<a id="2496" href="Bitcoin.Script.Base.html#2496" class="Function">_</a> <a id="2498" class="Symbol">:</a> <a id="2500" href="Bitcoin.Script.Base.html#2100" class="Datatype">BitcoinScript</a> <a id="2514" class="Symbol">(</a><a id="2515" href="Bitcoin.Script.Base.html#351" class="InductiveConstructor">Ctx</a> <a id="2519" class="Number">2</a><a id="2520" class="Symbol">)</a>
<a id="2522" class="Symbol">_</a> <a id="2524" class="Symbol">=</a> <a id="2526" href="Bitcoin.Script.Base.html#2150" class="InductiveConstructor Operator">ƛ</a> <a id="2528" href="Bitcoin.Script.Base.html#1389" class="InductiveConstructor">versig</a> <a id="2535" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="2538" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="2540" href="Data.Fin.Patterns.html#390" class="InductiveConstructor">0F</a> <a id="2543" href="Data.List.Base.html#4458" class="Function Operator">]</a> <a id="2545" href="Bitcoin.Script.Base.html#1816" class="Function Operator">`∧</a> <a id="2548" class="Symbol">(</a><a id="2549" href="Bitcoin.Script.Base.html#1321" class="InductiveConstructor">hash</a> <a id="2554" class="Symbol">(</a><a id="2555" href="Bitcoin.Script.Base.html#822" class="InductiveConstructor">var</a> <a id="2559" href="Data.Fin.Patterns.html#408" class="InductiveConstructor">1F</a><a id="2561" class="Symbol">)</a> <a id="2563" href="Bitcoin.Script.Base.html#1030" class="InductiveConstructor Operator">`=</a> <a id="2566" href="Bitcoin.Script.Base.html#1321" class="InductiveConstructor">hash</a> <a id="2571" class="Symbol">(</a><a id="2572" href="Bitcoin.Script.Base.html#822" class="InductiveConstructor">var</a> <a id="2576" href="Data.Fin.Patterns.html#390" class="InductiveConstructor">0F</a><a id="2578" class="Symbol">))</a>

<a id="2582" class="Comment">-- Combining scripts</a>
<a id="mapFin"></a><a id="2603" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="2610" class="Symbol">:</a> <a id="2612" class="Symbol">∀</a> <a id="2614" class="Symbol">{</a><a id="2615" href="Bitcoin.Script.Base.html#2615" class="Bound">n</a> <a id="2617" href="Bitcoin.Script.Base.html#2617" class="Bound">m</a><a id="2618" class="Symbol">}</a> <a id="2620" class="Symbol">→</a> <a id="2622" href="Bitcoin.Script.Base.html#2615" class="Bound">n</a> <a id="2624" href="Data.Nat.Base.html#937" class="Datatype Operator">≤</a> <a id="2626" href="Bitcoin.Script.Base.html#2617" class="Bound">m</a> <a id="2628" class="Symbol">→</a> <a id="2630" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="2637" class="Symbol">(</a><a id="2638" href="Bitcoin.Script.Base.html#351" class="InductiveConstructor">Ctx</a> <a id="2642" href="Bitcoin.Script.Base.html#2615" class="Bound">n</a><a id="2643" class="Symbol">)</a> <a id="2645" href="Bitcoin.Script.Base.html#651" class="Generalizable">ty</a> <a id="2648" class="Symbol">→</a> <a id="2650" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="2657" class="Symbol">(</a><a id="2658" href="Bitcoin.Script.Base.html#351" class="InductiveConstructor">Ctx</a> <a id="2662" href="Bitcoin.Script.Base.html#2617" class="Bound">m</a><a id="2663" class="Symbol">)</a> <a id="2665" href="Bitcoin.Script.Base.html#651" class="Generalizable">ty</a>
<a id="2668" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="2675" href="Bitcoin.Script.Base.html#2675" class="Bound">n≤m</a> <a id="2679" class="Symbol">(</a><a id="2680" href="Bitcoin.Script.Base.html#822" class="InductiveConstructor">var</a> <a id="2684" href="Bitcoin.Script.Base.html#2684" class="Bound">x</a><a id="2685" class="Symbol">)</a>                 <a id="2703" class="Symbol">=</a> <a id="2705" href="Bitcoin.Script.Base.html#822" class="InductiveConstructor">var</a> <a id="2709" class="Symbol">(</a><a id="2710" href="Data.Fin.Base.html#3060" class="Function">F.inject≤</a> <a id="2720" href="Bitcoin.Script.Base.html#2684" class="Bound">x</a> <a id="2722" href="Bitcoin.Script.Base.html#2675" class="Bound">n≤m</a><a id="2725" class="Symbol">)</a>
<a id="2727" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="2734" href="Bitcoin.Script.Base.html#2734" class="Bound">n≤m</a> <a id="2738" class="Symbol">(</a><a id="2739" href="Bitcoin.Script.Base.html#893" class="InductiveConstructor">`</a> <a id="2741" href="Bitcoin.Script.Base.html#2741" class="Bound">x</a><a id="2742" class="Symbol">)</a>                   <a id="2762" class="Symbol">=</a> <a id="2764" href="Bitcoin.Script.Base.html#893" class="InductiveConstructor">`</a> <a id="2766" href="Bitcoin.Script.Base.html#2741" class="Bound">x</a>
<a id="2768" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="2775" href="Bitcoin.Script.Base.html#2775" class="Bound">n≤m</a> <a id="2779" class="Symbol">(</a><a id="2780" href="Bitcoin.Script.Base.html#2780" class="Bound">s</a> <a id="2782" href="Bitcoin.Script.Base.html#920" class="InductiveConstructor Operator">`+</a> <a id="2785" href="Bitcoin.Script.Base.html#2785" class="Bound">s₁</a><a id="2787" class="Symbol">)</a>               <a id="2803" class="Symbol">=</a> <a id="2805" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="2812" href="Bitcoin.Script.Base.html#2775" class="Bound">n≤m</a> <a id="2816" href="Bitcoin.Script.Base.html#2780" class="Bound">s</a> <a id="2818" href="Bitcoin.Script.Base.html#920" class="InductiveConstructor Operator">`+</a> <a id="2821" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="2828" href="Bitcoin.Script.Base.html#2775" class="Bound">n≤m</a> <a id="2832" href="Bitcoin.Script.Base.html#2785" class="Bound">s₁</a>
<a id="2835" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="2842" href="Bitcoin.Script.Base.html#2842" class="Bound">n≤m</a> <a id="2846" class="Symbol">(</a><a id="2847" href="Bitcoin.Script.Base.html#2847" class="Bound">s</a> <a id="2849" href="Bitcoin.Script.Base.html#975" class="InductiveConstructor Operator">`-</a> <a id="2852" href="Bitcoin.Script.Base.html#2852" class="Bound">s₁</a><a id="2854" class="Symbol">)</a>               <a id="2870" class="Symbol">=</a> <a id="2872" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="2879" href="Bitcoin.Script.Base.html#2842" class="Bound">n≤m</a> <a id="2883" href="Bitcoin.Script.Base.html#2847" class="Bound">s</a> <a id="2885" href="Bitcoin.Script.Base.html#975" class="InductiveConstructor Operator">`-</a> <a id="2888" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="2895" href="Bitcoin.Script.Base.html#2842" class="Bound">n≤m</a> <a id="2899" href="Bitcoin.Script.Base.html#2852" class="Bound">s₁</a>
<a id="2902" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="2909" href="Bitcoin.Script.Base.html#2909" class="Bound">n≤m</a> <a id="2913" class="Symbol">(</a><a id="2914" href="Bitcoin.Script.Base.html#2914" class="Bound">s</a> <a id="2916" href="Bitcoin.Script.Base.html#1030" class="InductiveConstructor Operator">`=</a> <a id="2919" href="Bitcoin.Script.Base.html#2919" class="Bound">s₁</a><a id="2921" class="Symbol">)</a>               <a id="2937" class="Symbol">=</a> <a id="2939" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="2946" href="Bitcoin.Script.Base.html#2909" class="Bound">n≤m</a> <a id="2950" href="Bitcoin.Script.Base.html#2914" class="Bound">s</a> <a id="2952" href="Bitcoin.Script.Base.html#1030" class="InductiveConstructor Operator">`=</a> <a id="2955" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="2962" href="Bitcoin.Script.Base.html#2909" class="Bound">n≤m</a> <a id="2966" href="Bitcoin.Script.Base.html#2919" class="Bound">s₁</a>
<a id="2969" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="2976" href="Bitcoin.Script.Base.html#2976" class="Bound">n≤m</a> <a id="2980" class="Symbol">(</a><a id="2981" href="Bitcoin.Script.Base.html#2981" class="Bound">s</a> <a id="2983" href="Bitcoin.Script.Base.html#1088" class="InductiveConstructor Operator">`&lt;</a> <a id="2986" href="Bitcoin.Script.Base.html#2986" class="Bound">s₁</a><a id="2988" class="Symbol">)</a>               <a id="3004" class="Symbol">=</a> <a id="3006" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="3013" href="Bitcoin.Script.Base.html#2976" class="Bound">n≤m</a> <a id="3017" href="Bitcoin.Script.Base.html#2981" class="Bound">s</a> <a id="3019" href="Bitcoin.Script.Base.html#1088" class="InductiveConstructor Operator">`&lt;</a> <a id="3022" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="3029" href="Bitcoin.Script.Base.html#2976" class="Bound">n≤m</a> <a id="3033" href="Bitcoin.Script.Base.html#2986" class="Bound">s₁</a>
<a id="3036" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="3043" href="Bitcoin.Script.Base.html#3043" class="Bound">n≤m</a> <a id="3047" class="Symbol">(</a><a id="3048" href="Bitcoin.Script.Base.html#1174" class="InductiveConstructor Operator">`if</a> <a id="3052" href="Bitcoin.Script.Base.html#3052" class="Bound">s</a> <a id="3054" href="Bitcoin.Script.Base.html#1174" class="InductiveConstructor Operator">then</a> <a id="3059" href="Bitcoin.Script.Base.html#3059" class="Bound">s₁</a> <a id="3062" href="Bitcoin.Script.Base.html#1174" class="InductiveConstructor Operator">else</a> <a id="3067" href="Bitcoin.Script.Base.html#3067" class="Bound">s₂</a><a id="3069" class="Symbol">)</a> <a id="3071" class="Symbol">=</a> <a id="3073" href="Bitcoin.Script.Base.html#1174" class="InductiveConstructor Operator">`if</a> <a id="3077" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="3084" href="Bitcoin.Script.Base.html#3043" class="Bound">n≤m</a> <a id="3088" href="Bitcoin.Script.Base.html#3052" class="Bound">s</a> <a id="3090" href="Bitcoin.Script.Base.html#1174" class="InductiveConstructor Operator">then</a> <a id="3095" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="3102" href="Bitcoin.Script.Base.html#3043" class="Bound">n≤m</a> <a id="3106" href="Bitcoin.Script.Base.html#3059" class="Bound">s₁</a> <a id="3109" href="Bitcoin.Script.Base.html#1174" class="InductiveConstructor Operator">else</a> <a id="3114" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="3121" href="Bitcoin.Script.Base.html#3043" class="Bound">n≤m</a> <a id="3125" href="Bitcoin.Script.Base.html#3067" class="Bound">s₂</a>
<a id="3128" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="3135" href="Bitcoin.Script.Base.html#3135" class="Bound">n≤m</a> <a id="3139" href="Bitcoin.Script.Base.html#1269" class="InductiveConstructor Operator">∣</a> <a id="3141" href="Bitcoin.Script.Base.html#3141" class="Bound">s</a> <a id="3143" href="Bitcoin.Script.Base.html#1269" class="InductiveConstructor Operator">∣</a>                   <a id="3163" class="Symbol">=</a> <a id="3165" href="Bitcoin.Script.Base.html#1269" class="InductiveConstructor Operator">∣</a> <a id="3167" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="3174" href="Bitcoin.Script.Base.html#3135" class="Bound">n≤m</a> <a id="3178" href="Bitcoin.Script.Base.html#3141" class="Bound">s</a> <a id="3180" href="Bitcoin.Script.Base.html#1269" class="InductiveConstructor Operator">∣</a>
<a id="3182" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="3189" href="Bitcoin.Script.Base.html#3189" class="Bound">n≤m</a> <a id="3193" class="Symbol">(</a><a id="3194" href="Bitcoin.Script.Base.html#1321" class="InductiveConstructor">hash</a> <a id="3199" href="Bitcoin.Script.Base.html#3199" class="Bound">s</a><a id="3200" class="Symbol">)</a>                <a id="3217" class="Symbol">=</a> <a id="3219" href="Bitcoin.Script.Base.html#1321" class="InductiveConstructor">hash</a> <a id="3224" class="Symbol">(</a><a id="3225" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="3232" href="Bitcoin.Script.Base.html#3189" class="Bound">n≤m</a> <a id="3236" href="Bitcoin.Script.Base.html#3199" class="Bound">s</a><a id="3237" class="Symbol">)</a>
<a id="3239" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="3246" href="Bitcoin.Script.Base.html#3246" class="Bound">n≤m</a> <a id="3250" class="Symbol">(</a><a id="3251" href="Bitcoin.Script.Base.html#1389" class="InductiveConstructor">versig</a> <a id="3258" href="Bitcoin.Script.Base.html#3258" class="Bound">x</a> <a id="3260" href="Bitcoin.Script.Base.html#3260" class="Bound">x₁</a><a id="3262" class="Symbol">)</a>           <a id="3274" class="Symbol">=</a> <a id="3276" href="Bitcoin.Script.Base.html#1389" class="InductiveConstructor">versig</a> <a id="3283" href="Bitcoin.Script.Base.html#3258" class="Bound">x</a> <a id="3285" class="Symbol">(</a><a id="3286" href="Data.List.Base.html#1497" class="Function">map</a> <a id="3290" class="Symbol">(</a><a id="3291" href="Function.Base.html#1193" class="Function">flip</a> <a id="3296" href="Data.Fin.Base.html#3060" class="Function">F.inject≤</a> <a id="3306" href="Bitcoin.Script.Base.html#3246" class="Bound">n≤m</a><a id="3309" class="Symbol">)</a> <a id="3311" href="Bitcoin.Script.Base.html#3260" class="Bound">x₁</a><a id="3313" class="Symbol">)</a>
<a id="3315" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="3322" href="Bitcoin.Script.Base.html#3322" class="Bound">n≤m</a> <a id="3326" class="Symbol">(</a><a id="3327" href="Bitcoin.Script.Base.html#1478" class="InductiveConstructor Operator">absAfter</a> <a id="3336" href="Bitcoin.Script.Base.html#3336" class="Bound">x</a> <a id="3338" href="Bitcoin.Script.Base.html#1478" class="InductiveConstructor Operator">⇒</a> <a id="3340" href="Bitcoin.Script.Base.html#3340" class="Bound">s</a><a id="3341" class="Symbol">)</a>        <a id="3350" class="Symbol">=</a> <a id="3352" href="Bitcoin.Script.Base.html#1478" class="InductiveConstructor Operator">absAfter</a> <a id="3361" href="Bitcoin.Script.Base.html#3336" class="Bound">x</a> <a id="3363" href="Bitcoin.Script.Base.html#1478" class="InductiveConstructor Operator">⇒</a> <a id="3365" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="3372" href="Bitcoin.Script.Base.html#3322" class="Bound">n≤m</a> <a id="3376" href="Bitcoin.Script.Base.html#3340" class="Bound">s</a>
<a id="3378" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="3385" href="Bitcoin.Script.Base.html#3385" class="Bound">n≤m</a> <a id="3389" class="Symbol">(</a><a id="3390" href="Bitcoin.Script.Base.html#1531" class="InductiveConstructor Operator">relAfter</a> <a id="3399" href="Bitcoin.Script.Base.html#3399" class="Bound">x</a> <a id="3401" href="Bitcoin.Script.Base.html#1531" class="InductiveConstructor Operator">⇒</a> <a id="3403" href="Bitcoin.Script.Base.html#3403" class="Bound">s</a><a id="3404" class="Symbol">)</a>        <a id="3413" class="Symbol">=</a> <a id="3415" href="Bitcoin.Script.Base.html#1531" class="InductiveConstructor Operator">relAfter</a> <a id="3424" href="Bitcoin.Script.Base.html#3399" class="Bound">x</a> <a id="3426" href="Bitcoin.Script.Base.html#1531" class="InductiveConstructor Operator">⇒</a> <a id="3428" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="3435" href="Bitcoin.Script.Base.html#3385" class="Bound">n≤m</a> <a id="3439" href="Bitcoin.Script.Base.html#3403" class="Bound">s</a>

<a id="⋁"></a><a id="3442" href="Bitcoin.Script.Base.html#3442" class="Function">⋁</a> <a id="3444" class="Symbol">:</a> <a id="3446" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3451" class="Symbol">(</a><a id="3452" href="Data.Product.html#1788" class="Function">∃[</a> <a id="3455" href="Bitcoin.Script.Base.html#3455" class="Bound">ctx</a> <a id="3459" href="Data.Product.html#1788" class="Function">]</a> <a id="3461" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="3468" href="Bitcoin.Script.Base.html#3455" class="Bound">ctx</a> <a id="3472" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a><a id="3477" class="Symbol">)</a> <a id="3479" class="Symbol">→</a> <a id="3481" href="Data.Product.html#1788" class="Function">∃[</a> <a id="3484" href="Bitcoin.Script.Base.html#3484" class="Bound">ctx′</a> <a id="3489" href="Data.Product.html#1788" class="Function">]</a> <a id="3491" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="3498" href="Bitcoin.Script.Base.html#3484" class="Bound">ctx′</a> <a id="3503" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a>
<a id="3509" href="Bitcoin.Script.Base.html#3442" class="Function">⋁</a> <a id="3511" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>       <a id="3520" class="Symbol">=</a> <a id="3522" href="Bitcoin.Script.Base.html#351" class="InductiveConstructor">Ctx</a> <a id="3526" class="Number">0</a> <a id="3528" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3530" href="Bitcoin.Script.Base.html#1763" class="Function">`true</a>
<a id="3536" href="Bitcoin.Script.Base.html#3442" class="Function">⋁</a> <a id="3538" class="Symbol">(</a><a id="3539" href="Bitcoin.Script.Base.html#3539" class="Bound">s</a> <a id="3541" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3543" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="3545" class="Symbol">)</a> <a id="3547" class="Symbol">=</a> <a id="3549" href="Bitcoin.Script.Base.html#3539" class="Bound">s</a>
<a id="3551" href="Bitcoin.Script.Base.html#3442" class="CatchallClause Function">⋁</a><a id="3552" class="CatchallClause"> </a><a id="3553" class="CatchallClause Symbol">((</a><a id="3555" href="Bitcoin.Script.Base.html#351" class="CatchallClause InductiveConstructor">Ctx</a><a id="3558" class="CatchallClause"> </a><a id="3559" href="Bitcoin.Script.Base.html#3559" class="CatchallClause Bound">n</a><a id="3560" class="CatchallClause"> </a><a id="3561" href="Agda.Builtin.Sigma.html#236" class="CatchallClause InductiveConstructor Operator">,</a><a id="3562" class="CatchallClause"> </a><a id="3563" href="Bitcoin.Script.Base.html#3563" class="CatchallClause Bound">x</a><a id="3564" class="CatchallClause Symbol">)</a><a id="3565" class="CatchallClause"> </a><a id="3566" href="Agda.Builtin.List.html#200" class="CatchallClause InductiveConstructor Operator">∷</a><a id="3567" class="CatchallClause"> </a><a id="3568" href="Bitcoin.Script.Base.html#3568" class="CatchallClause Bound">xs</a><a id="3570" class="CatchallClause Symbol">)</a>
  <a id="3574" class="Keyword">with</a> <a id="3579" href="Bitcoin.Script.Base.html#3442" class="Function">⋁</a> <a id="3581" href="Bitcoin.Script.Base.html#3568" class="Bound">xs</a>
<a id="3584" class="Symbol">...</a> <a id="3588" class="Symbol">|</a> <a id="3590" href="Bitcoin.Script.Base.html#351" class="InductiveConstructor">Ctx</a> <a id="3594" href="Bitcoin.Script.Base.html#3594" class="Bound">m</a> <a id="3596" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3598" href="Bitcoin.Script.Base.html#3598" class="Bound">y</a>
  <a id="3602" class="Keyword">with</a> <a id="3607" class="Bound">n</a> <a id="3609" href="Data.Nat.Properties.html#4678" class="Function Operator">≤?</a> <a id="3612" href="Bitcoin.Script.Base.html#3594" class="Bound">m</a>
<a id="3614" class="Symbol">...</a> <a id="3618" class="Symbol">|</a> <a id="3620" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="3624" href="Bitcoin.Script.Base.html#3624" class="Bound">n≤m</a> <a id="3628" class="Symbol">=</a> <a id="3630" class="Symbol">_</a> <a id="3632" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3634" class="Symbol">(</a><a id="3635" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="3642" href="Bitcoin.Script.Base.html#3624" class="Bound">n≤m</a> <a id="3646" class="Bound">x</a> <a id="3648" href="Bitcoin.Script.Base.html#1915" class="Function Operator">`∨</a> <a id="3651" class="Bound">y</a><a id="3652" class="Symbol">)</a>
<a id="3654" class="Symbol">...</a> <a id="3658" class="Symbol">|</a> <a id="3660" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a>  <a id="3664" href="Bitcoin.Script.Base.html#3664" class="Bound">n≰m</a> <a id="3668" class="Symbol">=</a> <a id="3670" class="Symbol">_</a> <a id="3672" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3674" class="Symbol">(</a><a id="3675" class="Bound">x</a> <a id="3677" href="Bitcoin.Script.Base.html#1915" class="Function Operator">`∨</a> <a id="3680" href="Bitcoin.Script.Base.html#2603" class="Function">mapFin</a> <a id="3687" class="Symbol">(</a><a id="3688" href="Data.Nat.Properties.html#7060" class="Function">Nat.≰⇒≥</a> <a id="3696" href="Bitcoin.Script.Base.html#3664" class="Bound">n≰m</a><a id="3699" class="Symbol">)</a> <a id="3701" class="Bound">y</a><a id="3702" class="Symbol">)</a>

<a id="⋀"></a><a id="3705" href="Bitcoin.Script.Base.html#3705" class="Function">⋀</a> <a id="3707" class="Symbol">:</a> <a id="3709" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3714" class="Symbol">(</a><a id="3715" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="3722" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="3726" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a><a id="3731" class="Symbol">)</a> <a id="3733" class="Symbol">→</a> <a id="3735" href="Bitcoin.Script.Base.html#677" class="Datatype">Script</a> <a id="3742" href="Bitcoin.Script.Base.html#624" class="Generalizable">ctx</a> <a id="3746" href="Bitcoin.Script.Base.html#524" class="InductiveConstructor">`Bool</a>
<a id="3752" class="Comment">-- ⋀ = foldr _`∧_ `true</a>
<a id="3776" href="Bitcoin.Script.Base.html#3705" class="Function">⋀</a> <a id="3778" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>       <a id="3787" class="Symbol">=</a> <a id="3789" href="Bitcoin.Script.Base.html#1763" class="Function">`true</a>
<a id="3795" href="Bitcoin.Script.Base.html#3705" class="Function">⋀</a> <a id="3797" class="Symbol">(</a><a id="3798" href="Bitcoin.Script.Base.html#3798" class="Bound">s</a> <a id="3800" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3802" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="3804" class="Symbol">)</a> <a id="3806" class="Symbol">=</a> <a id="3808" href="Bitcoin.Script.Base.html#3798" class="Bound">s</a>
<a id="3810" href="Bitcoin.Script.Base.html#3705" class="CatchallClause Function">⋀</a><a id="3811" class="CatchallClause"> </a><a id="3812" class="CatchallClause Symbol">(</a><a id="3813" href="Bitcoin.Script.Base.html#3813" class="CatchallClause Bound">s</a><a id="3814" class="CatchallClause"> </a><a id="3815" href="Agda.Builtin.List.html#200" class="CatchallClause InductiveConstructor Operator">∷</a><a id="3816" class="CatchallClause"> </a><a id="3817" href="Bitcoin.Script.Base.html#3817" class="CatchallClause Bound">ss</a><a id="3819" class="CatchallClause Symbol">)</a> <a id="3821" class="Symbol">=</a> <a id="3823" href="Bitcoin.Script.Base.html#3813" class="Bound">s</a> <a id="3825" href="Bitcoin.Script.Base.html#1816" class="Function Operator">`∧</a> <a id="3828" href="Bitcoin.Script.Base.html#3705" class="Function">⋀</a> <a id="3830" href="Bitcoin.Script.Base.html#3817" class="Bound">ss</a>
</pre></body></html>