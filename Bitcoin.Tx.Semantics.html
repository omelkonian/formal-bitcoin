<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Bitcoin.Tx.Semantics</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/formal-bitcoin/tree/master/Bitcoin/Tx/Semantics.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Semantics of transactions.</a>
<a id="104" class="Comment">------------------------------------------------------------------------</a>
<a id="177" class="Keyword">module</a> <a id="184" href="Bitcoin.Tx.Semantics.html" class="Module">Bitcoin.Tx.Semantics</a> <a id="205" class="Keyword">where</a>

<a id="212" class="Keyword">open</a> <a id="217" class="Keyword">import</a> <a id="224" href="Prelude.Init.html" class="Module">Prelude.Init</a><a id="236" class="Symbol">;</a> <a id="238" class="Keyword">open</a> <a id="243" href="Prelude.Init.html#504" class="Module">SetAsType</a>
<a id="253" class="Keyword">open</a> <a id="258" class="Keyword">import</a> <a id="265" href="Prelude.ToN.html" class="Module">Prelude.ToN</a>
<a id="277" class="Keyword">open</a> <a id="282" class="Keyword">import</a> <a id="289" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="303" class="Keyword">open</a> <a id="308" class="Keyword">import</a> <a id="315" href="Prelude.Ord.html" class="Module">Prelude.Ord</a>

<a id="328" class="Keyword">open</a> <a id="333" class="Keyword">import</a> <a id="340" href="Bitcoin.BasicTypes.html" class="Module">Bitcoin.BasicTypes</a>
<a id="359" class="Keyword">open</a> <a id="364" class="Keyword">import</a> <a id="371" href="Bitcoin.Crypto.html" class="Module">Bitcoin.Crypto</a>
<a id="386" class="Keyword">open</a> <a id="391" class="Keyword">import</a> <a id="398" href="Bitcoin.Script.Base.html" class="Module">Bitcoin.Script.Base</a>
<a id="418" class="Keyword">open</a> <a id="423" class="Keyword">import</a> <a id="430" href="Bitcoin.Script.Semantics.html" class="Module">Bitcoin.Script.Semantics</a>
<a id="455" class="Keyword">open</a> <a id="460" class="Keyword">import</a> <a id="467" href="Bitcoin.Tx.Base.html" class="Module">Bitcoin.Tx.Base</a>
<a id="483" class="Keyword">open</a> <a id="488" class="Keyword">import</a> <a id="495" href="Bitcoin.Tx.Crypto.html" class="Module">Bitcoin.Tx.Crypto</a>

<a id="514" class="Comment">-- Output redeeming.</a>
<a id="535" class="Keyword">record</a> <a id="_,_,_↝[_]_,_,_"></a><a id="542" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">_,_,_↝[_]_,_,_</a> <a id="557" class="Symbol">(</a><a id="558" href="Bitcoin.Tx.Semantics.html#558" class="Bound">tx</a> <a id="561" class="Symbol">:</a> <a id="563" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="566" href="Bitcoin.Tx.Base.html#2199" class="Generalizable">i</a> <a id="568" href="Bitcoin.Tx.Base.html#2204" class="Generalizable">o</a><a id="569" class="Symbol">)</a> <a id="571" class="Symbol">(</a><a id="572" href="Bitcoin.Tx.Semantics.html#572" class="Bound">i</a> <a id="574" class="Symbol">:</a> <a id="576" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="580" href="Bitcoin.Tx.Base.html#2204" class="Generalizable">o</a><a id="581" class="Symbol">)</a> <a id="583" class="Symbol">(</a><a id="584" href="Bitcoin.Tx.Semantics.html#584" class="Bound">t</a> <a id="586" class="Symbol">:</a> <a id="588" href="Bitcoin.BasicTypes.html#233" class="Function">Time</a><a id="592" class="Symbol">)</a>
                      <a id="616" class="Symbol">(</a><a id="617" href="Bitcoin.Tx.Semantics.html#617" class="Bound">v</a> <a id="619" class="Symbol">:</a> <a id="621" href="Bitcoin.BasicTypes.html#222" class="Function">Value</a><a id="626" class="Symbol">)</a>
                      <a id="650" class="Symbol">(</a><a id="651" href="Bitcoin.Tx.Semantics.html#651" class="Bound">tx′</a> <a id="655" class="Symbol">:</a> <a id="657" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="660" href="Bitcoin.Tx.Base.html#2201" class="Generalizable">i′</a> <a id="663" href="Bitcoin.Tx.Base.html#2206" class="Generalizable">o′</a><a id="665" class="Symbol">)</a> <a id="667" class="Symbol">(</a><a id="668" href="Bitcoin.Tx.Semantics.html#668" class="Bound">j</a> <a id="670" class="Symbol">:</a> <a id="672" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="676" href="Bitcoin.Tx.Base.html#2201" class="Generalizable">i′</a><a id="678" class="Symbol">)</a> <a id="680" class="Symbol">(</a><a id="681" href="Bitcoin.Tx.Semantics.html#681" class="Bound">t′</a> <a id="684" class="Symbol">:</a> <a id="686" href="Bitcoin.BasicTypes.html#233" class="Function">Time</a><a id="690" class="Symbol">)</a> <a id="692" class="Symbol">:</a> <a id="694" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="699" class="Keyword">where</a>
  <a id="707" class="Keyword">field</a>

    <a id="718" class="Symbol">⦃</a> <a id="_,_,_↝[_]_,_,_.witness~validator"></a><a id="720" href="Bitcoin.Tx.Semantics.html#720" class="Field">witness~validator</a> <a id="738" class="Symbol">⦄</a> <a id="740" class="Symbol">:</a>
      <a id="748" class="Symbol">(</a><a id="749" href="Bitcoin.Tx.Semantics.html#558" class="Bound">tx</a> <a id="752" href="Bitcoin.Tx.Base.html#2427" class="Function Operator">‼ᵒ</a> <a id="755" href="Bitcoin.Tx.Semantics.html#572" class="Bound">i</a><a id="756" class="Symbol">)</a> <a id="758" class="Symbol">.</a><a id="759" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="765" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="767" class="Symbol">(</a><a id="768" href="Bitcoin.Tx.Semantics.html#651" class="Bound">tx′</a> <a id="772" href="Bitcoin.Tx.Base.html#2297" class="Function Operator">‼ʷ</a> <a id="775" href="Bitcoin.Tx.Semantics.html#668" class="Bound">j</a><a id="776" class="Symbol">)</a> <a id="778" class="Symbol">.</a><a id="779" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a>

    <a id="790" class="Comment">---------------------------------------------------------------</a>

    <a id="_,_,_↝[_]_,_,_.input~output"></a><a id="859" href="Bitcoin.Tx.Semantics.html#859" class="Field">input~output</a> <a id="872" class="Symbol">:</a>
      <a id="880" href="Bitcoin.Tx.Semantics.html#651" class="Bound">tx′</a> <a id="884" href="Bitcoin.Tx.Base.html#2230" class="Function Operator">‼ⁱ</a> <a id="887" href="Bitcoin.Tx.Semantics.html#668" class="Bound">j</a> <a id="889" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="891" href="Bitcoin.Tx.Semantics.html#558" class="Bound">tx</a> <a id="894" href="Bitcoin.Tx.Crypto.html#1482" class="Function Operator">♯at</a> <a id="898" href="Bitcoin.Tx.Semantics.html#572" class="Bound">i</a>

    <a id="_,_,_↝[_]_,_,_.scriptValidates"></a><a id="905" href="Bitcoin.Tx.Semantics.html#905" class="Field">scriptValidates</a> <a id="921" class="Symbol">:</a>
      <a id="929" href="Bitcoin.Tx.Semantics.html#651" class="Bound">tx′</a> <a id="933" href="Bitcoin.Script.Semantics.html#1990" class="Function Operator">,</a> <a id="935" href="Bitcoin.Tx.Semantics.html#668" class="Bound">j</a> <a id="937" href="Bitcoin.Script.Semantics.html#1990" class="Function Operator">⊨</a> <a id="939" class="Symbol">(</a><a id="940" href="Bitcoin.Tx.Semantics.html#558" class="Bound">tx</a> <a id="943" href="Bitcoin.Tx.Base.html#2427" class="Function Operator">‼ᵒ</a> <a id="946" href="Bitcoin.Tx.Semantics.html#572" class="Bound">i</a><a id="947" class="Symbol">)</a> <a id="949" href="Bitcoin.Tx.Base.html#943" class="Function Operator">∙validator</a>

    <a id="_,_,_↝[_]_,_,_.value≡"></a><a id="965" href="Bitcoin.Tx.Semantics.html#965" class="Field">value≡</a> <a id="972" class="Symbol">:</a>
      <a id="980" href="Bitcoin.Tx.Semantics.html#617" class="Bound">v</a> <a id="982" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="984" class="Symbol">(</a><a id="985" href="Bitcoin.Tx.Semantics.html#558" class="Bound">tx</a> <a id="988" href="Bitcoin.Tx.Base.html#2427" class="Function Operator">‼ᵒ</a> <a id="991" href="Bitcoin.Tx.Semantics.html#572" class="Bound">i</a><a id="992" class="Symbol">)</a> <a id="994" href="Bitcoin.Tx.Base.html#891" class="Function Operator">∙value</a>

    <a id="_,_,_↝[_]_,_,_.satisfiesAbsLock"></a><a id="1006" href="Bitcoin.Tx.Semantics.html#1006" class="Field">satisfiesAbsLock</a> <a id="1023" class="Symbol">:</a>
      <a id="1031" href="Bitcoin.Tx.Semantics.html#681" class="Bound">t′</a> <a id="1034" href="Prelude.Ord.Core.html#289" class="Function Operator">≥</a> <a id="1036" href="Bitcoin.Tx.Semantics.html#651" class="Bound">tx′</a> <a id="1040" class="Symbol">.</a><a id="1041" href="Bitcoin.Tx.Base.html#1344" class="Field">absLock</a>

    <a id="_,_,_↝[_]_,_,_.satisfiesRelLock"></a><a id="1054" href="Bitcoin.Tx.Semantics.html#1054" class="Field">satisfiesRelLock</a> <a id="1071" class="Symbol">:</a>
        <a id="1081" class="Symbol">(</a><a id="1082" href="Bitcoin.Tx.Semantics.html#681" class="Bound">t′</a> <a id="1085" href="Prelude.Ord.Core.html#289" class="Function Operator">≥</a> <a id="1087" href="Bitcoin.Tx.Semantics.html#584" class="Bound">t</a><a id="1088" class="Symbol">)</a>
      <a id="1096" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1098" class="Symbol">(</a><a id="1099" href="Bitcoin.Tx.Semantics.html#681" class="Bound">t′</a> <a id="1102" href="Data.Nat.Base.html#2883" class="Primitive Operator">∸</a> <a id="1104" href="Bitcoin.Tx.Semantics.html#584" class="Bound">t</a> <a id="1106" href="Prelude.Ord.Core.html#289" class="Function Operator">≥</a> <a id="1108" href="Bitcoin.Tx.Semantics.html#651" class="Bound">tx′</a> <a id="1112" href="Bitcoin.Tx.Base.html#2362" class="Function Operator">‼ʳ</a> <a id="1115" href="Bitcoin.Tx.Semantics.html#668" class="Bound">j</a><a id="1116" class="Symbol">)</a>

<a id="_,_,_↛_,_,_"></a><a id="1119" href="Bitcoin.Tx.Semantics.html#1119" class="Function Operator">_,_,_↛_,_,_</a> <a id="1131" class="Symbol">:</a> <a id="1133" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="1136" href="Bitcoin.Tx.Base.html#2199" class="Generalizable">i</a> <a id="1138" href="Bitcoin.Tx.Base.html#2204" class="Generalizable">o</a> <a id="1140" class="Symbol">→</a> <a id="1142" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="1146" href="Bitcoin.Tx.Base.html#2204" class="Generalizable">o</a> <a id="1148" class="Symbol">→</a> <a id="1150" href="Bitcoin.BasicTypes.html#233" class="Function">Time</a> <a id="1155" class="Symbol">→</a> <a id="1157" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="1160" href="Bitcoin.Tx.Base.html#2201" class="Generalizable">i′</a> <a id="1163" href="Bitcoin.Tx.Base.html#2206" class="Generalizable">o′</a> <a id="1166" class="Symbol">→</a> <a id="1168" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="1172" href="Bitcoin.Tx.Base.html#2201" class="Generalizable">i′</a> <a id="1175" class="Symbol">→</a> <a id="1177" href="Bitcoin.BasicTypes.html#233" class="Function">Time</a> <a id="1182" class="Symbol">→</a> <a id="1184" href="Agda.Primitive.html#320" class="Primitive">Type</a>
<a id="1189" href="Bitcoin.Tx.Semantics.html#1189" class="Bound">tx</a> <a id="1192" href="Bitcoin.Tx.Semantics.html#1119" class="Function Operator">,</a> <a id="1194" href="Bitcoin.Tx.Semantics.html#1194" class="Bound">i</a> <a id="1196" href="Bitcoin.Tx.Semantics.html#1119" class="Function Operator">,</a> <a id="1198" href="Bitcoin.Tx.Semantics.html#1198" class="Bound">t</a> <a id="1200" href="Bitcoin.Tx.Semantics.html#1119" class="Function Operator">↛</a> <a id="1202" href="Bitcoin.Tx.Semantics.html#1202" class="Bound">tx′</a> <a id="1206" href="Bitcoin.Tx.Semantics.html#1119" class="Function Operator">,</a> <a id="1208" href="Bitcoin.Tx.Semantics.html#1208" class="Bound">j</a> <a id="1210" href="Bitcoin.Tx.Semantics.html#1119" class="Function Operator">,</a> <a id="1212" href="Bitcoin.Tx.Semantics.html#1212" class="Bound">t′</a> <a id="1215" class="Symbol">=</a> <a id="1217" href="Relation.Nullary.html#665" class="Function Operator">¬</a> <a id="1219" class="Symbol">(</a><a id="1220" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1223" href="Bitcoin.Tx.Semantics.html#1223" class="Bound">v</a> <a id="1225" href="Data.Product.html#1815" class="Function">]</a> <a id="1227" class="Symbol">(</a><a id="1228" href="Bitcoin.Tx.Semantics.html#1189" class="Bound">tx</a> <a id="1231" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="1233" href="Bitcoin.Tx.Semantics.html#1194" class="Bound">i</a> <a id="1235" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="1237" href="Bitcoin.Tx.Semantics.html#1198" class="Bound">t</a> <a id="1239" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">↝[</a> <a id="1242" href="Bitcoin.Tx.Semantics.html#1223" class="Bound">v</a> <a id="1244" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">]</a> <a id="1246" href="Bitcoin.Tx.Semantics.html#1202" class="Bound">tx′</a> <a id="1250" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="1252" href="Bitcoin.Tx.Semantics.html#1208" class="Bound">j</a> <a id="1254" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="1256" href="Bitcoin.Tx.Semantics.html#1212" class="Bound">t′</a><a id="1258" class="Symbol">))</a>

<a id="1262" class="Keyword">module</a> <a id="Example4"></a><a id="1269" href="Bitcoin.Tx.Semantics.html#1269" class="Module">Example4</a> <a id="1278" class="Keyword">where</a>

  <a id="1287" class="Keyword">postulate</a>
    <a id="Example4.ks"></a><a id="1301" href="Bitcoin.Tx.Semantics.html#1301" class="Postulate">ks</a> <a id="Example4.ks′"></a><a id="1304" href="Bitcoin.Tx.Semantics.html#1304" class="Postulate">ks′</a> <a id="1308" class="Symbol">:</a> <a id="1310" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1315" href="Bitcoin.Crypto.html#311" class="Record">KeyPair</a>
    <a id="Example4.v₀"></a><a id="1327" href="Bitcoin.Tx.Semantics.html#1327" class="Postulate">v₀</a> <a id="Example4.v₁"></a><a id="1330" href="Bitcoin.Tx.Semantics.html#1330" class="Postulate">v₁</a> <a id="1333" class="Symbol">:</a> <a id="1335" href="Bitcoin.BasicTypes.html#222" class="Function">Value</a>
    <a id="Example4.t₀"></a><a id="1345" href="Bitcoin.Tx.Semantics.html#1345" class="Postulate">t₀</a> <a id="Example4.t₁"></a><a id="1348" href="Bitcoin.Tx.Semantics.html#1348" class="Postulate">t₁</a> <a id="Example4.abs₀"></a><a id="1351" href="Bitcoin.Tx.Semantics.html#1351" class="Postulate">abs₀</a> <a id="Example4.rel₀"></a><a id="1356" href="Bitcoin.Tx.Semantics.html#1356" class="Postulate">rel₀</a> <a id="1361" class="Symbol">:</a> <a id="1363" href="Bitcoin.BasicTypes.html#233" class="Function">Time</a>

  <a id="Example4.T₀"></a><a id="1371" href="Bitcoin.Tx.Semantics.html#1371" class="Function">T₀</a> <a id="1374" class="Symbol">:</a> <a id="1376" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="1379" class="Number">0</a> <a id="1381" class="Number">1</a>
  <a id="1385" href="Bitcoin.Tx.Semantics.html#1371" class="Function">T₀</a> <a id="1388" class="Symbol">=</a> <a id="1390" class="Keyword">record</a>
    <a id="1401" class="Symbol">{</a> <a id="1403" href="Bitcoin.Tx.Base.html#1152" class="Field">inputs</a>  <a id="1411" class="Symbol">=</a> <a id="1413" href="Data.Vec.Base.html#1043" class="InductiveConstructor">[]</a>
    <a id="1420" class="Symbol">;</a> <a id="1422" href="Bitcoin.Tx.Base.html#1193" class="Field">wit</a>     <a id="1430" class="Symbol">=</a> <a id="1432" href="Data.Vec.Base.html#1043" class="InductiveConstructor">[]</a>
    <a id="1439" class="Symbol">;</a> <a id="1441" href="Bitcoin.Tx.Base.html#1248" class="Field">relLock</a> <a id="1449" class="Symbol">=</a> <a id="1451" href="Data.Vec.Base.html#1043" class="InductiveConstructor">[]</a>
    <a id="1458" class="Symbol">;</a> <a id="1460" href="Bitcoin.Tx.Base.html#1302" class="Field">outputs</a> <a id="1468" class="Symbol">=</a> <a id="1470" href="Data.Vec.Base.html#5759" class="Function Operator">V.[</a> <a id="1474" class="Number">1</a> <a id="1476" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1478" class="Symbol">(</a><a id="1479" href="Bitcoin.Tx.Semantics.html#1327" class="Postulate">v₀</a> <a id="1482" href="Bitcoin.Tx.Base.html#698" class="InductiveConstructor Operator">locked-by</a> <a id="1492" href="Bitcoin.Script.Base.html#1840" class="InductiveConstructor Operator">ƛ</a> <a id="1494" class="Symbol">(</a><a id="1495" href="Bitcoin.Script.Base.html#1125" class="InductiveConstructor">versig</a> <a id="1502" href="Bitcoin.Tx.Semantics.html#1301" class="Postulate">ks</a> <a id="1505" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="1507" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="1510" href="Data.List.Base.html#5034" class="Function Operator">]</a><a id="1511" class="Symbol">))</a> <a id="1514" href="Data.Vec.Base.html#5759" class="Function Operator">]</a>
    <a id="1520" class="Symbol">;</a> <a id="1522" href="Bitcoin.Tx.Base.html#1344" class="Field">absLock</a> <a id="1530" class="Symbol">=</a> <a id="1532" href="Bitcoin.Tx.Semantics.html#1351" class="Postulate">abs₀</a> <a id="1537" class="Symbol">}</a>

  <a id="Example4.T₁"></a><a id="1542" href="Bitcoin.Tx.Semantics.html#1542" class="Function">T₁</a> <a id="1545" class="Symbol">:</a> <a id="1547" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="1550" class="Number">1</a> <a id="1552" class="Number">1</a>
  <a id="1556" href="Bitcoin.Tx.Semantics.html#1542" class="Function">T₁</a> <a id="1559" class="Symbol">=</a> <a id="1561" href="Bitcoin.Tx.Crypto.html#925" class="Function">sig⋆</a> <a id="1566" href="Data.Vec.Base.html#5759" class="Function Operator">V.[</a> <a id="1570" href="Bitcoin.Tx.Semantics.html#1301" class="Postulate">ks</a> <a id="1573" href="Data.Vec.Base.html#5759" class="Function Operator">]</a> <a id="1575" class="Keyword">record</a>
    <a id="1586" class="Symbol">{</a> <a id="1588" href="Bitcoin.Tx.Base.html#1152" class="Field">inputs</a>  <a id="1596" class="Symbol">=</a> <a id="1598" href="Data.Vec.Base.html#5759" class="Function Operator">V.[</a> <a id="1602" class="Symbol">(</a><a id="1603" href="Bitcoin.Tx.Semantics.html#1371" class="Function">T₀</a> <a id="1606" href="Bitcoin.Crypto.html#589" class="Postulate Operator">♯</a><a id="1607" class="Symbol">)</a> <a id="1609" href="Bitcoin.Tx.Base.html#394" class="InductiveConstructor Operator">at</a> <a id="1612" class="Number">0</a> <a id="1614" href="Data.Vec.Base.html#5759" class="Function Operator">]</a>
    <a id="1620" class="Symbol">;</a> <a id="1622" href="Bitcoin.Tx.Base.html#1193" class="Field">wit</a>     <a id="1630" class="Symbol">=</a> <a id="1632" href="Bitcoin.Tx.Crypto.html#541" class="Function">wit⊥</a>
    <a id="1641" class="Symbol">;</a> <a id="1643" href="Bitcoin.Tx.Base.html#1248" class="Field">relLock</a> <a id="1651" class="Symbol">=</a> <a id="1653" href="Data.Vec.Base.html#5759" class="Function Operator">V.[</a> <a id="1657" href="Bitcoin.Tx.Semantics.html#1356" class="Postulate">rel₀</a> <a id="1662" href="Data.Vec.Base.html#5759" class="Function Operator">]</a>
    <a id="1668" class="Symbol">;</a> <a id="1670" href="Bitcoin.Tx.Base.html#1302" class="Field">outputs</a> <a id="1678" class="Symbol">=</a> <a id="1680" href="Data.Vec.Base.html#5759" class="Function Operator">V.[</a> <a id="1684" class="Number">1</a> <a id="1686" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1688" class="Symbol">(</a><a id="1689" href="Bitcoin.Tx.Semantics.html#1330" class="Postulate">v₁</a> <a id="1692" href="Bitcoin.Tx.Base.html#698" class="InductiveConstructor Operator">locked-by</a> <a id="1702" href="Bitcoin.Script.Base.html#1840" class="InductiveConstructor Operator">ƛ</a> <a id="1704" class="Symbol">(</a><a id="1705" href="Bitcoin.Script.Base.html#1125" class="InductiveConstructor">versig</a> <a id="1712" href="Bitcoin.Tx.Semantics.html#1304" class="Postulate">ks′</a> <a id="1716" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="1718" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="1721" href="Data.List.Base.html#5034" class="Function Operator">]</a><a id="1722" class="Symbol">))</a> <a id="1725" href="Data.Vec.Base.html#5759" class="Function Operator">]</a>
    <a id="1731" class="Symbol">;</a> <a id="1733" href="Bitcoin.Tx.Base.html#1344" class="Field">absLock</a> <a id="1741" class="Symbol">=</a> <a id="1743" href="Bitcoin.Tx.Semantics.html#1348" class="Postulate">t₁</a> <a id="1746" class="Symbol">}</a>

  <a id="Example4.T₁′"></a><a id="1751" href="Bitcoin.Tx.Semantics.html#1751" class="Function">T₁′</a> <a id="1755" class="Symbol">:</a> <a id="1757" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="1760" class="Number">1</a> <a id="1762" class="Number">1</a>
  <a id="1766" href="Bitcoin.Tx.Semantics.html#1751" class="Function">T₁′</a> <a id="1770" class="Symbol">=</a> <a id="1772" href="Bitcoin.Tx.Crypto.html#925" class="Function">sig⋆</a> <a id="1777" href="Data.Vec.Base.html#5759" class="Function Operator">V.[</a> <a id="1781" href="Bitcoin.Tx.Semantics.html#1304" class="Postulate">ks′</a> <a id="1785" href="Data.Vec.Base.html#5759" class="Function Operator">]</a> <a id="1787" class="Keyword">record</a>
    <a id="1798" class="Symbol">{</a> <a id="1800" href="Bitcoin.Tx.Base.html#1152" class="Field">inputs</a> <a id="1807" class="Symbol">=</a> <a id="1809" href="Data.Vec.Base.html#5759" class="Function Operator">V.[</a> <a id="1813" class="Symbol">(</a><a id="1814" href="Bitcoin.Tx.Semantics.html#1371" class="Function">T₀</a> <a id="1817" href="Bitcoin.Crypto.html#589" class="Postulate Operator">♯</a><a id="1818" class="Symbol">)</a> <a id="1820" href="Bitcoin.Tx.Base.html#394" class="InductiveConstructor Operator">at</a> <a id="1823" class="Number">0</a> <a id="1825" href="Data.Vec.Base.html#5759" class="Function Operator">]</a>
    <a id="1831" class="Symbol">;</a> <a id="1833" href="Bitcoin.Tx.Base.html#1193" class="Field">wit</a>     <a id="1841" class="Symbol">=</a> <a id="1843" href="Bitcoin.Tx.Crypto.html#541" class="Function">wit⊥</a>
    <a id="1852" class="Symbol">;</a> <a id="1854" href="Bitcoin.Tx.Base.html#1248" class="Field">relLock</a> <a id="1862" class="Symbol">=</a> <a id="1864" href="Data.Vec.Base.html#5759" class="Function Operator">V.[</a> <a id="1868" class="Number">1</a> <a id="1870" href="Data.Vec.Base.html#5759" class="Function Operator">]</a>
    <a id="1876" class="Symbol">;</a> <a id="1878" href="Bitcoin.Tx.Base.html#1302" class="Field">outputs</a> <a id="1886" class="Symbol">=</a> <a id="1888" href="Data.Vec.Base.html#5759" class="Function Operator">V.[</a> <a id="1892" class="Number">1</a> <a id="1894" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1896" class="Symbol">(</a><a id="1897" href="Bitcoin.Tx.Semantics.html#1330" class="Postulate">v₁</a> <a id="1900" href="Bitcoin.Tx.Base.html#698" class="InductiveConstructor Operator">locked-by</a> <a id="1910" href="Bitcoin.Script.Base.html#1840" class="InductiveConstructor Operator">ƛ</a> <a id="1912" class="Symbol">(</a><a id="1913" href="Bitcoin.Script.Base.html#1125" class="InductiveConstructor">versig</a> <a id="1920" href="Bitcoin.Tx.Semantics.html#1304" class="Postulate">ks′</a> <a id="1924" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="1926" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="1929" href="Data.List.Base.html#5034" class="Function Operator">]</a><a id="1930" class="Symbol">))</a> <a id="1933" href="Data.Vec.Base.html#5759" class="Function Operator">]</a>
    <a id="1939" class="Symbol">;</a> <a id="1941" href="Bitcoin.Tx.Base.html#1344" class="Field">absLock</a> <a id="1949" class="Symbol">=</a> <a id="1951" href="Bitcoin.Tx.Semantics.html#1348" class="Postulate">t₁</a> <a id="1954" class="Symbol">}</a>

  <a id="1959" class="Keyword">postulate</a>
    <a id="Example4.T₀↝T₁"></a><a id="1973" href="Bitcoin.Tx.Semantics.html#1973" class="Postulate">T₀↝T₁</a> <a id="1979" class="Symbol">:</a> <a id="1981" href="Bitcoin.Tx.Semantics.html#1371" class="Function">T₀</a> <a id="1984" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="1986" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="1989" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="1991" href="Bitcoin.Tx.Semantics.html#1345" class="Postulate">t₀</a> <a id="1994" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">↝[</a> <a id="1997" href="Bitcoin.Tx.Semantics.html#1327" class="Postulate">v₀</a> <a id="2000" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">]</a> <a id="2002" href="Bitcoin.Tx.Semantics.html#1542" class="Function">T₁</a> <a id="2005" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="2007" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="2010" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="2012" href="Bitcoin.Tx.Semantics.html#1348" class="Postulate">t₁</a>
    <a id="Example4.T₀↝T₁′"></a><a id="2019" href="Bitcoin.Tx.Semantics.html#2019" class="Postulate">T₀↝T₁′</a> <a id="2026" class="Symbol">:</a> <a id="2028" href="Bitcoin.Tx.Semantics.html#1371" class="Function">T₀</a> <a id="2031" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="2033" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="2036" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="2038" href="Bitcoin.Tx.Semantics.html#1345" class="Postulate">t₀</a> <a id="2041" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">↝[</a> <a id="2044" href="Bitcoin.Tx.Semantics.html#1327" class="Postulate">v₀</a> <a id="2047" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">]</a> <a id="2049" href="Bitcoin.Tx.Semantics.html#1751" class="Function">T₁′</a> <a id="2053" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="2055" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="2058" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="2060" href="Bitcoin.Tx.Semantics.html#1348" class="Postulate">t₁</a>
</pre></body></html>