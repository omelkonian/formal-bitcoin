<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Bitcoin.Tx.Semantics</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/formal-bitcoin/tree/master/Bitcoin/Tx/Semantics.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Semantics of transactions.</a>
<a id="104" class="Comment">------------------------------------------------------------------------</a>
<a id="177" class="Keyword">module</a> <a id="184" href="Bitcoin.Tx.Semantics.html" class="Module">Bitcoin.Tx.Semantics</a> <a id="205" class="Keyword">where</a>

<a id="212" class="Keyword">open</a> <a id="217" class="Keyword">import</a> <a id="224" href="Prelude.Init.html" class="Module">Prelude.Init</a><a id="236" class="Symbol">;</a> <a id="238" class="Keyword">open</a> <a id="243" href="Prelude.Init.html#504" class="Module">SetAsType</a>
<a id="253" class="Keyword">open</a> <a id="258" class="Keyword">import</a> <a id="265" href="Prelude.ToN.html" class="Module">Prelude.ToN</a>
<a id="277" class="Keyword">open</a> <a id="282" class="Keyword">import</a> <a id="289" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="303" class="Keyword">open</a> <a id="308" class="Keyword">import</a> <a id="315" href="Prelude.Ord.html" class="Module">Prelude.Ord</a>

<a id="328" class="Keyword">open</a> <a id="333" class="Keyword">import</a> <a id="340" href="Bitcoin.BasicTypes.html" class="Module">Bitcoin.BasicTypes</a>
<a id="359" class="Keyword">open</a> <a id="364" class="Keyword">import</a> <a id="371" href="Bitcoin.Crypto.html" class="Module">Bitcoin.Crypto</a>
<a id="386" class="Keyword">open</a> <a id="391" class="Keyword">import</a> <a id="398" href="Bitcoin.Script.Base.html" class="Module">Bitcoin.Script.Base</a>
<a id="418" class="Keyword">open</a> <a id="423" class="Keyword">import</a> <a id="430" href="Bitcoin.Script.Semantics.html" class="Module">Bitcoin.Script.Semantics</a>
<a id="455" class="Keyword">open</a> <a id="460" class="Keyword">import</a> <a id="467" href="Bitcoin.Tx.Base.html" class="Module">Bitcoin.Tx.Base</a>
<a id="483" class="Keyword">open</a> <a id="488" class="Keyword">import</a> <a id="495" href="Bitcoin.Tx.Crypto.html" class="Module">Bitcoin.Tx.Crypto</a>

<a id="514" class="Comment">-- Output redeeming.</a>
<a id="535" class="Keyword">record</a> <a id="_,_,_↝[_]_,_,_"></a><a id="542" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">_,_,_↝[_]_,_,_</a> <a id="557" class="Symbol">(</a><a id="558" href="Bitcoin.Tx.Semantics.html#558" class="Bound">tx</a> <a id="561" class="Symbol">:</a> <a id="563" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="566" href="Bitcoin.Tx.Base.html#2199" class="Generalizable">i</a> <a id="568" href="Bitcoin.Tx.Base.html#2204" class="Generalizable">o</a><a id="569" class="Symbol">)</a>    <a id="574" class="Symbol">(</a><a id="575" href="Bitcoin.Tx.Semantics.html#575" class="Bound">j</a> <a id="577" class="Symbol">:</a> <a id="579" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="583" href="Bitcoin.Tx.Base.html#2204" class="Generalizable">o</a><a id="584" class="Symbol">)</a>   <a id="588" class="Symbol">(</a><a id="589" href="Bitcoin.Tx.Semantics.html#589" class="Bound">t</a> <a id="591" class="Symbol">:</a> <a id="593" href="Bitcoin.BasicTypes.html#293" class="Function">Time</a><a id="597" class="Symbol">)</a>
                      <a id="621" class="Symbol">(</a><a id="622" href="Bitcoin.Tx.Semantics.html#622" class="Bound">v</a> <a id="624" class="Symbol">:</a> <a id="626" href="Bitcoin.BasicTypes.html#260" class="Function">Value</a><a id="631" class="Symbol">)</a>
                      <a id="655" class="Symbol">(</a><a id="656" href="Bitcoin.Tx.Semantics.html#656" class="Bound">tx′</a> <a id="660" class="Symbol">:</a> <a id="662" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="665" href="Bitcoin.Tx.Base.html#2201" class="Generalizable">i′</a> <a id="668" href="Bitcoin.Tx.Base.html#2206" class="Generalizable">o′</a><a id="670" class="Symbol">)</a> <a id="672" class="Symbol">(</a><a id="673" href="Bitcoin.Tx.Semantics.html#673" class="Bound">j′</a> <a id="676" class="Symbol">:</a> <a id="678" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="682" href="Bitcoin.Tx.Base.html#2201" class="Generalizable">i′</a><a id="684" class="Symbol">)</a> <a id="686" class="Symbol">(</a><a id="687" href="Bitcoin.Tx.Semantics.html#687" class="Bound">t′</a> <a id="690" class="Symbol">:</a> <a id="692" href="Bitcoin.BasicTypes.html#293" class="Function">Time</a><a id="696" class="Symbol">)</a> <a id="698" class="Symbol">:</a> <a id="700" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="705" class="Keyword">where</a>
  <a id="713" class="Keyword">field</a>

    <a id="724" class="Symbol">⦃</a> <a id="_,_,_↝[_]_,_,_.witness~validator"></a><a id="726" href="Bitcoin.Tx.Semantics.html#726" class="Field">witness~validator</a> <a id="744" class="Symbol">⦄</a> <a id="746" class="Symbol">:</a>
      <a id="754" class="Symbol">(</a><a id="755" href="Bitcoin.Tx.Semantics.html#558" class="Bound">tx</a> <a id="758" href="Bitcoin.Tx.Base.html#2400" class="Function Operator">‼ᵒ</a> <a id="761" href="Bitcoin.Tx.Semantics.html#575" class="Bound">j</a><a id="762" class="Symbol">)</a> <a id="764" class="Symbol">.</a><a id="765" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="771" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="773" class="Symbol">(</a><a id="774" href="Bitcoin.Tx.Semantics.html#656" class="Bound">tx′</a> <a id="778" href="Bitcoin.Tx.Base.html#2288" class="Function Operator">‼ʷ</a> <a id="781" href="Bitcoin.Tx.Semantics.html#673" class="Bound">j′</a><a id="783" class="Symbol">)</a> <a id="785" class="Symbol">.</a><a id="786" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a>

    <a id="797" class="Comment">---------------------------------------------------------------</a>

    <a id="_,_,_↝[_]_,_,_.input~output"></a><a id="866" href="Bitcoin.Tx.Semantics.html#866" class="Field">input~output</a> <a id="879" class="Symbol">:</a>
      <a id="887" href="Bitcoin.Tx.Semantics.html#656" class="Bound">tx′</a> <a id="891" href="Bitcoin.Tx.Base.html#2230" class="Function Operator">‼ⁱ</a> <a id="894" href="Bitcoin.Tx.Semantics.html#673" class="Bound">j′</a> <a id="897" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="899" href="Bitcoin.Tx.Semantics.html#558" class="Bound">tx</a> <a id="902" href="Bitcoin.Tx.Crypto.html#596" class="Function Operator">♯at</a> <a id="906" href="Bitcoin.Tx.Semantics.html#575" class="Bound">j</a>

    <a id="_,_,_↝[_]_,_,_.scriptValidates"></a><a id="913" href="Bitcoin.Tx.Semantics.html#913" class="Field">scriptValidates</a> <a id="929" class="Symbol">:</a>
      <a id="937" href="Bitcoin.Tx.Semantics.html#656" class="Bound">tx′</a> <a id="941" href="Bitcoin.Script.Semantics.html#2023" class="Function Operator">,</a> <a id="943" href="Bitcoin.Tx.Semantics.html#673" class="Bound">j′</a> <a id="946" href="Bitcoin.Script.Semantics.html#2023" class="Function Operator">⊨</a> <a id="948" class="Symbol">(</a><a id="949" href="Bitcoin.Tx.Semantics.html#558" class="Bound">tx</a> <a id="952" href="Bitcoin.Tx.Base.html#2400" class="Function Operator">‼ᵒ</a> <a id="955" href="Bitcoin.Tx.Semantics.html#575" class="Bound">j</a><a id="956" class="Symbol">)</a> <a id="958" href="Bitcoin.Tx.Base.html#943" class="Function Operator">∙validator</a>

    <a id="_,_,_↝[_]_,_,_.value≡"></a><a id="974" href="Bitcoin.Tx.Semantics.html#974" class="Field">value≡</a> <a id="981" class="Symbol">:</a>
      <a id="989" href="Bitcoin.Tx.Semantics.html#622" class="Bound">v</a> <a id="991" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="993" class="Symbol">(</a><a id="994" href="Bitcoin.Tx.Semantics.html#558" class="Bound">tx</a> <a id="997" href="Bitcoin.Tx.Base.html#2400" class="Function Operator">‼ᵒ</a> <a id="1000" href="Bitcoin.Tx.Semantics.html#575" class="Bound">j</a><a id="1001" class="Symbol">)</a> <a id="1003" href="Bitcoin.Tx.Base.html#891" class="Function Operator">∙value</a>

    <a id="_,_,_↝[_]_,_,_.satisfiesAbsLock"></a><a id="1015" href="Bitcoin.Tx.Semantics.html#1015" class="Field">satisfiesAbsLock</a> <a id="1032" class="Symbol">:</a>
      <a id="1040" href="Bitcoin.Tx.Semantics.html#687" class="Bound">t′</a> <a id="1043" href="Prelude.Ord.Core.html#289" class="Function Operator">≥</a> <a id="1045" href="Bitcoin.Tx.Semantics.html#656" class="Bound">tx′</a> <a id="1049" class="Symbol">.</a><a id="1050" href="Bitcoin.Tx.Base.html#1344" class="Field">absLock</a>

    <a id="_,_,_↝[_]_,_,_.satisfiesRelLock"></a><a id="1063" href="Bitcoin.Tx.Semantics.html#1063" class="Field">satisfiesRelLock</a> <a id="1080" class="Symbol">:</a>
        <a id="1090" class="Symbol">(</a><a id="1091" href="Bitcoin.Tx.Semantics.html#687" class="Bound">t′</a> <a id="1094" href="Prelude.Ord.Core.html#289" class="Function Operator">≥</a> <a id="1096" href="Bitcoin.Tx.Semantics.html#589" class="Bound">t</a><a id="1097" class="Symbol">)</a>
      <a id="1105" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1107" class="Symbol">(</a><a id="1108" href="Bitcoin.Tx.Semantics.html#687" class="Bound">t′</a> <a id="1111" href="Data.Nat.Base.html#2883" class="Primitive Operator">∸</a> <a id="1113" href="Bitcoin.Tx.Semantics.html#589" class="Bound">t</a> <a id="1115" href="Prelude.Ord.Core.html#289" class="Function Operator">≥</a> <a id="1117" href="Bitcoin.Tx.Semantics.html#656" class="Bound">tx′</a> <a id="1121" href="Bitcoin.Tx.Base.html#2344" class="Function Operator">‼ʳ</a> <a id="1124" href="Bitcoin.Tx.Semantics.html#673" class="Bound">j′</a><a id="1126" class="Symbol">)</a>

<a id="1129" class="Keyword">open</a> <a id="1134" href="Bitcoin.Tx.Semantics.html#542" class="Module Operator">_,_,_↝[_]_,_,_</a> <a id="1149" class="Keyword">public</a>

<a id="_,_,_↛_,_,_"></a><a id="1157" href="Bitcoin.Tx.Semantics.html#1157" class="Function Operator">_,_,_↛_,_,_</a> <a id="1169" class="Symbol">:</a> <a id="1171" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="1174" href="Bitcoin.Tx.Base.html#2199" class="Generalizable">i</a> <a id="1176" href="Bitcoin.Tx.Base.html#2204" class="Generalizable">o</a> <a id="1178" class="Symbol">→</a> <a id="1180" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="1184" href="Bitcoin.Tx.Base.html#2204" class="Generalizable">o</a> <a id="1186" class="Symbol">→</a> <a id="1188" href="Bitcoin.BasicTypes.html#293" class="Function">Time</a> <a id="1193" class="Symbol">→</a> <a id="1195" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="1198" href="Bitcoin.Tx.Base.html#2201" class="Generalizable">i′</a> <a id="1201" href="Bitcoin.Tx.Base.html#2206" class="Generalizable">o′</a> <a id="1204" class="Symbol">→</a> <a id="1206" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="1210" href="Bitcoin.Tx.Base.html#2201" class="Generalizable">i′</a> <a id="1213" class="Symbol">→</a> <a id="1215" href="Bitcoin.BasicTypes.html#293" class="Function">Time</a> <a id="1220" class="Symbol">→</a> <a id="1222" href="Agda.Primitive.html#320" class="Primitive">Type</a>
<a id="1227" href="Bitcoin.Tx.Semantics.html#1227" class="Bound">tx</a> <a id="1230" href="Bitcoin.Tx.Semantics.html#1157" class="Function Operator">,</a> <a id="1232" href="Bitcoin.Tx.Semantics.html#1232" class="Bound">j</a> <a id="1234" href="Bitcoin.Tx.Semantics.html#1157" class="Function Operator">,</a> <a id="1236" href="Bitcoin.Tx.Semantics.html#1236" class="Bound">t</a> <a id="1238" href="Bitcoin.Tx.Semantics.html#1157" class="Function Operator">↛</a> <a id="1240" href="Bitcoin.Tx.Semantics.html#1240" class="Bound">tx′</a> <a id="1244" href="Bitcoin.Tx.Semantics.html#1157" class="Function Operator">,</a> <a id="1246" href="Bitcoin.Tx.Semantics.html#1246" class="Bound">j′</a> <a id="1249" href="Bitcoin.Tx.Semantics.html#1157" class="Function Operator">,</a> <a id="1251" href="Bitcoin.Tx.Semantics.html#1251" class="Bound">t′</a> <a id="1254" class="Symbol">=</a> <a id="1256" href="Relation.Nullary.html#665" class="Function Operator">¬</a> <a id="1258" class="Symbol">(</a><a id="1259" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1262" href="Bitcoin.Tx.Semantics.html#1262" class="Bound">v</a> <a id="1264" href="Data.Product.html#1815" class="Function">]</a> <a id="1266" class="Symbol">(</a><a id="1267" href="Bitcoin.Tx.Semantics.html#1227" class="Bound">tx</a> <a id="1270" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="1272" href="Bitcoin.Tx.Semantics.html#1232" class="Bound">j</a> <a id="1274" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="1276" href="Bitcoin.Tx.Semantics.html#1236" class="Bound">t</a> <a id="1278" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">↝[</a> <a id="1281" href="Bitcoin.Tx.Semantics.html#1262" class="Bound">v</a> <a id="1283" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">]</a> <a id="1285" href="Bitcoin.Tx.Semantics.html#1240" class="Bound">tx′</a> <a id="1289" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="1291" href="Bitcoin.Tx.Semantics.html#1246" class="Bound">j′</a> <a id="1294" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="1296" href="Bitcoin.Tx.Semantics.html#1251" class="Bound">t′</a><a id="1298" class="Symbol">))</a>

<a id="1302" class="Keyword">module</a> <a id="Example3"></a><a id="1309" href="Bitcoin.Tx.Semantics.html#1309" class="Module">Example3</a> <a id="1318" class="Symbol">{</a><a id="1319" href="Bitcoin.Tx.Semantics.html#1319" class="Bound">k</a> <a id="1321" href="Bitcoin.Tx.Semantics.html#1321" class="Bound">k′</a> <a id="1324" class="Symbol">:</a> <a id="1326" href="Bitcoin.Crypto.html#346" class="Record">KeyPair</a><a id="1333" class="Symbol">}</a> <a id="1335" class="Symbol">{</a><a id="1336" href="Bitcoin.Tx.Semantics.html#1336" class="Bound">v₀</a> <a id="1339" href="Bitcoin.Tx.Semantics.html#1339" class="Bound">v₁</a> <a id="1342" class="Symbol">:</a> <a id="1344" href="Bitcoin.BasicTypes.html#260" class="Function">Value</a><a id="1349" class="Symbol">}</a> <a id="1351" class="Keyword">where</a>

  <a id="1360" class="Keyword">open</a> <a id="1365" href="Prelude.Init.html#3301" class="Module">Nat</a> <a id="1369" class="Keyword">using</a> <a id="1375" class="Symbol">(</a><a id="1376" href="Data.Nat.Properties.html#17089" class="Function">m≤m+n</a><a id="1381" class="Symbol">)</a>

  <a id="Example3.t₀"></a><a id="1386" href="Bitcoin.Tx.Semantics.html#1386" class="Function">t₀</a> <a id="1389" class="Symbol">=</a> <a id="1391" href="Bitcoin.BasicTypes.html#775" class="Function Operator">date∶</a> <a id="1397" class="Number">2</a> <a id="1399" href="Bitcoin.BasicTypes.html#725" class="InductiveConstructor Operator">/</a> <a id="1401" class="Number">1</a> <a id="1403" href="Bitcoin.BasicTypes.html#725" class="InductiveConstructor Operator">/</a> <a id="1405" class="Number">2017</a>
  <a id="Example3.t₁"></a><a id="1412" href="Bitcoin.Tx.Semantics.html#1412" class="Function">t₁</a> <a id="1415" class="Symbol">=</a> <a id="1417" href="Bitcoin.BasicTypes.html#775" class="Function Operator">date∶</a> <a id="1423" class="Number">6</a> <a id="1425" href="Bitcoin.BasicTypes.html#725" class="InductiveConstructor Operator">/</a> <a id="1427" class="Number">1</a> <a id="1429" href="Bitcoin.BasicTypes.html#725" class="InductiveConstructor Operator">/</a> <a id="1431" class="Number">2017</a>

  <a id="Example3.T₀"></a><a id="1439" href="Bitcoin.Tx.Semantics.html#1439" class="Function">T₀</a> <a id="1442" class="Symbol">:</a> <a id="1444" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="1447" class="Number">0</a> <a id="1449" class="Number">1</a>
  <a id="1453" href="Bitcoin.Tx.Semantics.html#1439" class="Function">T₀</a> <a id="1456" class="Symbol">=</a> <a id="1458" class="Keyword">record</a>
    <a id="1469" class="Symbol">{</a> <a id="1471" href="Bitcoin.Tx.Base.html#1152" class="Field">inputs</a>  <a id="1479" class="Symbol">=</a> <a id="1481" href="Data.Vec.Base.html#1043" class="InductiveConstructor">[]</a>
    <a id="1488" class="Symbol">;</a> <a id="1490" href="Bitcoin.Tx.Base.html#1193" class="Field">wit</a>     <a id="1498" class="Symbol">=</a> <a id="1500" href="Data.Vec.Base.html#1043" class="InductiveConstructor">[]</a>
    <a id="1507" class="Symbol">;</a> <a id="1509" href="Bitcoin.Tx.Base.html#1248" class="Field">relLock</a> <a id="1517" class="Symbol">=</a> <a id="1519" href="Data.Vec.Base.html#1043" class="InductiveConstructor">[]</a>
    <a id="1526" class="Symbol">;</a> <a id="1528" href="Bitcoin.Tx.Base.html#1302" class="Field">outputs</a> <a id="1536" class="Symbol">=</a> <a id="1538" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="1540" class="Number">1</a> <a id="1542" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1544" href="Bitcoin.Tx.Semantics.html#1336" class="Bound">v₀</a> <a id="1547" href="Bitcoin.Tx.Base.html#698" class="InductiveConstructor Operator">locked-by</a> <a id="1557" href="Bitcoin.Script.Base.html#1921" class="InductiveConstructor Operator">ƛ</a> <a id="1559" href="Bitcoin.Script.Base.html#1115" class="InductiveConstructor">versig</a> <a id="1566" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="1568" href="Bitcoin.Tx.Semantics.html#1319" class="Bound">k</a> <a id="1570" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="1572" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="1574" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="1577" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="1579" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a>
    <a id="1585" class="Symbol">;</a> <a id="1587" href="Bitcoin.Tx.Base.html#1344" class="Field">absLock</a> <a id="1595" class="Symbol">=</a> <a id="1597" href="Bitcoin.Tx.Semantics.html#1386" class="Function">t₀</a> <a id="1600" class="Symbol">}</a>

  <a id="Example3.T₁"></a><a id="1605" href="Bitcoin.Tx.Semantics.html#1605" class="Function">T₁</a> <a id="1608" class="Symbol">:</a> <a id="1610" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="1613" class="Number">1</a> <a id="1615" class="Number">1</a>
  <a id="1619" href="Bitcoin.Tx.Semantics.html#1605" class="Function">T₁</a> <a id="1622" class="Symbol">=</a> <a id="1624" href="Bitcoin.Tx.Crypto.html#1288" class="Function">sig⋆</a> <a id="1629" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="1631" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="1633" href="Bitcoin.Tx.Semantics.html#1319" class="Bound">k</a> <a id="1635" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="1637" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="1639" class="Keyword">record</a>
    <a id="1650" class="Symbol">{</a> <a id="1652" href="Bitcoin.Tx.Base.html#1152" class="Field">inputs</a>  <a id="1660" class="Symbol">=</a> <a id="1662" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="1664" class="Symbol">(</a><a id="1665" href="Bitcoin.Tx.Semantics.html#1439" class="Function">T₀</a> <a id="1668" href="Bitcoin.Crypto.html#609" class="Postulate Operator">♯</a><a id="1669" class="Symbol">)</a> <a id="1671" href="Bitcoin.Tx.Base.html#394" class="InductiveConstructor Operator">at</a> <a id="1674" class="Number">0</a> <a id="1676" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a>
    <a id="1682" class="Symbol">;</a> <a id="1684" href="Bitcoin.Tx.Base.html#1193" class="Field">wit</a>     <a id="1692" class="Symbol">=</a> <a id="1694" href="Bitcoin.Tx.Crypto.html#800" class="Function">wit⊥</a>
    <a id="1703" class="Symbol">;</a> <a id="1705" href="Bitcoin.Tx.Base.html#1248" class="Field">relLock</a> <a id="1713" class="Symbol">=</a> <a id="1715" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="1717" class="Number">0</a> <a id="1719" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a>
    <a id="1725" class="Symbol">;</a> <a id="1727" href="Bitcoin.Tx.Base.html#1302" class="Field">outputs</a> <a id="1735" class="Symbol">=</a> <a id="1737" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="1739" class="Number">1</a> <a id="1741" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1743" href="Bitcoin.Tx.Semantics.html#1339" class="Bound">v₁</a> <a id="1746" href="Bitcoin.Tx.Base.html#698" class="InductiveConstructor Operator">locked-by</a> <a id="1756" href="Bitcoin.Script.Base.html#1921" class="InductiveConstructor Operator">ƛ</a> <a id="1758" href="Bitcoin.Script.Base.html#1115" class="InductiveConstructor">versig</a> <a id="1765" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="1767" href="Bitcoin.Tx.Semantics.html#1321" class="Bound">k′</a> <a id="1770" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="1772" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="1774" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="1777" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="1779" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a>
    <a id="1785" class="Symbol">;</a> <a id="1787" href="Bitcoin.Tx.Base.html#1344" class="Field">absLock</a> <a id="1795" class="Symbol">=</a> <a id="1797" href="Bitcoin.Tx.Semantics.html#1412" class="Function">t₁</a> <a id="1800" class="Symbol">}</a>

  <a id="Example3.T₁′"></a><a id="1805" href="Bitcoin.Tx.Semantics.html#1805" class="Function">T₁′</a> <a id="1809" class="Symbol">:</a> <a id="1811" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="1814" class="Number">1</a> <a id="1816" class="Number">1</a>
  <a id="1820" href="Bitcoin.Tx.Semantics.html#1805" class="Function">T₁′</a> <a id="1824" class="Symbol">=</a> <a id="1826" href="Bitcoin.Tx.Crypto.html#1288" class="Function">sig⋆</a> <a id="1831" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="1833" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="1835" href="Bitcoin.Tx.Semantics.html#1319" class="Bound">k</a> <a id="1837" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="1839" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="1841" class="Keyword">record</a>
    <a id="1852" class="Symbol">{</a> <a id="1854" href="Bitcoin.Tx.Base.html#1152" class="Field">inputs</a>  <a id="1862" class="Symbol">=</a> <a id="1864" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="1866" class="Symbol">(</a><a id="1867" href="Bitcoin.Tx.Semantics.html#1439" class="Function">T₀</a> <a id="1870" href="Bitcoin.Crypto.html#609" class="Postulate Operator">♯</a><a id="1871" class="Symbol">)</a> <a id="1873" href="Bitcoin.Tx.Base.html#394" class="InductiveConstructor Operator">at</a> <a id="1876" class="Number">0</a> <a id="1878" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a>
    <a id="1884" class="Symbol">;</a> <a id="1886" href="Bitcoin.Tx.Base.html#1193" class="Field">wit</a>     <a id="1894" class="Symbol">=</a> <a id="1896" href="Bitcoin.Tx.Crypto.html#800" class="Function">wit⊥</a>
    <a id="1905" class="Symbol">;</a> <a id="1907" href="Bitcoin.Tx.Base.html#1248" class="Field">relLock</a> <a id="1915" class="Symbol">=</a> <a id="1917" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="1919" class="Number">2</a> <a id="1921" href="Bitcoin.BasicTypes.html#502" class="Function Operator">days</a> <a id="1926" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a>
    <a id="1932" class="Symbol">;</a> <a id="1934" href="Bitcoin.Tx.Base.html#1302" class="Field">outputs</a> <a id="1942" class="Symbol">=</a> <a id="1944" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="1946" class="Number">1</a> <a id="1948" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1950" href="Bitcoin.Tx.Semantics.html#1339" class="Bound">v₁</a> <a id="1953" href="Bitcoin.Tx.Base.html#698" class="InductiveConstructor Operator">locked-by</a> <a id="1963" href="Bitcoin.Script.Base.html#1921" class="InductiveConstructor Operator">ƛ</a> <a id="1965" href="Bitcoin.Script.Base.html#1115" class="InductiveConstructor">versig</a> <a id="1972" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="1974" href="Bitcoin.Tx.Semantics.html#1321" class="Bound">k′</a> <a id="1977" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="1979" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="1981" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="1984" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="1986" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a>
    <a id="1992" class="Symbol">;</a> <a id="1994" href="Bitcoin.Tx.Base.html#1344" class="Field">absLock</a> <a id="2002" class="Symbol">=</a> <a id="2004" href="Bitcoin.BasicTypes.html#775" class="Function Operator">date∶</a> <a id="2010" class="Number">5</a> <a id="2012" href="Bitcoin.BasicTypes.html#725" class="InductiveConstructor Operator">/</a> <a id="2014" class="Number">1</a> <a id="2016" href="Bitcoin.BasicTypes.html#725" class="InductiveConstructor Operator">/</a> <a id="2018" class="Number">2017</a> <a id="2023" class="Symbol">}</a>

  <a id="Example3.T₀↝T₁"></a><a id="2028" href="Bitcoin.Tx.Semantics.html#2028" class="Function">T₀↝T₁</a> <a id="2034" class="Symbol">:</a> <a id="2036" href="Bitcoin.Tx.Semantics.html#1439" class="Function">T₀</a> <a id="2039" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="2041" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="2044" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="2046" href="Bitcoin.Tx.Semantics.html#1386" class="Function">t₀</a> <a id="2049" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">↝[</a> <a id="2052" href="Bitcoin.Tx.Semantics.html#1336" class="Bound">v₀</a> <a id="2055" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">]</a> <a id="2057" href="Bitcoin.Tx.Semantics.html#1605" class="Function">T₁</a> <a id="2060" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="2062" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="2065" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="2067" href="Bitcoin.Tx.Semantics.html#1412" class="Function">t₁</a>
  <a id="2072" href="Bitcoin.Tx.Semantics.html#2028" class="Function">T₀↝T₁</a> <a id="2078" class="Symbol">=</a> <a id="2080" class="Keyword">record</a>
    <a id="2091" class="Symbol">{</a> <a id="2093" href="Bitcoin.Tx.Semantics.html#866" class="Field">input~output</a>     <a id="2110" class="Symbol">=</a> <a id="2112" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
    <a id="2121" class="Symbol">;</a> <a id="2123" href="Bitcoin.Tx.Semantics.html#913" class="Field">scriptValidates</a>  <a id="2140" class="Symbol">=</a> <a id="2142" href="Bitcoin.Tx.Crypto.html#1661" class="Function">ver⋆sig≡</a> <a id="2151" href="Bitcoin.Tx.Semantics.html#1605" class="Function">T₁</a> <a id="2154" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a>
    <a id="2161" class="Symbol">;</a> <a id="2163" href="Bitcoin.Tx.Semantics.html#974" class="Field">value≡</a>           <a id="2180" class="Symbol">=</a> <a id="2182" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
    <a id="2191" class="Symbol">;</a> <a id="2193" href="Bitcoin.Tx.Semantics.html#1015" class="Field">satisfiesAbsLock</a> <a id="2210" class="Symbol">=</a> <a id="2212" href="Prelude.Ord.Core.html#669" class="Field">≤-refl</a>
    <a id="2223" class="Symbol">;</a> <a id="2225" href="Bitcoin.Tx.Semantics.html#1063" class="Field">satisfiesRelLock</a> <a id="2242" class="Symbol">=</a> <a id="2244" href="Data.Nat.Properties.html#17089" class="Function">m≤m+n</a> <a id="2250" class="Symbol">_</a> <a id="2252" class="Symbol">(</a><a id="2253" class="Number">4</a> <a id="2255" href="Bitcoin.BasicTypes.html#502" class="Function Operator">days</a><a id="2259" class="Symbol">)</a> <a id="2261" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2263" href="Data.Nat.Base.html#1567" class="InductiveConstructor">z≤n</a>
    <a id="2271" class="Symbol">}</a>

  <a id="Example3.T₀↝T₁′"></a><a id="2276" href="Bitcoin.Tx.Semantics.html#2276" class="Function">T₀↝T₁′</a> <a id="2283" class="Symbol">:</a> <a id="2285" href="Bitcoin.Tx.Semantics.html#1439" class="Function">T₀</a> <a id="2288" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="2290" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="2293" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="2295" href="Bitcoin.Tx.Semantics.html#1386" class="Function">t₀</a> <a id="2298" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">↝[</a> <a id="2301" href="Bitcoin.Tx.Semantics.html#1336" class="Bound">v₀</a> <a id="2304" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">]</a> <a id="2306" href="Bitcoin.Tx.Semantics.html#1805" class="Function">T₁′</a> <a id="2310" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="2312" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="2315" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="2317" href="Bitcoin.Tx.Semantics.html#1412" class="Function">t₁</a>
  <a id="2322" href="Bitcoin.Tx.Semantics.html#2276" class="Function">T₀↝T₁′</a> <a id="2329" class="Symbol">=</a> <a id="2331" class="Keyword">record</a>
    <a id="2342" class="Symbol">{</a> <a id="2344" href="Bitcoin.Tx.Semantics.html#866" class="Field">input~output</a>     <a id="2361" class="Symbol">=</a> <a id="2363" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
    <a id="2372" class="Symbol">;</a> <a id="2374" href="Bitcoin.Tx.Semantics.html#913" class="Field">scriptValidates</a>  <a id="2391" class="Symbol">=</a> <a id="2393" href="Bitcoin.Tx.Crypto.html#1661" class="Function">ver⋆sig≡</a> <a id="2402" href="Bitcoin.Tx.Semantics.html#1805" class="Function">T₁′</a> <a id="2406" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a>
    <a id="2413" class="Symbol">;</a> <a id="2415" href="Bitcoin.Tx.Semantics.html#974" class="Field">value≡</a>           <a id="2432" class="Symbol">=</a> <a id="2434" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
    <a id="2443" class="Symbol">;</a> <a id="2445" href="Bitcoin.Tx.Semantics.html#1015" class="Field">satisfiesAbsLock</a> <a id="2462" class="Symbol">=</a> <a id="2464" href="Data.Nat.Properties.html#17089" class="Function">m≤m+n</a> <a id="2470" class="Symbol">_</a> <a id="2472" class="Symbol">(</a><a id="2473" class="Number">1</a> <a id="2475" href="Bitcoin.BasicTypes.html#502" class="Function Operator">days</a><a id="2479" class="Symbol">)</a>
    <a id="2485" class="Symbol">;</a> <a id="2487" href="Bitcoin.Tx.Semantics.html#1063" class="Field">satisfiesRelLock</a> <a id="2504" class="Symbol">=</a> <a id="2506" href="Data.Nat.Properties.html#17089" class="Function">m≤m+n</a> <a id="2512" class="Symbol">_</a> <a id="2514" class="Symbol">(</a><a id="2515" class="Number">4</a> <a id="2517" href="Bitcoin.BasicTypes.html#502" class="Function Operator">days</a><a id="2521" class="Symbol">)</a> <a id="2523" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2525" href="Data.Nat.Properties.html#17089" class="Function">m≤m+n</a> <a id="2531" class="Symbol">_</a> <a id="2533" class="Symbol">(</a><a id="2534" class="Number">2</a> <a id="2536" href="Bitcoin.BasicTypes.html#502" class="Function Operator">days</a><a id="2540" class="Symbol">)</a>
    <a id="2546" class="Symbol">}</a>

<a id="2549" class="Keyword">module</a> <a id="Example4"></a><a id="2556" href="Bitcoin.Tx.Semantics.html#2556" class="Module">Example4</a> <a id="2565" class="Symbol">{</a><a id="2566" href="Bitcoin.Tx.Semantics.html#2566" class="Bound">k</a> <a id="2568" href="Bitcoin.Tx.Semantics.html#2568" class="Bound">k₂</a> <a id="2571" class="Symbol">:</a> <a id="2573" href="Bitcoin.Crypto.html#346" class="Record">KeyPair</a><a id="2580" class="Symbol">}</a> <a id="2582" class="Symbol">{</a><a id="2583" href="Bitcoin.Tx.Semantics.html#2583" class="Bound">t</a> <a id="2585" href="Bitcoin.Tx.Semantics.html#2585" class="Bound">t′</a> <a id="2588" class="Symbol">:</a> <a id="2590" href="Bitcoin.BasicTypes.html#293" class="Function">Time</a><a id="2594" class="Symbol">}</a> <a id="2596" class="Symbol">(</a><a id="2597" href="Bitcoin.Tx.Semantics.html#2597" class="Bound">t≤t′</a> <a id="2602" class="Symbol">:</a> <a id="2604" href="Bitcoin.Tx.Semantics.html#2583" class="Bound">t</a> <a id="2606" href="Prelude.Ord.Core.html#209" class="Field Operator">≤</a> <a id="2608" href="Bitcoin.Tx.Semantics.html#2585" class="Bound">t′</a><a id="2610" class="Symbol">)</a> <a id="2612" class="Keyword">where</a>

  <a id="2621" class="Keyword">open</a> <a id="2626" class="Keyword">import</a> <a id="2633" href="Prelude.General.html" class="Module">Prelude.General</a>

  <a id="Example4.T₁′"></a><a id="2652" href="Bitcoin.Tx.Semantics.html#2652" class="Function">T₁′</a> <a id="2656" class="Symbol">:</a> <a id="2658" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="2661" class="Number">0</a> <a id="2663" class="Number">1</a>
  <a id="2667" href="Bitcoin.Tx.Semantics.html#2652" class="Function">T₁′</a> <a id="2671" class="Symbol">=</a> <a id="2673" class="Keyword">record</a>
    <a id="2684" class="Symbol">{</a> <a id="2686" href="Bitcoin.Tx.Base.html#1152" class="Field">inputs</a>  <a id="2694" class="Symbol">=</a> <a id="2696" href="Data.Vec.Base.html#1043" class="InductiveConstructor">[]</a>
    <a id="2703" class="Symbol">;</a> <a id="2705" href="Bitcoin.Tx.Base.html#1193" class="Field">wit</a>     <a id="2713" class="Symbol">=</a> <a id="2715" href="Data.Vec.Base.html#1043" class="InductiveConstructor">[]</a>
    <a id="2722" class="Symbol">;</a> <a id="2724" href="Bitcoin.Tx.Base.html#1248" class="Field">relLock</a> <a id="2732" class="Symbol">=</a> <a id="2734" href="Data.Vec.Base.html#1043" class="InductiveConstructor">[]</a>
    <a id="2741" class="Symbol">;</a> <a id="2743" href="Bitcoin.Tx.Base.html#1302" class="Field">outputs</a> <a id="2751" class="Symbol">=</a> <a id="2753" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="2755" class="Number">1</a> <a id="2757" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2759" class="Number">1</a> <a id="2761" href="Bitcoin.Tx.Base.html#698" class="InductiveConstructor Operator">locked-by</a> <a id="2771" href="Bitcoin.Script.Base.html#1921" class="InductiveConstructor Operator">ƛ</a> <a id="2773" href="Bitcoin.Script.Base.html#1115" class="InductiveConstructor">versig</a> <a id="2780" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="2782" href="Bitcoin.Tx.Semantics.html#2566" class="Bound">k</a> <a id="2784" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="2786" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="2788" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="2791" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="2793" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a>
    <a id="2799" class="Symbol">;</a> <a id="2801" href="Bitcoin.Tx.Base.html#1344" class="Field">absLock</a> <a id="2809" class="Symbol">=</a> <a id="2811" href="Bitcoin.Tx.Semantics.html#2583" class="Bound">t</a> <a id="2813" class="Symbol">}</a>

  <a id="Example4.T₂′"></a><a id="2818" href="Bitcoin.Tx.Semantics.html#2818" class="Function">T₂′</a> <a id="2822" class="Symbol">:</a> <a id="2824" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="2827" class="Number">0</a> <a id="2829" class="Number">1</a>
  <a id="2833" href="Bitcoin.Tx.Semantics.html#2818" class="Function">T₂′</a> <a id="2837" class="Symbol">=</a> <a id="2839" class="Keyword">record</a>
    <a id="2850" class="Symbol">{</a> <a id="2852" href="Bitcoin.Tx.Base.html#1152" class="Field">inputs</a>  <a id="2860" class="Symbol">=</a> <a id="2862" href="Data.Vec.Base.html#1043" class="InductiveConstructor">[]</a>
    <a id="2869" class="Symbol">;</a> <a id="2871" href="Bitcoin.Tx.Base.html#1193" class="Field">wit</a>     <a id="2879" class="Symbol">=</a> <a id="2881" href="Data.Vec.Base.html#1043" class="InductiveConstructor">[]</a>
    <a id="2888" class="Symbol">;</a> <a id="2890" href="Bitcoin.Tx.Base.html#1248" class="Field">relLock</a> <a id="2898" class="Symbol">=</a> <a id="2900" href="Data.Vec.Base.html#1043" class="InductiveConstructor">[]</a>
    <a id="2907" class="Symbol">;</a> <a id="2909" href="Bitcoin.Tx.Base.html#1302" class="Field">outputs</a> <a id="2917" class="Symbol">=</a> <a id="2919" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="2921" class="Number">1</a> <a id="2923" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2925" class="Number">2</a> <a id="2927" href="Bitcoin.Tx.Base.html#698" class="InductiveConstructor Operator">locked-by</a> <a id="2937" href="Bitcoin.Script.Base.html#1921" class="InductiveConstructor Operator">ƛ</a> <a id="2939" href="Bitcoin.Script.Base.html#1115" class="InductiveConstructor">versig</a> <a id="2946" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="2948" href="Bitcoin.Tx.Semantics.html#2566" class="Bound">k</a> <a id="2950" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="2952" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="2954" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="2957" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="2959" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a>
    <a id="2965" class="Symbol">;</a> <a id="2967" href="Bitcoin.Tx.Base.html#1344" class="Field">absLock</a> <a id="2975" class="Symbol">=</a> <a id="2977" href="Bitcoin.Tx.Semantics.html#2583" class="Bound">t</a> <a id="2979" class="Symbol">}</a>

  <a id="Example4.T₃′"></a><a id="2984" href="Bitcoin.Tx.Semantics.html#2984" class="Function">T₃′</a> <a id="2988" class="Symbol">:</a> <a id="2990" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="2993" class="Number">2</a> <a id="2995" class="Number">1</a>
  <a id="2999" href="Bitcoin.Tx.Semantics.html#2984" class="Function">T₃′</a> <a id="3003" class="Symbol">=</a> <a id="3005" href="Bitcoin.Tx.Crypto.html#1288" class="Function">sig⋆</a> <a id="3010" href="Prelude.Init.html#9897" class="InductiveConstructor Operator">[</a> <a id="3012" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="3014" href="Bitcoin.Tx.Semantics.html#2566" class="Bound">k</a> <a id="3016" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="3018" href="Prelude.Init.html#9897" class="InductiveConstructor Operator">⨾</a> <a id="3020" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="3022" href="Bitcoin.Tx.Semantics.html#2566" class="Bound">k</a> <a id="3024" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="3026" href="Prelude.Init.html#9897" class="InductiveConstructor Operator">]</a> <a id="3028" class="Keyword">record</a>
    <a id="3039" class="Symbol">{</a> <a id="3041" href="Bitcoin.Tx.Base.html#1152" class="Field">inputs</a>  <a id="3049" class="Symbol">=</a> <a id="3051" href="Prelude.Init.html#9897" class="InductiveConstructor Operator">[</a> <a id="3053" class="Symbol">(</a><a id="3054" href="Bitcoin.Tx.Semantics.html#2652" class="Function">T₁′</a> <a id="3058" href="Bitcoin.Crypto.html#609" class="Postulate Operator">♯</a><a id="3059" class="Symbol">)</a> <a id="3061" href="Bitcoin.Tx.Base.html#394" class="InductiveConstructor Operator">at</a> <a id="3064" class="Number">0</a> <a id="3066" href="Prelude.Init.html#9897" class="InductiveConstructor Operator">⨾</a> <a id="3068" class="Symbol">(</a><a id="3069" href="Bitcoin.Tx.Semantics.html#2818" class="Function">T₂′</a> <a id="3073" href="Bitcoin.Crypto.html#609" class="Postulate Operator">♯</a><a id="3074" class="Symbol">)</a> <a id="3076" href="Bitcoin.Tx.Base.html#394" class="InductiveConstructor Operator">at</a> <a id="3079" class="Number">0</a> <a id="3081" href="Prelude.Init.html#9897" class="InductiveConstructor Operator">]</a>
    <a id="3087" class="Symbol">;</a> <a id="3089" href="Bitcoin.Tx.Base.html#1193" class="Field">wit</a>     <a id="3097" class="Symbol">=</a> <a id="3099" href="Bitcoin.Tx.Crypto.html#800" class="Function">wit⊥</a>
    <a id="3108" class="Symbol">;</a> <a id="3110" href="Bitcoin.Tx.Base.html#1248" class="Field">relLock</a> <a id="3118" class="Symbol">=</a> <a id="3120" href="Prelude.Init.html#9897" class="InductiveConstructor Operator">[</a> <a id="3122" class="Number">0</a>            <a id="3135" href="Prelude.Init.html#9897" class="InductiveConstructor Operator">⨾</a> <a id="3137" class="Number">0</a>            <a id="3150" href="Prelude.Init.html#9897" class="InductiveConstructor Operator">]</a>
    <a id="3156" class="Symbol">;</a> <a id="3158" href="Bitcoin.Tx.Base.html#1302" class="Field">outputs</a> <a id="3166" class="Symbol">=</a> <a id="3168" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="3170" class="Number">1</a> <a id="3172" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3174" class="Number">3</a> <a id="3176" href="Bitcoin.Tx.Base.html#698" class="InductiveConstructor Operator">locked-by</a> <a id="3186" href="Bitcoin.Script.Base.html#1921" class="InductiveConstructor Operator">ƛ</a> <a id="3188" href="Bitcoin.Script.Base.html#1115" class="InductiveConstructor">versig</a> <a id="3195" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="3197" href="Bitcoin.Tx.Semantics.html#2568" class="Bound">k₂</a> <a id="3200" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="3202" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="3204" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="3207" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="3209" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a>
    <a id="3215" class="Symbol">;</a> <a id="3217" href="Bitcoin.Tx.Base.html#1344" class="Field">absLock</a> <a id="3225" class="Symbol">=</a> <a id="3227" href="Bitcoin.Tx.Semantics.html#2585" class="Bound">t′</a> <a id="3230" class="Symbol">}</a>

  <a id="Example4.T₁′↝T₃′"></a><a id="3235" href="Bitcoin.Tx.Semantics.html#3235" class="Function">T₁′↝T₃′</a> <a id="3243" class="Symbol">:</a> <a id="3245" href="Bitcoin.Tx.Semantics.html#2652" class="Function">T₁′</a> <a id="3249" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="3251" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="3254" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="3256" href="Bitcoin.Tx.Semantics.html#2583" class="Bound">t</a> <a id="3258" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">↝[</a> <a id="3261" class="Number">1</a> <a id="3263" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">]</a> <a id="3265" href="Bitcoin.Tx.Semantics.html#2984" class="Function">T₃′</a> <a id="3269" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="3271" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="3274" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="3276" href="Bitcoin.Tx.Semantics.html#2585" class="Bound">t′</a>
  <a id="3281" href="Bitcoin.Tx.Semantics.html#3235" class="Function">T₁′↝T₃′</a> <a id="3289" class="Symbol">=</a> <a id="3291" class="Keyword">record</a>
    <a id="3302" class="Symbol">{</a> <a id="3304" href="Bitcoin.Tx.Semantics.html#866" class="Field">input~output</a>     <a id="3321" class="Symbol">=</a> <a id="3323" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
    <a id="3332" class="Symbol">;</a> <a id="3334" href="Bitcoin.Tx.Semantics.html#913" class="Field">scriptValidates</a>  <a id="3351" class="Symbol">=</a> <a id="3353" href="Bitcoin.Tx.Crypto.html#1661" class="Function">ver⋆sig≡</a> <a id="3362" href="Bitcoin.Tx.Semantics.html#2984" class="Function">T₃′</a> <a id="3366" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a>
    <a id="3373" class="Symbol">;</a> <a id="3375" href="Bitcoin.Tx.Semantics.html#974" class="Field">value≡</a>           <a id="3392" class="Symbol">=</a> <a id="3394" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
    <a id="3403" class="Symbol">;</a> <a id="3405" href="Bitcoin.Tx.Semantics.html#1015" class="Field">satisfiesAbsLock</a> <a id="3422" class="Symbol">=</a> <a id="3424" href="Prelude.Ord.Core.html#669" class="Field">≤-refl</a>
    <a id="3435" class="Symbol">;</a> <a id="3437" href="Bitcoin.Tx.Semantics.html#1063" class="Field">satisfiesRelLock</a> <a id="3454" class="Symbol">=</a> <a id="3456" href="Bitcoin.Tx.Semantics.html#2597" class="Bound">t≤t′</a> <a id="3461" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3463" href="Data.Nat.Base.html#1567" class="InductiveConstructor">z≤n</a>
    <a id="3471" class="Symbol">}</a>

  <a id="Example4.T₂′↝T₃′"></a><a id="3476" href="Bitcoin.Tx.Semantics.html#3476" class="Function">T₂′↝T₃′</a> <a id="3484" class="Symbol">:</a> <a id="3486" href="Bitcoin.Tx.Semantics.html#2818" class="Function">T₂′</a> <a id="3490" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="3492" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="3495" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="3497" href="Bitcoin.Tx.Semantics.html#2583" class="Bound">t</a> <a id="3499" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">↝[</a> <a id="3502" class="Number">2</a> <a id="3504" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">]</a> <a id="3506" href="Bitcoin.Tx.Semantics.html#2984" class="Function">T₃′</a> <a id="3510" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="3512" href="Data.Fin.Patterns.html#417" class="InductiveConstructor">1F</a> <a id="3515" href="Bitcoin.Tx.Semantics.html#542" class="Record Operator">,</a> <a id="3517" href="Bitcoin.Tx.Semantics.html#2585" class="Bound">t′</a>
  <a id="3522" href="Bitcoin.Tx.Semantics.html#3476" class="Function">T₂′↝T₃′</a> <a id="3530" class="Symbol">=</a> <a id="3532" class="Keyword">record</a>
    <a id="3543" class="Symbol">{</a> <a id="3545" href="Bitcoin.Tx.Semantics.html#866" class="Field">input~output</a>     <a id="3562" class="Symbol">=</a> <a id="3564" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
    <a id="3573" class="Symbol">;</a> <a id="3575" href="Bitcoin.Tx.Semantics.html#913" class="Field">scriptValidates</a>  <a id="3592" class="Symbol">=</a> <a id="3594" href="Bitcoin.Tx.Crypto.html#1661" class="Function">ver⋆sig≡</a> <a id="3603" href="Bitcoin.Tx.Semantics.html#2984" class="Function">T₃′</a> <a id="3607" href="Data.Fin.Patterns.html#417" class="InductiveConstructor">1F</a>
    <a id="3614" class="Symbol">;</a> <a id="3616" href="Bitcoin.Tx.Semantics.html#974" class="Field">value≡</a>           <a id="3633" class="Symbol">=</a> <a id="3635" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
    <a id="3644" class="Symbol">;</a> <a id="3646" href="Bitcoin.Tx.Semantics.html#1015" class="Field">satisfiesAbsLock</a> <a id="3663" class="Symbol">=</a> <a id="3665" href="Prelude.Ord.Core.html#669" class="Field">≤-refl</a>
    <a id="3676" class="Symbol">;</a> <a id="3678" href="Bitcoin.Tx.Semantics.html#1063" class="Field">satisfiesRelLock</a> <a id="3695" class="Symbol">=</a> <a id="3697" href="Bitcoin.Tx.Semantics.html#2597" class="Bound">t≤t′</a> <a id="3702" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3704" href="Data.Nat.Base.html#1567" class="InductiveConstructor">z≤n</a>
    <a id="3712" class="Symbol">}</a>

  <a id="Example4.T₃″"></a><a id="3717" href="Bitcoin.Tx.Semantics.html#3717" class="Function">T₃″</a> <a id="3721" class="Symbol">:</a> <a id="3723" href="Bitcoin.Tx.Base.html#1114" class="Record">Tx</a> <a id="3726" class="Number">2</a> <a id="3728" class="Number">1</a>
  <a id="3732" href="Bitcoin.Tx.Semantics.html#3717" class="Function">T₃″</a> <a id="3736" class="Symbol">=</a> <a id="3738" class="Keyword">record</a> <a id="3745" href="Bitcoin.Tx.Semantics.html#2984" class="Function">T₃′</a> <a id="3749" class="Symbol">{</a><a id="3750" href="Bitcoin.Tx.Base.html#1193" class="Field">wit</a> <a id="3754" class="Symbol">=</a> <a id="3756" href="Prelude.Init.html#9897" class="InductiveConstructor Operator">[</a> <a id="3758" href="Bitcoin.Tx.Semantics.html#2984" class="Function">T₃′</a> <a id="3762" href="Bitcoin.Tx.Base.html#2288" class="Function Operator">‼ʷ</a> <a id="3765" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="3768" href="Prelude.Init.html#9897" class="InductiveConstructor Operator">⨾</a> <a id="3770" href="Data.Product.html#2256" class="Function Operator">-,</a> <a id="3773" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="3775" href="Bitcoin.Crypto.html#668" class="Postulate">SIG</a> <a id="3779" href="Bitcoin.Tx.Semantics.html#2566" class="Bound">k</a> <a id="3781" class="Symbol">(</a><a id="3782" href="Bitcoin.Tx.Crypto.html#935" class="Function">μ</a> <a id="3784" href="Bitcoin.Tx.Semantics.html#2984" class="Function">T₃′</a> <a id="3788" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a><a id="3790" class="Symbol">)</a> <a id="3792" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="3794" href="Prelude.Init.html#9897" class="InductiveConstructor Operator">]</a><a id="3795" class="Symbol">}</a>

  <a id="Example4.T₂′↛T₃″"></a><a id="3800" href="Bitcoin.Tx.Semantics.html#3800" class="Function">T₂′↛T₃″</a> <a id="3808" class="Symbol">:</a> <a id="3810" href="Bitcoin.Tx.Semantics.html#2818" class="Function">T₂′</a> <a id="3814" href="Bitcoin.Tx.Semantics.html#1157" class="Function Operator">,</a> <a id="3816" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="3819" href="Bitcoin.Tx.Semantics.html#1157" class="Function Operator">,</a> <a id="3821" href="Bitcoin.Tx.Semantics.html#2583" class="Bound">t</a> <a id="3823" href="Bitcoin.Tx.Semantics.html#1157" class="Function Operator">↛</a> <a id="3825" href="Bitcoin.Tx.Semantics.html#3717" class="Function">T₃″</a> <a id="3829" href="Bitcoin.Tx.Semantics.html#1157" class="Function Operator">,</a> <a id="3831" href="Data.Fin.Patterns.html#417" class="InductiveConstructor">1F</a> <a id="3834" href="Bitcoin.Tx.Semantics.html#1157" class="Function Operator">,</a> <a id="3836" href="Bitcoin.Tx.Semantics.html#2585" class="Bound">t′</a>
  <a id="3841" href="Bitcoin.Tx.Semantics.html#3800" class="Function">T₂′↛T₃″</a> <a id="3849" class="Symbol">(_</a> <a id="3852" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3854" class="Keyword">record</a> <a id="3861" class="Symbol">{</a><a id="3862" href="Bitcoin.Tx.Semantics.html#913" class="Field">scriptValidates</a> <a id="3878" class="Symbol">=</a> <a id="3880" href="Bitcoin.Tx.Semantics.html#3880" class="Bound">ver≡</a><a id="3884" class="Symbol">})</a>
    <a id="3891" class="Symbol">=</a> <a id="3893" href="Bitcoin.Script.Semantics.html#2316" class="Function">⊨-elim</a> <a id="3900" href="Bitcoin.Tx.Semantics.html#3717" class="Function">T₃″</a> <a id="3904" href="Data.Fin.Patterns.html#417" class="InductiveConstructor">1F</a> <a id="3907" class="Symbol">_</a> <a id="3909" href="Bitcoin.Tx.Semantics.html#3880" class="Bound">ver≡</a> <a id="3914" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="3916" href="Prelude.General.html#4216" class="Function">false⇒¬T</a> <a id="3925" href="Function.Base.html#1928" class="Function Operator">$</a>
    <a id="3931" href="Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
      <a id="3943" href="Bitcoin.Tx.Crypto.html#1441" class="Function">ver⋆</a> <a id="3948" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="3950" href="Bitcoin.Tx.Semantics.html#2566" class="Bound">k</a> <a id="3952" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="3954" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">[</a> <a id="3956" href="Bitcoin.Crypto.html#668" class="Postulate">SIG</a> <a id="3960" href="Bitcoin.Tx.Semantics.html#2566" class="Bound">k</a> <a id="3962" class="Symbol">(</a><a id="3963" href="Bitcoin.Tx.Crypto.html#935" class="Function">μ</a> <a id="3965" href="Bitcoin.Tx.Semantics.html#2984" class="Function">T₃′</a> <a id="3969" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a><a id="3971" class="Symbol">)</a> <a id="3973" href="Prelude.Init.html#9874" class="InductiveConstructor Operator">]</a> <a id="3975" href="Bitcoin.Tx.Semantics.html#3717" class="Function">T₃″</a> <a id="3979" href="Data.Fin.Patterns.html#417" class="InductiveConstructor">1F</a>
    <a id="3986" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="3989" href="Prelude.General.html#5371" class="Function">if-eta</a> <a id="3996" class="Symbol">_</a> <a id="3998" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="4006" href="Bitcoin.Crypto.html#697" class="Postulate">VER</a> <a id="4010" href="Bitcoin.Tx.Semantics.html#2566" class="Bound">k</a> <a id="4012" class="Symbol">(</a><a id="4013" href="Bitcoin.Crypto.html#668" class="Postulate">SIG</a> <a id="4017" href="Bitcoin.Tx.Semantics.html#2566" class="Bound">k</a> <a id="4019" class="Symbol">_)</a> <a id="4022" class="Symbol">_</a>
    <a id="4028" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="4031" href="Prelude.General.html#4263" class="Function">¬T⇒false</a> <a id="4040" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="4042" href="Bitcoin.Crypto.html#1092" class="Function">VERSIG≢′</a> <a id="4051" class="Symbol">(λ</a> <a id="4054" class="Symbol">())</a> <a id="4058" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="4066" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>
    <a id="4076" href="Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a> <a id="4078" class="Keyword">where</a> <a id="4084" class="Keyword">open</a> <a id="4089" href="Relation.Binary.PropositionalEquality.Core.html#2717" class="Module">≡-Reasoning</a>
</pre></body></html>