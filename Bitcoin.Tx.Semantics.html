<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Bitcoin.Tx.Semantics</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/formal-bitcoin/tree/master/Bitcoin/Tx/Semantics.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Semantics of transactions.</a>
<a id="104" class="Comment">------------------------------------------------------------------------</a>
<a id="177" class="Keyword">module</a> <a id="184" href="Bitcoin.Tx.Semantics.html" class="Module">Bitcoin.Tx.Semantics</a> <a id="205" class="Keyword">where</a>

<a id="212" class="Keyword">open</a> <a id="217" class="Keyword">import</a> <a id="224" href="Prelude.Init.html" class="Module">Prelude.Init</a>
<a id="237" class="Keyword">open</a> <a id="242" class="Keyword">import</a> <a id="249" href="Prelude.ToN.html" class="Module">Prelude.ToN</a>
<a id="261" class="Keyword">open</a> <a id="266" class="Keyword">import</a> <a id="273" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="287" class="Keyword">open</a> <a id="292" class="Keyword">import</a> <a id="299" href="Prelude.Ord.html" class="Module">Prelude.Ord</a>

<a id="312" class="Keyword">open</a> <a id="317" class="Keyword">import</a> <a id="324" href="Bitcoin.BasicTypes.html" class="Module">Bitcoin.BasicTypes</a>
<a id="343" class="Keyword">open</a> <a id="348" class="Keyword">import</a> <a id="355" href="Bitcoin.Crypto.html" class="Module">Bitcoin.Crypto</a>
<a id="370" class="Keyword">open</a> <a id="375" class="Keyword">import</a> <a id="382" href="Bitcoin.Script.Base.html" class="Module">Bitcoin.Script.Base</a>
<a id="402" class="Keyword">open</a> <a id="407" class="Keyword">import</a> <a id="414" href="Bitcoin.Script.Semantics.html" class="Module">Bitcoin.Script.Semantics</a>
<a id="439" class="Keyword">open</a> <a id="444" class="Keyword">import</a> <a id="451" href="Bitcoin.Tx.Base.html" class="Module">Bitcoin.Tx.Base</a>
<a id="467" class="Keyword">open</a> <a id="472" class="Keyword">import</a> <a id="479" href="Bitcoin.Tx.Crypto.html" class="Module">Bitcoin.Tx.Crypto</a>

<a id="_atᵒ_"></a><a id="498" href="Bitcoin.Tx.Semantics.html#498" class="Function Operator">_atᵒ_</a> <a id="504" class="Symbol">:</a> <a id="506" href="Bitcoin.Tx.Base.html#908" class="Record">Tx</a> <a id="509" href="Bitcoin.Tx.Base.html#1985" class="Generalizable">i</a> <a id="511" href="Bitcoin.Tx.Base.html#1990" class="Generalizable">o</a> <a id="513" class="Symbol">→</a> <a id="515" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="519" href="Bitcoin.Tx.Base.html#1990" class="Generalizable">o</a> <a id="521" class="Symbol">→</a> <a id="523" href="Bitcoin.Tx.Base.html#343" class="Record">TxInput</a>
<a id="531" href="Bitcoin.Tx.Semantics.html#531" class="Bound">tx</a> <a id="534" href="Bitcoin.Tx.Semantics.html#498" class="Function Operator">atᵒ</a> <a id="538" href="Bitcoin.Tx.Semantics.html#538" class="Bound">i</a> <a id="540" class="Symbol">=</a> <a id="542" class="Symbol">(</a><a id="543" href="Bitcoin.Tx.Semantics.html#531" class="Bound">tx</a> <a id="546" href="Bitcoin.Crypto.html#569" class="Postulate Operator">♯</a><a id="547" class="Symbol">)</a> <a id="549" href="Bitcoin.Tx.Base.html#377" class="InductiveConstructor Operator">at</a> <a id="552" href="Prelude.ToN.html#116" class="Field">toℕ</a> <a id="556" href="Bitcoin.Tx.Semantics.html#538" class="Bound">i</a>

<a id="559" class="Comment">-- Output redeeming.</a>
<a id="580" class="Keyword">record</a> <a id="_,_,_↝[_]_,_,_"></a><a id="587" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">_,_,_↝[_]_,_,_</a> <a id="602" class="Symbol">(</a><a id="603" href="Bitcoin.Tx.Semantics.html#603" class="Bound">tx</a> <a id="606" class="Symbol">:</a> <a id="608" href="Bitcoin.Tx.Base.html#908" class="Record">Tx</a> <a id="611" href="Bitcoin.Tx.Base.html#1985" class="Generalizable">i</a> <a id="613" href="Bitcoin.Tx.Base.html#1990" class="Generalizable">o</a><a id="614" class="Symbol">)</a> <a id="616" class="Symbol">(</a><a id="617" href="Bitcoin.Tx.Semantics.html#617" class="Bound">i</a> <a id="619" class="Symbol">:</a> <a id="621" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="625" href="Bitcoin.Tx.Base.html#1990" class="Generalizable">o</a><a id="626" class="Symbol">)</a> <a id="628" class="Symbol">(</a><a id="629" href="Bitcoin.Tx.Semantics.html#629" class="Bound">t</a> <a id="631" class="Symbol">:</a> <a id="633" href="Bitcoin.BasicTypes.html#233" class="Function">Time</a><a id="637" class="Symbol">)</a>
                      <a id="661" class="Symbol">(</a><a id="662" href="Bitcoin.Tx.Semantics.html#662" class="Bound">v</a> <a id="664" class="Symbol">:</a> <a id="666" href="Bitcoin.BasicTypes.html#222" class="Function">Value</a><a id="671" class="Symbol">)</a>
                      <a id="695" class="Symbol">(</a><a id="696" href="Bitcoin.Tx.Semantics.html#696" class="Bound">tx′</a> <a id="700" class="Symbol">:</a> <a id="702" href="Bitcoin.Tx.Base.html#908" class="Record">Tx</a> <a id="705" href="Bitcoin.Tx.Base.html#1987" class="Generalizable">i′</a> <a id="708" href="Bitcoin.Tx.Base.html#1992" class="Generalizable">o′</a><a id="710" class="Symbol">)</a> <a id="712" class="Symbol">(</a><a id="713" href="Bitcoin.Tx.Semantics.html#713" class="Bound">j</a> <a id="715" class="Symbol">:</a> <a id="717" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="721" href="Bitcoin.Tx.Base.html#1987" class="Generalizable">i′</a><a id="723" class="Symbol">)</a> <a id="725" class="Symbol">(</a><a id="726" href="Bitcoin.Tx.Semantics.html#726" class="Bound">t′</a> <a id="729" class="Symbol">:</a> <a id="731" href="Bitcoin.BasicTypes.html#233" class="Function">Time</a><a id="735" class="Symbol">)</a>
                      <a id="759" class="Symbol">:</a> <a id="761" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="765" class="Keyword">where</a>
  <a id="773" class="Keyword">field</a>

    <a id="_,_,_↝[_]_,_,_.witness~validator"></a><a id="784" href="Bitcoin.Tx.Semantics.html#784" class="Field">witness~validator</a> <a id="802" class="Symbol">:</a>
      <a id="810" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="816" class="Symbol">(</a><a id="817" href="Bitcoin.Tx.Semantics.html#603" class="Bound">tx</a> <a id="820" href="Bitcoin.Tx.Base.html#2210" class="Function Operator">‼ᵒ</a> <a id="823" href="Bitcoin.Tx.Semantics.html#617" class="Bound">i</a><a id="824" class="Symbol">)</a> <a id="826" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="828" href="Bitcoin.Script.Base.html#375" class="InductiveConstructor">Ctx</a> <a id="832" class="Symbol">(</a><a id="833" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="839" class="Symbol">(</a><a id="840" href="Bitcoin.Tx.Semantics.html#696" class="Bound">tx′</a> <a id="844" href="Bitcoin.Tx.Base.html#2082" class="Function Operator">‼ʷ</a> <a id="847" href="Bitcoin.Tx.Semantics.html#713" class="Bound">j</a><a id="848" class="Symbol">))</a>

    <a id="856" class="Comment">---------------------------------------------------------------</a>

    <a id="_,_,_↝[_]_,_,_.input~output"></a><a id="925" href="Bitcoin.Tx.Semantics.html#925" class="Field">input~output</a> <a id="938" class="Symbol">:</a>
      <a id="946" href="Bitcoin.Tx.Semantics.html#696" class="Bound">tx′</a> <a id="950" href="Bitcoin.Tx.Base.html#2016" class="Function Operator">‼ⁱ</a> <a id="953" href="Bitcoin.Tx.Semantics.html#713" class="Bound">j</a> <a id="955" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="957" href="Bitcoin.Tx.Semantics.html#603" class="Bound">tx</a> <a id="960" href="Bitcoin.Tx.Semantics.html#498" class="Function Operator">atᵒ</a> <a id="964" href="Bitcoin.Tx.Semantics.html#617" class="Bound">i</a>

    <a id="_,_,_↝[_]_,_,_.scriptValidates"></a><a id="971" href="Bitcoin.Tx.Semantics.html#971" class="Field">scriptValidates</a> <a id="987" class="Symbol">:</a>
      <a id="995" class="Symbol">(</a><a id="996" href="Bitcoin.Tx.Semantics.html#696" class="Bound">tx′</a> <a id="1000" href="Bitcoin.Script.Semantics.html#2593" class="Function Operator">,</a> <a id="1002" href="Bitcoin.Tx.Semantics.html#713" class="Bound">j</a> <a id="1004" href="Bitcoin.Script.Semantics.html#2593" class="Function Operator">⊨</a> <a id="1006" href="Bitcoin.Tx.Base.html#680" class="Field">validator</a> <a id="1016" class="Symbol">(</a><a id="1017" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="1023" class="Symbol">(</a><a id="1024" href="Bitcoin.Tx.Semantics.html#603" class="Bound">tx</a> <a id="1027" href="Bitcoin.Tx.Base.html#2210" class="Function Operator">‼ᵒ</a> <a id="1030" href="Bitcoin.Tx.Semantics.html#617" class="Bound">i</a><a id="1031" class="Symbol">)))</a> <a id="1035" class="Symbol">{</a><a id="1036" class="Argument">pr</a> <a id="1039" class="Symbol">=</a> <a id="1041" href="Bitcoin.Tx.Semantics.html#784" class="Field">witness~validator</a><a id="1058" class="Symbol">}</a>

    <a id="_,_,_↝[_]_,_,_.value≡"></a><a id="1065" href="Bitcoin.Tx.Semantics.html#1065" class="Field">value≡</a> <a id="1072" class="Symbol">:</a>
      <a id="1080" href="Bitcoin.Tx.Semantics.html#662" class="Bound">v</a> <a id="1082" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1084" href="Bitcoin.Tx.Base.html#658" class="Field">value</a> <a id="1090" class="Symbol">(</a><a id="1091" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="1097" class="Symbol">(</a><a id="1098" href="Bitcoin.Tx.Semantics.html#603" class="Bound">tx</a> <a id="1101" href="Bitcoin.Tx.Base.html#2210" class="Function Operator">‼ᵒ</a> <a id="1104" href="Bitcoin.Tx.Semantics.html#617" class="Bound">i</a><a id="1105" class="Symbol">))</a>

    <a id="_,_,_↝[_]_,_,_.satisfiesAbsLock"></a><a id="1113" href="Bitcoin.Tx.Semantics.html#1113" class="Field">satisfiesAbsLock</a> <a id="1130" class="Symbol">:</a>
      <a id="1138" href="Bitcoin.Tx.Semantics.html#726" class="Bound">t′</a> <a id="1141" href="Prelude.Ord.Core.html#520" class="Function Operator">≥</a> <a id="1143" href="Bitcoin.Tx.Base.html#1137" class="Field">absLock</a> <a id="1151" href="Bitcoin.Tx.Semantics.html#696" class="Bound">tx′</a>

    <a id="_,_,_↝[_]_,_,_.satisfiesRelLock"></a><a id="1160" href="Bitcoin.Tx.Semantics.html#1160" class="Field">satisfiesRelLock</a> <a id="1177" class="Symbol">:</a>
        <a id="1187" class="Symbol">(</a><a id="1188" href="Bitcoin.Tx.Semantics.html#726" class="Bound">t′</a> <a id="1191" href="Prelude.Ord.Core.html#520" class="Function Operator">≥</a> <a id="1193" href="Bitcoin.Tx.Semantics.html#629" class="Bound">t</a><a id="1194" class="Symbol">)</a>
      <a id="1202" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1204" class="Symbol">(</a><a id="1205" href="Bitcoin.Tx.Semantics.html#726" class="Bound">t′</a> <a id="1208" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="1210" href="Bitcoin.Tx.Semantics.html#629" class="Bound">t</a> <a id="1212" href="Prelude.Ord.Core.html#520" class="Function Operator">≥</a> <a id="1214" href="Bitcoin.Tx.Semantics.html#696" class="Bound">tx′</a> <a id="1218" href="Bitcoin.Tx.Base.html#2146" class="Function Operator">‼ʳ</a> <a id="1221" href="Bitcoin.Tx.Semantics.html#713" class="Bound">j</a><a id="1222" class="Symbol">)</a>


<a id="_,_,_↛_,_,_"></a><a id="1226" href="Bitcoin.Tx.Semantics.html#1226" class="Function Operator">_,_,_↛_,_,_</a> <a id="1238" class="Symbol">:</a> <a id="1240" href="Bitcoin.Tx.Base.html#908" class="Record">Tx</a> <a id="1243" href="Bitcoin.Tx.Base.html#1985" class="Generalizable">i</a> <a id="1245" href="Bitcoin.Tx.Base.html#1990" class="Generalizable">o</a> <a id="1247" class="Symbol">→</a> <a id="1249" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="1253" href="Bitcoin.Tx.Base.html#1990" class="Generalizable">o</a> <a id="1255" class="Symbol">→</a> <a id="1257" href="Bitcoin.BasicTypes.html#233" class="Function">Time</a> <a id="1262" class="Symbol">→</a> <a id="1264" href="Bitcoin.Tx.Base.html#908" class="Record">Tx</a> <a id="1267" href="Bitcoin.Tx.Base.html#1987" class="Generalizable">i′</a> <a id="1270" href="Bitcoin.Tx.Base.html#1992" class="Generalizable">o′</a> <a id="1273" class="Symbol">→</a> <a id="1275" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="1279" href="Bitcoin.Tx.Base.html#1987" class="Generalizable">i′</a> <a id="1282" class="Symbol">→</a> <a id="1284" href="Bitcoin.BasicTypes.html#233" class="Function">Time</a> <a id="1289" class="Symbol">→</a> <a id="1291" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="1295" href="Bitcoin.Tx.Semantics.html#1295" class="Bound">tx</a> <a id="1298" href="Bitcoin.Tx.Semantics.html#1226" class="Function Operator">,</a> <a id="1300" href="Bitcoin.Tx.Semantics.html#1300" class="Bound">i</a> <a id="1302" href="Bitcoin.Tx.Semantics.html#1226" class="Function Operator">,</a> <a id="1304" href="Bitcoin.Tx.Semantics.html#1304" class="Bound">t</a> <a id="1306" href="Bitcoin.Tx.Semantics.html#1226" class="Function Operator">↛</a> <a id="1308" href="Bitcoin.Tx.Semantics.html#1308" class="Bound">tx′</a> <a id="1312" href="Bitcoin.Tx.Semantics.html#1226" class="Function Operator">,</a> <a id="1314" href="Bitcoin.Tx.Semantics.html#1314" class="Bound">j</a> <a id="1316" href="Bitcoin.Tx.Semantics.html#1226" class="Function Operator">,</a> <a id="1318" href="Bitcoin.Tx.Semantics.html#1318" class="Bound">t′</a> <a id="1321" class="Symbol">=</a> <a id="1323" href="Relation.Nullary.html#656" class="Function Operator">¬</a> <a id="1325" class="Symbol">(</a><a id="1326" href="Data.Product.html#1806" class="Function">∃[</a> <a id="1329" href="Bitcoin.Tx.Semantics.html#1329" class="Bound">v</a> <a id="1331" href="Data.Product.html#1806" class="Function">]</a> <a id="1333" class="Symbol">(</a><a id="1334" href="Bitcoin.Tx.Semantics.html#1295" class="Bound">tx</a> <a id="1337" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">,</a> <a id="1339" href="Bitcoin.Tx.Semantics.html#1300" class="Bound">i</a> <a id="1341" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">,</a> <a id="1343" href="Bitcoin.Tx.Semantics.html#1304" class="Bound">t</a> <a id="1345" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">↝[</a> <a id="1348" href="Bitcoin.Tx.Semantics.html#1329" class="Bound">v</a> <a id="1350" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">]</a> <a id="1352" href="Bitcoin.Tx.Semantics.html#1308" class="Bound">tx′</a> <a id="1356" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">,</a> <a id="1358" href="Bitcoin.Tx.Semantics.html#1314" class="Bound">j</a> <a id="1360" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">,</a> <a id="1362" href="Bitcoin.Tx.Semantics.html#1318" class="Bound">t′</a><a id="1364" class="Symbol">))</a>

<a id="1368" class="Keyword">module</a> <a id="Example4"></a><a id="1375" href="Bitcoin.Tx.Semantics.html#1375" class="Module">Example4</a> <a id="1384" class="Keyword">where</a>

  <a id="1393" class="Keyword">postulate</a>
    <a id="Example4.ks"></a><a id="1407" href="Bitcoin.Tx.Semantics.html#1407" class="Postulate">ks</a> <a id="Example4.ks′"></a><a id="1410" href="Bitcoin.Tx.Semantics.html#1410" class="Postulate">ks′</a> <a id="1414" class="Symbol">:</a> <a id="1416" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1421" href="Bitcoin.Crypto.html#295" class="Record">KeyPair</a>
    <a id="Example4.v₀"></a><a id="1433" href="Bitcoin.Tx.Semantics.html#1433" class="Postulate">v₀</a> <a id="Example4.v₁"></a><a id="1436" href="Bitcoin.Tx.Semantics.html#1436" class="Postulate">v₁</a> <a id="1439" class="Symbol">:</a> <a id="1441" href="Bitcoin.BasicTypes.html#222" class="Function">Value</a>
    <a id="Example4.t₀"></a><a id="1451" href="Bitcoin.Tx.Semantics.html#1451" class="Postulate">t₀</a> <a id="Example4.t₁"></a><a id="1454" href="Bitcoin.Tx.Semantics.html#1454" class="Postulate">t₁</a> <a id="Example4.abs₀"></a><a id="1457" href="Bitcoin.Tx.Semantics.html#1457" class="Postulate">abs₀</a> <a id="Example4.rel₀"></a><a id="1462" href="Bitcoin.Tx.Semantics.html#1462" class="Postulate">rel₀</a> <a id="1467" class="Symbol">:</a> <a id="1469" href="Bitcoin.BasicTypes.html#233" class="Function">Time</a>

  <a id="Example4.T₀"></a><a id="1477" href="Bitcoin.Tx.Semantics.html#1477" class="Function">T₀</a> <a id="1480" class="Symbol">:</a> <a id="1482" href="Bitcoin.Tx.Base.html#908" class="Record">Tx</a> <a id="1485" class="Number">0</a> <a id="1487" class="Number">1</a>
  <a id="1491" href="Bitcoin.Tx.Semantics.html#1477" class="Function">T₀</a> <a id="1494" class="Symbol">=</a> <a id="1496" class="Keyword">record</a>
         <a id="1512" class="Symbol">{</a> <a id="1514" href="Bitcoin.Tx.Base.html#945" class="Field">inputs</a>  <a id="1522" class="Symbol">=</a> <a id="1524" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a>
         <a id="1536" class="Symbol">;</a> <a id="1538" href="Bitcoin.Tx.Base.html#986" class="Field">wit</a>     <a id="1546" class="Symbol">=</a> <a id="1548" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a>
         <a id="1560" class="Symbol">;</a> <a id="1562" href="Bitcoin.Tx.Base.html#1041" class="Field">relLock</a> <a id="1570" class="Symbol">=</a> <a id="1572" href="Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a>
         <a id="1584" class="Symbol">;</a> <a id="1586" href="Bitcoin.Tx.Base.html#1095" class="Field">outputs</a> <a id="1594" class="Symbol">=</a> <a id="1596" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="1600" href="Bitcoin.Script.Base.html#375" class="InductiveConstructor">Ctx</a> <a id="1604" class="Number">1</a> <a id="1606" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1608" class="Symbol">(</a><a id="1609" class="Keyword">record</a> <a id="1616" class="Symbol">{</a> <a id="1618" href="Bitcoin.Tx.Base.html#658" class="Field">value</a> <a id="1624" class="Symbol">=</a> <a id="1626" href="Bitcoin.Tx.Semantics.html#1433" class="Postulate">v₀</a> <a id="1629" class="Symbol">;</a> <a id="1631" href="Bitcoin.Tx.Base.html#680" class="Field">validator</a> <a id="1641" class="Symbol">=</a> <a id="1643" href="Bitcoin.Script.Base.html#2174" class="InductiveConstructor Operator">ƛ</a> <a id="1645" class="Symbol">(</a><a id="1646" href="Bitcoin.Script.Base.html#1413" class="InductiveConstructor">versig</a> <a id="1653" href="Bitcoin.Tx.Semantics.html#1407" class="Postulate">ks</a> <a id="1656" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="1658" href="Data.Fin.Patterns.html#390" class="InductiveConstructor">0F</a> <a id="1661" href="Data.List.Base.html#5025" class="Function Operator">]</a><a id="1662" class="Symbol">)</a> <a id="1664" class="Symbol">})</a> <a id="1667" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
         <a id="1678" class="Symbol">;</a> <a id="1680" href="Bitcoin.Tx.Base.html#1137" class="Field">absLock</a> <a id="1688" class="Symbol">=</a> <a id="1690" href="Bitcoin.Tx.Semantics.html#1457" class="Postulate">abs₀</a> <a id="1695" class="Symbol">}</a>

  <a id="Example4.T₁"></a><a id="1700" href="Bitcoin.Tx.Semantics.html#1700" class="Function">T₁</a> <a id="1703" class="Symbol">:</a> <a id="1705" href="Bitcoin.Tx.Base.html#908" class="Record">Tx</a> <a id="1708" class="Number">1</a> <a id="1710" class="Number">1</a>
  <a id="1714" href="Bitcoin.Tx.Semantics.html#1700" class="Function">T₁</a> <a id="1717" class="Symbol">=</a> <a id="1719" href="Bitcoin.Tx.Crypto.html#937" class="Function">sig⋆</a> <a id="1724" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="1728" href="Bitcoin.Tx.Semantics.html#1407" class="Postulate">ks</a> <a id="1731" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
            <a id="1745" class="Symbol">(</a><a id="1746" class="Keyword">record</a> <a id="1753" class="Symbol">{</a> <a id="1755" href="Bitcoin.Tx.Base.html#945" class="Field">inputs</a>  <a id="1763" class="Symbol">=</a> <a id="1765" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="1769" class="Keyword">record</a> <a id="1776" class="Symbol">{</a> <a id="1778" href="Bitcoin.Tx.Base.html#394" class="Field">txId</a> <a id="1783" class="Symbol">=</a> <a id="1785" href="Bitcoin.Tx.Semantics.html#1477" class="Function">T₀</a> <a id="1788" href="Bitcoin.Crypto.html#569" class="Postulate Operator">♯</a> <a id="1790" class="Symbol">;</a> <a id="1792" href="Bitcoin.Tx.Base.html#449" class="Field">index</a> <a id="1798" class="Symbol">=</a> <a id="1800" class="Number">0</a> <a id="1802" class="Symbol">}</a> <a id="1804" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
                    <a id="1826" class="Symbol">;</a> <a id="1828" href="Bitcoin.Tx.Base.html#986" class="Field">wit</a>     <a id="1836" class="Symbol">=</a> <a id="1838" href="Bitcoin.Tx.Crypto.html#550" class="Function">wit⊥</a>
                    <a id="1863" class="Symbol">;</a> <a id="1865" href="Bitcoin.Tx.Base.html#1041" class="Field">relLock</a> <a id="1873" class="Symbol">=</a> <a id="1875" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="1879" href="Bitcoin.Tx.Semantics.html#1462" class="Postulate">rel₀</a> <a id="1884" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
                    <a id="1906" class="Symbol">;</a> <a id="1908" href="Bitcoin.Tx.Base.html#1095" class="Field">outputs</a> <a id="1916" class="Symbol">=</a> <a id="1918" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="1922" href="Bitcoin.Script.Base.html#375" class="InductiveConstructor">Ctx</a> <a id="1926" class="Number">1</a> <a id="1928" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1930" class="Symbol">(</a><a id="1931" class="Keyword">record</a> <a id="1938" class="Symbol">{</a> <a id="1940" href="Bitcoin.Tx.Base.html#658" class="Field">value</a> <a id="1946" class="Symbol">=</a> <a id="1948" href="Bitcoin.Tx.Semantics.html#1436" class="Postulate">v₁</a> <a id="1951" class="Symbol">;</a> <a id="1953" href="Bitcoin.Tx.Base.html#680" class="Field">validator</a> <a id="1963" class="Symbol">=</a> <a id="1965" href="Bitcoin.Script.Base.html#2174" class="InductiveConstructor Operator">ƛ</a> <a id="1967" class="Symbol">(</a><a id="1968" href="Bitcoin.Script.Base.html#1413" class="InductiveConstructor">versig</a> <a id="1975" href="Bitcoin.Tx.Semantics.html#1410" class="Postulate">ks′</a> <a id="1979" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="1981" href="Data.Fin.Patterns.html#390" class="InductiveConstructor">0F</a> <a id="1984" href="Data.List.Base.html#5025" class="Function Operator">]</a><a id="1985" class="Symbol">)</a> <a id="1987" class="Symbol">})</a> <a id="1990" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
                    <a id="2012" class="Symbol">;</a> <a id="2014" href="Bitcoin.Tx.Base.html#1137" class="Field">absLock</a> <a id="2022" class="Symbol">=</a> <a id="2024" href="Bitcoin.Tx.Semantics.html#1454" class="Postulate">t₁</a> <a id="2027" class="Symbol">})</a>

  <a id="Example4.T₁′"></a><a id="2033" href="Bitcoin.Tx.Semantics.html#2033" class="Function">T₁′</a> <a id="2037" class="Symbol">:</a> <a id="2039" href="Bitcoin.Tx.Base.html#908" class="Record">Tx</a> <a id="2042" class="Number">1</a> <a id="2044" class="Number">1</a>
  <a id="2048" href="Bitcoin.Tx.Semantics.html#2033" class="Function">T₁′</a> <a id="2052" class="Symbol">=</a> <a id="2054" href="Bitcoin.Tx.Crypto.html#937" class="Function">sig⋆</a> <a id="2059" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="2063" href="Bitcoin.Tx.Semantics.html#1410" class="Postulate">ks′</a> <a id="2067" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
             <a id="2082" class="Symbol">(</a><a id="2083" class="Keyword">record</a> <a id="2090" class="Symbol">{</a> <a id="2092" href="Bitcoin.Tx.Base.html#945" class="Field">inputs</a> <a id="2099" class="Symbol">=</a> <a id="2101" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="2105" class="Keyword">record</a> <a id="2112" class="Symbol">{</a> <a id="2114" href="Bitcoin.Tx.Base.html#394" class="Field">txId</a> <a id="2119" class="Symbol">=</a> <a id="2121" href="Bitcoin.Tx.Semantics.html#1477" class="Function">T₀</a> <a id="2124" href="Bitcoin.Crypto.html#569" class="Postulate Operator">♯</a> <a id="2126" class="Symbol">;</a> <a id="2128" href="Bitcoin.Tx.Base.html#449" class="Field">index</a> <a id="2134" class="Symbol">=</a> <a id="2136" class="Number">0</a> <a id="2138" class="Symbol">}</a> <a id="2140" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
                     <a id="2163" class="Symbol">;</a> <a id="2165" href="Bitcoin.Tx.Base.html#986" class="Field">wit</a>     <a id="2173" class="Symbol">=</a> <a id="2175" href="Bitcoin.Tx.Crypto.html#550" class="Function">wit⊥</a>
                     <a id="2201" class="Symbol">;</a> <a id="2203" href="Bitcoin.Tx.Base.html#1041" class="Field">relLock</a> <a id="2211" class="Symbol">=</a> <a id="2213" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="2217" class="Number">1</a> <a id="2219" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
                     <a id="2242" class="Symbol">;</a> <a id="2244" href="Bitcoin.Tx.Base.html#1095" class="Field">outputs</a> <a id="2252" class="Symbol">=</a> <a id="2254" href="Data.Vec.Base.html#5750" class="Function Operator">V.[</a> <a id="2258" href="Bitcoin.Script.Base.html#375" class="InductiveConstructor">Ctx</a> <a id="2262" class="Number">1</a> <a id="2264" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2266" class="Symbol">(</a><a id="2267" class="Keyword">record</a> <a id="2274" class="Symbol">{</a> <a id="2276" href="Bitcoin.Tx.Base.html#658" class="Field">value</a> <a id="2282" class="Symbol">=</a> <a id="2284" href="Bitcoin.Tx.Semantics.html#1436" class="Postulate">v₁</a> <a id="2287" class="Symbol">;</a> <a id="2289" href="Bitcoin.Tx.Base.html#680" class="Field">validator</a> <a id="2299" class="Symbol">=</a> <a id="2301" href="Bitcoin.Script.Base.html#2174" class="InductiveConstructor Operator">ƛ</a> <a id="2303" class="Symbol">(</a><a id="2304" href="Bitcoin.Script.Base.html#1413" class="InductiveConstructor">versig</a> <a id="2311" href="Bitcoin.Tx.Semantics.html#1410" class="Postulate">ks′</a> <a id="2315" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="2317" href="Data.Fin.Patterns.html#390" class="InductiveConstructor">0F</a> <a id="2320" href="Data.List.Base.html#5025" class="Function Operator">]</a><a id="2321" class="Symbol">)</a> <a id="2323" class="Symbol">})</a> <a id="2326" href="Data.Vec.Base.html#5750" class="Function Operator">]</a>
                     <a id="2349" class="Symbol">;</a> <a id="2351" href="Bitcoin.Tx.Base.html#1137" class="Field">absLock</a> <a id="2359" class="Symbol">=</a> <a id="2361" href="Bitcoin.Tx.Semantics.html#1454" class="Postulate">t₁</a> <a id="2364" class="Symbol">})</a>

  <a id="2370" class="Keyword">postulate</a>
    <a id="Example4.T₀↝T₁"></a><a id="2384" href="Bitcoin.Tx.Semantics.html#2384" class="Postulate">T₀↝T₁</a> <a id="2390" class="Symbol">:</a> <a id="2392" href="Bitcoin.Tx.Semantics.html#1477" class="Function">T₀</a> <a id="2395" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">,</a> <a id="2397" href="Data.Fin.Patterns.html#390" class="InductiveConstructor">0F</a> <a id="2400" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">,</a> <a id="2402" href="Bitcoin.Tx.Semantics.html#1451" class="Postulate">t₀</a> <a id="2405" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">↝[</a> <a id="2408" href="Bitcoin.Tx.Semantics.html#1433" class="Postulate">v₀</a> <a id="2411" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">]</a> <a id="2413" href="Bitcoin.Tx.Semantics.html#1700" class="Function">T₁</a> <a id="2416" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">,</a> <a id="2418" href="Data.Fin.Patterns.html#390" class="InductiveConstructor">0F</a> <a id="2421" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">,</a> <a id="2423" href="Bitcoin.Tx.Semantics.html#1454" class="Postulate">t₁</a>
    <a id="Example4.T₀↝T₁′"></a><a id="2430" href="Bitcoin.Tx.Semantics.html#2430" class="Postulate">T₀↝T₁′</a> <a id="2437" class="Symbol">:</a> <a id="2439" href="Bitcoin.Tx.Semantics.html#1477" class="Function">T₀</a> <a id="2442" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">,</a> <a id="2444" href="Data.Fin.Patterns.html#390" class="InductiveConstructor">0F</a> <a id="2447" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">,</a> <a id="2449" href="Bitcoin.Tx.Semantics.html#1451" class="Postulate">t₀</a> <a id="2452" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">↝[</a> <a id="2455" href="Bitcoin.Tx.Semantics.html#1433" class="Postulate">v₀</a> <a id="2458" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">]</a> <a id="2460" href="Bitcoin.Tx.Semantics.html#2033" class="Function">T₁′</a> <a id="2464" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">,</a> <a id="2466" href="Data.Fin.Patterns.html#390" class="InductiveConstructor">0F</a> <a id="2469" href="Bitcoin.Tx.Semantics.html#587" class="Record Operator">,</a> <a id="2471" href="Bitcoin.Tx.Semantics.html#1454" class="Postulate">t₁</a>
</pre></body></html>